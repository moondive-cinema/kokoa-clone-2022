(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1298:function(e,t,n){"use strict";var o=n(44),r=n.n(o),a=n(25),i=n.n(a),l=n(5),s=n(173),c=l.f.div.withConfig({displayName:"Iconstyled__Icon",componentId:"sc-7igckt-0"})(["width:",";height:",";display:flex;align-items:center;justify-content:center;cursor:pointer;visibility:",";&::before{content:'';display:block;width:","px;height:","px;background-image:url(",");background-size:cover;opacity:",";}&:hover{&::before{opacity:1;}}"],(function(e){return i()(e.width)?"auto":"".concat(e.width,"px")}),(function(e){return i()(e.height)?"auto":"".concat(e.height,"px")}),(function(e){return e.hidden?"hidden":"visible"}),(function(e){return r()(e.size)?e.size[0]:e.size}),(function(e){return r()(e.size)?e.size[1]:e.size}),(function(e){return Object(s.b)(e.name+(e.withTheme?"-".concat(e.theme.textColor):""))}),(function(e){return e.defaultOpacity||.6}));t.a=c},1312:function(e,t,n){"use strict";var o=n(0);t.a=function(e){var t=Object(o.useRef)();return Object(o.useEffect)((function(){t.current=e}),[e]),t.current}},1328:function(e,t,n){"use strict";var o=n(41),r=n.n(o),a=n(0),i=n.n(a),l=n(301),s=n(212),c=n(60),u=n(477),d=n(1314),p=n(5),f=n(84),h=n(46),m={Wrapper:p.f.div.withConfig({displayName:"UserChatActionsstyled__Wrapper",componentId:"sc-1cp4fk1-0"})(["box-sizing:border-box;width:210px;padding:6px;"," background-color:",";border-radius:12px;box-shadow:",";transform:translateX(10px) translateY(10px);"],f.d.RemSize14,h.a.white,h.a.ev3),Item:p.f.div.withConfig({displayName:"UserChatActionsstyled__Item",componentId:"sc-1cp4fk1-1"})(["display:flex;align-items:center;padding:5px 6px;color:",";cursor:pointer;border-radius:6px;&:hover{background-color:",";}"],h.a.black85,h.a.black5)};var g=function(e){var t=e.target,n=e.show,o=e.onHide,p=e.onLeave,f=Object(s.a)().translate,h=Object(l.a)(),g=r()(h,3),b=g[0],y=g[1],v=g[2],w=Object(a.useCallback)((function(){p(),v()}),[v,p]),x=Object(a.useCallback)((function(){o(),v()}),[v,o]),C=Object(a.useMemo)((function(){return i.a.createElement(d.a,{show:b,onHide:v,title:f("ch.chat.menu.leave_chat"),description:f("ch.chat.menu.leave_chat.content"),primaryButton:{content:f("ch.chat.menu.leave"),onClick:w},secondaryButton:{content:f("ch.chat.menu.delete_message.cancel"),onClick:x}})}),[x,w,v,b,f]),O=Object(a.useCallback)((function(e){e.stopPropagation()}),[]),_=Object(a.useCallback)((function(e){e.stopPropagation(),o()}),[o]);Object(a.useEffect)((function(){return b&&document.body.classList.add("blockScroll"),function(){document.body.classList.remove("blockScroll")}}),[b]);var j=Object(a.useCallback)((function(){o(),y()}),[o,y]),k=Object(a.useCallback)((function(){o(),v()}),[o,v]);return i.a.createElement(i.a.Fragment,null,n&&i.a.createElement(u.a,{target:t,placement:c.a.BOTTOM_RIGHT,onHide:k,rootClose:!0,marginX:10},i.a.createElement(m.Wrapper,{onClick:O},i.a.createElement(m.Item,{onClick:j},f("ch.chat.menu.leave_chat")),i.a.createElement(m.Item,{onClick:_},f("ch.chat.menu.delete_message.cancel")))),C)};t.a=function(e){var t=e.target,n=e.onLeave,o=Object(l.a)(!1),s=r()(o,3),c=s[0],u=s[1],d=s[2],p=Object(a.useMemo)((function(){return i.a.createElement(g,{target:t,show:c,onHide:d,onLeave:n})}),[t,c,d,n]);return[c,u,d,p]}},1329:function(e,t,n){"use strict";var o=n(0),r=n.n(o),a=n(212),i=n(6),l=n.n(i),s=n(5),c=n(135),u=n(181),d=n(46),p=n(84);var f={Button:s.f.div.withConfig({displayName:"NewChatButtonstyled__Button",componentId:"sc-1nuv8bj-0"})(["display:flex;justify-content:center;width:100%;padding:14px;"," font-weight:bold;color:",";cursor:pointer;background:",";border-radius:17px;box-shadow:",";opacity:1;transition:box-shadow 0.2s ease-out;&:hover{",";}"],p.d.RemSize15,(function(e){return function(e,t,n){return t?d.a.txt_black_dark:e?d.a.txt_black_darkest:n}(e.secondary,e.disabled,e.theme.textColor)}),(function(e){return function(e,t,n){var o;if(e||t)return d.a.bg_black_lighter;var r=Object(c.c)(n.color);return n.color!==r?r:n.color===n.gradientColor?n.color:l()(o="linear-gradient(90deg, ".concat(n.color," 48.41%, ")).call(o,n.gradientColor,") 100%")}(e.secondary,e.disabled,e.theme)}),(function(e){var t=e.secondary,n=e.disabled;return t||n?"none":d.a.ev2}),(function(e){return function(e,t){return e||t?Object(s.e)(["background-color:",";"],d.a.bg_black_light):Object(s.e)(["box-shadow:",";"],d.a.ev3)}(e.secondary,e.disabled)})),Icon:Object(s.f)(u.b).withConfig({displayName:"NewChatButtonstyled__Icon",componentId:"sc-1nuv8bj-1"})(["display:inline-flex;margin-right:4px;"])};t.a=function(e){var t=e.secondary,n=void 0!==t&&t,i=e.disabled,l=void 0!==i&&i,s=e.onClick,c=e.className,u=Object(a.a)().translate,d=Object(o.useMemo)((function(){var e=l?"hand-wave":"send-filled".concat(n?"-black":"");return r.a.createElement(f.Icon,{name:e,width:20,height:20,size:20,withTheme:!n&&!l,defaultOpacity:1})}),[l,n]),p=Object(o.useMemo)((function(){return u(l?"ch.chat.disabled_chat":"ch.chat.start_new_chat")}),[l,u]);return r.a.createElement(f.Button,{"data-ch-testid":"new-chat-button",className:c,secondary:n,disabled:l,onClick:s},d,p)}},1343:function(e,t,n){var o=n(1430),r=n(381),a=n(1431);e.exports=function(e){return r(e)?a(e):o(e)}},1344:function(e,t,n){"use strict";var o=n(41),r=n.n(o),a=n(12),i=n.n(a),l=n(83),s=n.n(l),c=n(6),u=n.n(c),d=n(0),p=n.n(d),f=n(212),h=n(1294),m=n(1306),g=n(153),b=n(1328),y=n(349),v=n(469),w=n(181),x=n(1298),C=n(5),O=n(37),_=n(65),j=n(46),k=n(84),I=C.f.div.withConfig({displayName:"UserChatItemstyled__Gutter",componentId:"sc-1m3tdpx-0"})(["width:52px;padding:8px 0 0 6px;"]),E=C.f.div.withConfig({displayName:"UserChatItemstyled__Content",componentId:"sc-1m3tdpx-1"})(["flex-basis:0;flex-grow:1;flex-shrink:1;min-width:180px;padding:8px 0 12px;"," color:",";"],k.d.RemSize15,j.a.grey900),M=C.f.div.withConfig({displayName:"UserChatItemstyled__Head",componentId:"sc-1m3tdpx-2"})(["display:flex;align-items:center;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"]),S=C.f.div.withConfig({displayName:"UserChatItemstyled__Name",componentId:"sc-1m3tdpx-3"})([""," font-weight:bold;"],k.d.RemSize13),N=C.f.div.withConfig({displayName:"UserChatItemstyled__Time",componentId:"sc-1m3tdpx-4"})([""," margin-left:4px;color:",";"],k.d.RemSize11,j.a.txt_black_dark),T=C.f.div.withConfig({displayName:"UserChatItemstyled__Body",componentId:"sc-1m3tdpx-5"})([""," max-height:","rem;margin-right:6px;overflow:hidden;",""],k.d.RemSize15,2*k.a.Lh15,_.o),B=C.f.span.withConfig({displayName:"UserChatItemstyled__DeletedMessageText",componentId:"sc-1m3tdpx-6"})(["color:",";"],j.a.grey500),F=C.f.div.withConfig({displayName:"UserChatItemstyled__Meta",componentId:"sc-1m3tdpx-7"})(["position:relative;display:flex;align-items:center;justify-content:center;"]),P=Object(C.f)(w.b).withConfig({displayName:"UserChatItemstyled__RightIcon",componentId:"sc-1m3tdpx-8"})(["padding-right:8px;padding-left:4px;"]),R=C.f.div.withConfig({displayName:"UserChatItemstyled__UserChatActionsWrapper",componentId:"sc-1m3tdpx-9"})(["position:absolute;top:50%;right:12px;color:",";background:",";border-radius:8px;box-shadow:",";opacity:",";transition:opacity 0.3s;transform:translateY(-50%);",""],j.a.black40,j.a.white,j.a.ev2,(function(e){return e.show?1:0}),O.a.isTouchableDevice()&&Object(C.e)(["display:none;"])),L={Wrapper:C.f.div.withConfig({displayName:"UserChatItemstyled__Wrapper",componentId:"sc-1m3tdpx-10"})(["max-height:76px;display:flex;cursor:pointer;transition:background-color 0.3s ease;margin:0 6px;border-radius:12px;",""],!O.a.isTouchableDevice()&&Object(C.e)(["&:hover{background-color:",";","{visibility:hidden;}","{opacity:1;}}"],(function(e){return e.theme.foundationTheme["bg-black-lightest"]}),P,R)),Gutter:I,Content:E,Head:M,Name:S,Time:N,Body:T,DeletedMessageText:B,Meta:F,RightIcon:P,UserChatActionsWrapper:R};t.a=function(e){var t=e.userChat,n=e.onClick,o=e.onLeave,a=Object(f.a)().translate,l=Object(d.useRef)(null),c=Object(d.useCallback)((function(){o(t.id)}),[o,t.id]),C=Object(b.a)({target:l.current,onLeave:c}),O=r()(C,4),_=O[0],j=O[1],k=O[3],I=Object(d.useCallback)((function(e){e.stopPropagation(),j()}),[j]),E=Object(d.useMemo)((function(){var e,n=t.getLastMessage();if(!n)return null;if(n.isDeletedMessage())return p.a.createElement(L.DeletedMessageText,null,a("ch.message_stream.message.deleted_message"));if(n.hasBlocks()){var o=n.blocks[0];if("code"===o.type)return o.value;if("text"===o.type)return Object(m.a)(o.value);if("bullets"===o.type)return Object(m.a)(i()(o,"blocks[0].value",""))}return n.hasImageFile()?a("ch.notification.upload_image.description"):n.hasFile()?a("ch.notification.upload_file.description"):n.hasButton()?s()(e=n.buttons).call(e,(function(e,t){var n;return u()(n="".concat(e?"".concat(e,", "):"","[")).call(n,t.title,"]")}),""):n.webPage?n.webPage.title:null}),[a,t]),M=Object(h.a)("userChatItem")(t),S=M.avatarUrl,N=M.name,T=t.getSession().getUnread();return p.a.createElement(L.Wrapper,{"data-ch-testid":"user-chat-item",onClick:function(){return n(t)}},p.a.createElement(L.Gutter,null,p.a.createElement(v.a,{size:36,url:S})),p.a.createElement(L.Content,null,p.a.createElement(L.Head,null,p.a.createElement(L.Name,null,N),p.a.createElement(L.Time,null,Object(g.p)(t.frontUpdatedAt))),p.a.createElement(L.Body,{"data-ch-testid":"user-chat-item-body"},E)),p.a.createElement(L.Meta,null,T?p.a.createElement(y.a,{"data-ch-testid":"user-chat-item-badge",hidden:!t.getSession().unread},t.getSession().getUnread()):null,p.a.createElement(L.RightIcon,{name:"chevron-right",size:w.a.Small}),p.a.createElement(L.UserChatActionsWrapper,{show:_},p.a.createElement(x.a,{name:"more",ref:l,width:36,height:32,size:w.a.Normal,onClick:I}),k)))}},1345:function(e,t,n){"use strict";var o=n(0),r=n.n(o),a=n(43),i=n(18),l=n(491),s=n(212),c=n(181),u=n(133),d=n(5),p={ReadAllUserChatWrapper:d.f.div.withConfig({displayName:"ReadAllUserChatstyled__ReadAllUserChatWrapper",componentId:"sc-1j7mxix-0"})(["position:relative;display:flex;cursor:",";&:hover{color:",";>::before{opacity:0.6;}}"],(function(e){return e.isFetching?"auto":"pointer"}),(function(e){return e.theme.foundationTheme["txt-black-darkest"]})),LoaderWrapper:d.f.div.withConfig({displayName:"ReadAllUserChatstyled__LoaderWrapper",componentId:"sc-1j7mxix-1"})(["position:relative;display:flex;margin-right:10px;"])};t.a=function(){var e=Object(a.c)(),t=Object(s.a)().translate,n=Object(a.d)(l.a.getIsFetchingReadAll),d=Object(o.useCallback)((function(){n||e(i.a.userChatActions.requestReadAllUserChat())}),[e,n]),f=Object(o.useMemo)((function(){return n?r.a.createElement(p.LoaderWrapper,null,r.a.createElement(u.b,{size:3,strokeWidth:2})):r.a.createElement(c.b,{name:"check-circle",height:16,width:20,size:c.a.XSmall,defaultOpacity:.4})}),[n]);return r.a.createElement(p.ReadAllUserChatWrapper,{onClick:d,isFetching:n},f,r.a.createElement("div",null,t("ch.lounge.card.chat_list.read_all_count")))}},1373:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},1426:function(e,t,n){var o=n(488),r=n(156),a=n(134),i=Math.max,l=Math.min;e.exports=function(e,t,n){var s=null==e?0:e.length;if(!s)return-1;var c=s-1;return void 0!==n&&(c=a(n),c=n<0?i(s+c,0):l(c,s-1)),o(e,r(t,3),c,!0)}},1427:function(e,t,n){var o=n(1428),r=n(1343),a=n(134),i=n(124);e.exports=function(e,t,n){e=i(e);var l=(t=a(t))?r(e):0;return t&&l<t?o(t-l,n)+e:e}},1428:function(e,t,n){var o=n(1429),r=n(307),a=n(385),i=n(381),l=n(1343),s=n(386),c=Math.ceil;e.exports=function(e,t){var n=(t=void 0===t?" ":r(t)).length;if(n<2)return n?o(t,e):t;var u=o(t,c(e/l(t)));return i(t)?a(s(u),0,e).join(""):u.slice(0,e)}},1429:function(e,t){var n=Math.floor;e.exports=function(e,t){var o="";if(!e||t<1||t>9007199254740991)return o;do{t%2&&(o+=e),(t=n(t/2))&&(e+=e)}while(t);return o}},1430:function(e,t,n){var o=n(696)("length");e.exports=o},1431:function(e,t){var n="[\\ud800-\\udfff]",o="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",r="\\ud83c[\\udffb-\\udfff]",a="[^\\ud800-\\udfff]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",l="[\\ud800-\\udbff][\\udc00-\\udfff]",s="(?:"+o+"|"+r+")"+"?",c="[\\ufe0e\\ufe0f]?",u=c+s+("(?:\\u200d(?:"+[a,i,l].join("|")+")"+c+s+")*"),d="(?:"+[a+o+"?",o,i,l,n].join("|")+")",p=RegExp(r+"(?="+r+")|"+d+u,"g");e.exports=function(e){for(var t=p.lastIndex=0;p.test(e);)++t;return t}},1432:function(e,t,n){var o=n(382),r=n(184),a=n(137),i=n(75),l=n(1343);e.exports=function(e){if(null==e)return 0;if(a(e))return i(e)?l(e):e.length;var t=r(e);return"[object Map]"==t||"[object Set]"==t?e.size:o(e).length}},1433:function(e,t,n){var o=n(1434),r=n(215),a=n(489),i=parseFloat,l=Math.min,s=Math.random;e.exports=function(e,t,n){if(n&&"boolean"!=typeof n&&r(e,t,n)&&(t=n=void 0),void 0===n&&("boolean"==typeof t?(n=t,t=void 0):"boolean"==typeof e&&(n=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=a(e),void 0===t?(t=e,e=0):t=a(t)),e>t){var c=e;e=t,t=c}if(n||e%1||t%1){var u=s();return l(e+u*(t-e+i("1e-"+((u+"").length-1))),t)}return o(e,t)}},1434:function(e,t){var n=Math.floor,o=Math.random;e.exports=function(e,t){return e+n(o()*(t-e+1))}},1435:function(e,t,n){var o=n(383),r=n(215),a=n(134);e.exports=function(e,t,n){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&r(e,t,n)?(t=0,n=i):(t=null==t?0:a(t),n=void 0===n?i:a(n)),o(e,t,n)):[]}},1436:function(e,t,n){"use strict";e.exports=n(1437)},1437:function(e,t,n){"use strict";n.r(t),n.d(t,"HotKeys",(function(){return O})),n.d(t,"withHotKeys",(function(){return _})),n.d(t,"FocusTrap",(function(){return x})),n.d(t,"HotKeyMapMixin",(function(){return j}));var o=n(111),r=n.n(o),a=n(0),i=n.n(a),l=n(634),s=n.n(l),c=n(93),u=n.n(c),d=n(123),p=n.n(d),f=n(56),h=n.n(f),m=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},g=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},y=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},v=function(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n},w=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},x=function(e){function t(){return m(this,t),w(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,a.Component),g(t,[{key:"render",value:function(){var e=this.props,t=e.component,n=e.children,o=v(e,["component","children"]);return i.a.createElement(t,b({tabIndex:"-1"},o),n)}}]),t}();function C(e,t){return!s()(e,t)}x.propTypes={onFocus:r.a.func,onBlur:r.a.func,component:r.a.oneOfType([r.a.func,r.a.string]),children:r.a.node},x.defaultProps={component:"div"};var O=function(e){function t(e,n){m(this,t);var o=w(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.onFocus=o.onFocus.bind(o),o.onBlur=o.onBlur.bind(o),o}return y(t,a.Component),g(t,[{key:"getChildContext",value:function(){return{hotKeyParent:this,hotKeyMap:this.__hotKeyMap__}}},{key:"componentWillMount",value:function(){this.updateMap()}},{key:"updateMap",value:function(){var e=this.buildMap();return!s()(e,this.__hotKeyMap__)&&(this.__hotKeyMap__=e,!0)}},{key:"buildMap",value:function(){var e=this.context.hotKeyMap||{},t=this.props.keyMap||{};return b({},e,t)}},{key:"getMap",value:function(){return this.__hotKeyMap__}},{key:"componentDidMount",value:function(){var e=n(1438);this.__mousetrap__=new e(this.props.attach||u.a.findDOMNode(this)),this.updateHotKeys(!0)}},{key:"componentDidUpdate",value:function(e){this.updateHotKeys(!1,e)}},{key:"componentWillUnmount",value:function(){this.context.hotKeyParent&&this.context.hotKeyParent.childHandledSequence(null),this.__mousetrap__&&this.__mousetrap__.reset()}},{key:"updateHotKeys",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.props.handlers,o=void 0===n?{}:n,r=t.handlers,a=void 0===r?o:r,i=this.updateMap();(e||i||C(o,a))&&(this.context.hotKeyParent&&this.context.hotKeyParent.childHandledSequence(null),this.syncHandlersToMousetrap())}},{key:"syncHandlersToMousetrap",value:function(){var e=this,t=this.props.handlers,n=void 0===t?{}:t,o=this.getMap(),r=[],a=this.__mousetrap__;Object.keys(n).forEach((function(t){var a=n[t];(function(e,t){var n=e[t];return n?Array.isArray(n)?n:[n]:[t]})(o,t).forEach((function(t){var n=void 0;h()(t)&&(n=t.action,t=t.sequence),r.push({callback:function(t,n){if((p()(e.props.focused)?e.props.focused:e.__isFocused__)&&n!==e.__lastChildSequence__)return e.context.hotKeyParent&&e.context.hotKeyParent.childHandledSequence(n),a(t,n)},action:n,sequence:t})}))})),a.reset(),r.forEach((function(e){var t=e.sequence,n=e.callback,o=e.action;return a.bind(t,n,o)}))}},{key:"childHandledSequence",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.__lastChildSequence__=e,this.context.hotKeyParent&&this.context.hotKeyParent.childHandledSequence(e)}},{key:"render",value:function(){var e=this.props,t=(e.keyMap,e.handlers,e.focused,e.attach,e.children),n=v(e,["keyMap","handlers","focused","attach","children"]);return i.a.createElement(x,b({},n,{onFocus:this.onFocus,onBlur:this.onBlur}),t)}},{key:"onFocus",value:function(){var e;this.__isFocused__=!0,this.props.onFocus&&(e=this.props).onFocus.apply(e,arguments)}},{key:"onBlur",value:function(){var e;this.__isFocused__=!1,this.props.onBlur&&(e=this.props).onBlur.apply(e,arguments),this.context.hotKeyParent&&this.context.hotKeyParent.childHandledSequence(null)}}]),t}();O.propTypes={keyMap:r.a.object,handlers:r.a.object,focused:r.a.bool,attach:r.a.any,children:r.a.node,onFocus:r.a.func,onBlur:r.a.func},O.childContextTypes={hotKeyParent:r.a.any,hotKeyMap:r.a.object},O.contextTypes={hotKeyParent:r.a.any,hotKeyMap:r.a.object};var _=function(e){return function(t){return function(n){function o(e){m(this,o);var t=w(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));return t._setRef=t._setRef.bind(t),t.state={handlers:{}},t}return y(o,a.PureComponent),g(o,[{key:"componentDidMount",value:function(){this.setState({handlers:this._ref.hotKeyHandlers})}},{key:"_setRef",value:function(e){this._ref=e}},{key:"render",value:function(){var n=this.state.handlers;return i.a.createElement(O,{component:"document-fragment",keyMap:e,handlers:n},i.a.createElement(t,b({ref:this._setRef},this.props)))}}]),o}()}};function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{contextTypes:{hotKeyMap:r.a.object},childContextTypes:{hotKeyMap:r.a.object},getChildContext:function(){return{hotKeyMap:this.__hotKeyMap__}},componentWillMount:function(){this.updateMap()},updateMap:function(){var e=this.buildMap();return!s()(e,this.__hotKeyMap__)&&(this.__hotKeyMap__=e,!0)},buildMap:function(){var t=this.context.hotKeyMap||{},n=this.props.keyMap||{};return b({},t,e,n)},getMap:function(){return this.__hotKeyMap__}}}},1438:function(e,t,n){var o;!function(r,a,i){if(r){for(var l,s={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},c={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},u={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},d={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},p=1;p<20;++p)s[111+p]="f"+p;for(p=0;p<=9;++p)s[p+96]=p.toString();v.prototype.bind=function(e,t,n){var o=this;return e=e instanceof Array?e:[e],o._bindMultiple.call(o,e,t,n),o},v.prototype.unbind=function(e,t){return this.bind.call(this,e,(function(){}),t)},v.prototype.trigger=function(e,t){var n=this;return n._directMap[e+":"+t]&&n._directMap[e+":"+t]({},e),n},v.prototype.reset=function(){var e=this;return e._callbacks={},e._directMap={},e},v.prototype.stopCallback=function(e,t){if((" "+t.className+" ").indexOf(" mousetrap ")>-1)return!1;if(y(t,this.target))return!1;if("composedPath"in e&&"function"==typeof e.composedPath){var n=e.composedPath()[0];n!==e.target&&(t=n)}return"INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable},v.prototype.handleKey=function(){var e=this;return e._handleKey.apply(e,arguments)},v.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(s[t]=e[t]);l=null},v.init=function(){var e=v(a);for(var t in e)"_"!==t.charAt(0)&&(v[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))},v.init(),r.Mousetrap=v,e.exports&&(e.exports=v),void 0===(o=function(){return v}.call(t,n,t,e))||(e.exports=o)}function f(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function h(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return s[e.which]?s[e.which]:c[e.which]?c[e.which]:String.fromCharCode(e.which).toLowerCase()}function m(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function g(e,t,n){return n||(n=function(){if(!l)for(var e in l={},s)e>95&&e<112||s.hasOwnProperty(e)&&(l[s[e]]=e);return l}()[e]?"keydown":"keypress"),"keypress"==n&&t.length&&(n="keydown"),n}function b(e,t){var n,o,r,a=[];for(n=function(e){return"+"===e?["+"]:(e=e.replace(/\+{2}/g,"+plus")).split("+")}(e),r=0;r<n.length;++r)o=n[r],d[o]&&(o=d[o]),t&&"keypress"!=t&&u[o]&&(o=u[o],a.push("shift")),m(o)&&a.push(o);return{key:o,modifiers:a,action:t=g(o,a,t)}}function y(e,t){return null!==e&&e!==a&&(e===t||y(e.parentNode,t))}function v(e){var t=this;if(e=e||a,!(t instanceof v))return new v(e);t.target=e,t._callbacks={},t._directMap={};var n,o={},r=!1,i=!1,l=!1;function s(e){e=e||{};var t,n=!1;for(t in o)e[t]?n=!0:o[t]=0;n||(l=!1)}function c(e,n,r,a,i,l){var s,c,u,d,p=[],f=r.type;if(!t._callbacks[e])return[];for("keyup"==f&&m(e)&&(n=[e]),s=0;s<t._callbacks[e].length;++s)if(c=t._callbacks[e][s],(a||!c.seq||o[c.seq]==c.level)&&f==c.action&&("keypress"==f&&!r.metaKey&&!r.ctrlKey||(u=n,d=c.modifiers,u.sort().join(",")===d.sort().join(",")))){var h=!a&&c.combo==i,g=a&&c.seq==a&&c.level==l;(h||g)&&t._callbacks[e].splice(s,1),p.push(c)}return p}function u(e,n,o,r){t.stopCallback(n,n.target||n.srcElement,o,r)||!1===e(n,o)&&(function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}(n),function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}(n))}function d(e){"number"!=typeof e.which&&(e.which=e.keyCode);var n=h(e);n&&("keyup"!=e.type||r!==n?t.handleKey(n,function(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}(e),e):r=!1)}function p(e,t,a,i){function c(t){return function(){l=t,++o[e],clearTimeout(n),n=setTimeout(s,1e3)}}function d(t){u(a,t,e),"keyup"!==i&&(r=h(t)),setTimeout(s,10)}o[e]=0;for(var p=0;p<t.length;++p){var f=p+1===t.length?d:c(i||b(t[p+1]).action);g(t[p],f,i,e,p)}}function g(e,n,o,r,a){t._directMap[e+":"+o]=n;var i,l=(e=e.replace(/\s+/g," ")).split(" ");l.length>1?p(e,l,n,o):(i=b(e,o),t._callbacks[i.key]=t._callbacks[i.key]||[],c(i.key,i.modifiers,{type:i.action},r,e,a),t._callbacks[i.key][r?"unshift":"push"]({callback:n,modifiers:i.modifiers,action:i.action,seq:r,level:a,combo:e}))}t._handleKey=function(e,t,n){var o,r=c(e,t,n),a={},d=0,p=!1;for(o=0;o<r.length;++o)r[o].seq&&(d=Math.max(d,r[o].level));for(o=0;o<r.length;++o)if(r[o].seq){if(r[o].level!=d)continue;p=!0,a[r[o].seq]=1,u(r[o].callback,n,r[o].combo,r[o].seq)}else p||u(r[o].callback,n,r[o].combo);var f="keypress"==n.type&&i;n.type!=l||m(e)||f||s(a),i=p&&"keydown"==n.type},t._bindMultiple=function(e,t,n){for(var o=0;o<e.length;++o)g(e[o],t,n)},f(e,"keypress",d),f(e,"keydown",d),f(e,"keyup",d)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},1439:function(e,t,n){"use strict";(function(e){var n=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,o){return e[0]===t&&(n=o,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),o=this.__entries__[n];return o&&o[1]},t.prototype.set=function(t,n){var o=e(this.__entries__,t);~o?this.__entries__[o][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,o=e(n,t);~o&&n.splice(o,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,o=this.__entries__;n<o.length;n++){var r=o[n];e.call(t,r[1],r[0])}},t}()}(),o="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,r=void 0!==e&&e.Math===Math?e:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),a="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(r):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var i=["top","right","bottom","left","width","height","size","weight"],l="undefined"!=typeof MutationObserver,s=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,o=!1,r=0;function i(){n&&(n=!1,e()),o&&s()}function l(){a(i)}function s(){var e=Date.now();if(n){if(e-r<2)return;o=!0}else n=!0,o=!1,setTimeout(l,t);r=e}return s}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){o&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),l?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){o&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;i.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),c=function(e,t){for(var n=0,o=Object.keys(t);n<o.length;n++){var r=o[n];Object.defineProperty(e,r,{value:t[r],enumerable:!1,writable:!1,configurable:!0})}return e},u=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||r},d=b(0,0,0,0);function p(e){return parseFloat(e)||0}function f(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+p(e["border-"+n+"-width"])}),0)}function h(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return d;var o=u(e).getComputedStyle(e),r=function(e){for(var t={},n=0,o=["top","right","bottom","left"];n<o.length;n++){var r=o[n],a=e["padding-"+r];t[r]=p(a)}return t}(o),a=r.left+r.right,i=r.top+r.bottom,l=p(o.width),s=p(o.height);if("border-box"===o.boxSizing&&(Math.round(l+a)!==t&&(l-=f(o,"left","right")+a),Math.round(s+i)!==n&&(s-=f(o,"top","bottom")+i)),!function(e){return e===u(e).document.documentElement}(e)){var c=Math.round(l+a)-t,h=Math.round(s+i)-n;1!==Math.abs(c)&&(l-=c),1!==Math.abs(h)&&(s-=h)}return b(r.left,r.top,l,s)}var m="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof u(e).SVGGraphicsElement}:function(e){return e instanceof u(e).SVGElement&&"function"==typeof e.getBBox};function g(e){return o?m(e)?function(e){var t=e.getBBox();return b(0,0,t.width,t.height)}(e):h(e):d}function b(e,t,n,o){return{x:e,y:t,width:n,height:o}}var y=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=b(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=g(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),v=function(e,t){var n,o,r,a,i,l,s,u=(o=(n=t).x,r=n.y,a=n.width,i=n.height,l="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,s=Object.create(l.prototype),c(s,{x:o,y:r,width:a,height:i,top:r,right:o+a,bottom:i+r,left:o}),s);c(this,{target:e,contentRect:u})},w=function(){function e(e,t,o){if(this.activeObservations_=[],this.observations_=new n,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=o}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof u(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new y(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof u(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new v(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),x="undefined"!=typeof WeakMap?new WeakMap:new n,C=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=s.getInstance(),o=new w(t,n,this);x.set(this,o)};["observe","unobserve","disconnect"].forEach((function(e){C.prototype[e]=function(){var t;return(t=x.get(this))[e].apply(t,arguments)}}));var O=void 0!==r.ResizeObserver?r.ResizeObserver:C;t.a=O}).call(this,n(183))},1440:function(e,t,n){var o=n(1441);function r(e,t,n,r,a,i,l){try{var s=e[i](l),c=s.value}catch(e){return void n(e)}s.done?t(c):o.resolve(c).then(r,a)}e.exports=function(e){return function(){var t=this,n=arguments;return new o((function(o,a){var i=e.apply(t,n);function l(e){r(i,o,a,l,s,"next",e)}function s(e){r(i,o,a,l,s,"throw",e)}l(void 0)}))}}},1441:function(e,t,n){e.exports=n(1442)},1442:function(e,t,n){var o=n(697);n(1443),n(1444),n(1445),n(1446),e.exports=o},1443:function(e,t,n){"use strict";var o=n(45),r=n(94),a=n(305),i=n(487),l=n(253),s=n(154),c=n(219),u=n(471),d=n(155),p=n(213),f=p.set,h=p.getterFor("AggregateError"),m=function(e,t){var n=this;if(!(n instanceof m))return new m(e,t);i&&(n=i(new Error(t),a(n)));var o=[];return u(e,o.push,o),r?f(n,{errors:o,type:"AggregateError"}):n.errors=o,void 0!==t&&d(n,"message",String(t)),n};m.prototype=l(Error.prototype,{constructor:c(5,m),message:c(5,""),name:c(5,"AggregateError")}),r&&s.f(m.prototype,"errors",{get:function(){return h(this).errors},configurable:!0}),o({global:!0},{AggregateError:m})},1444:function(e,t,n){n(698)},1445:function(e,t,n){"use strict";var o=n(45),r=n(380),a=n(483);o({target:"Promise",stat:!0},{try:function(e){var t=r.f(this),n=a(e);return(n.error?t.reject:t.resolve)(n.value),t.promise}})},1446:function(e,t,n){"use strict";var o=n(45),r=n(157),a=n(136),i=n(380),l=n(483),s=n(471),c="No one promise resolved";o({target:"Promise",stat:!0},{any:function(e){var t=this,n=i.f(t),o=n.resolve,u=n.reject,d=l((function(){var n=r(t.resolve),i=[],l=0,d=1,p=!1;s(e,(function(e){var r=l++,s=!1;i.push(void 0),d++,n.call(t,e).then((function(e){s||p||(p=!0,o(e))}),(function(e){s||p||(s=!0,i[r]=e,--d||u(new(a("AggregateError"))(i,c)))}))})),--d||u(new(a("AggregateError"))(i,c))}));return d.error&&u(d.value),n.promise}})},1447:function(e,t,n){var o=n(1448),r=n(389),a=n(706),i=r((function(e,t){return a(e)?o(e,t):[]}));e.exports=i},1448:function(e,t,n){var o=n(693),r=n(700),a=n(1449),i=n(214),l=n(255),s=n(695);e.exports=function(e,t,n,c){var u=-1,d=r,p=!0,f=e.length,h=[],m=t.length;if(!f)return h;n&&(t=i(t,l(n))),c?(d=a,p=!1):t.length>=200&&(d=s,p=!1,t=new o(t));e:for(;++u<f;){var g=e[u],b=null==n?g:n(g);if(g=c||0!==g?g:0,p&&b==b){for(var y=m;y--;)if(t[y]===b)continue e;h.push(g)}else d(t,b,c)||h.push(g)}return h}},1449:function(e,t){e.exports=function(e,t,n){for(var o=-1,r=null==e?0:e.length;++o<r;)if(n(t,e[o]))return!0;return!1}},1450:function(e,t,n){var o=n(1451),r=n(182);e.exports=function(e){return e&&e.length?o(e,r):0}},1451:function(e,t){e.exports=function(e,t){for(var n,o=-1,r=e.length;++o<r;){var a=t(e[o]);void 0!==a&&(n=void 0===n?a:n+a)}return n}},1452:function(e,t,n){e.exports=n(1453)},1453:function(e,t,n){var o=function(e){"use strict";var t,n=Object.prototype,o=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function s(e,t,n,o){var r=t&&t.prototype instanceof m?t:m,a=Object.create(r.prototype),i=new I(o||[]);return a._invoke=function(e,t,n){var o=u;return function(r,a){if(o===p)throw new Error("Generator is already running");if(o===f){if("throw"===r)throw a;return M()}for(n.method=r,n.arg=a;;){var i=n.delegate;if(i){var l=_(i,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===u)throw o=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var s=c(e,t,n);if("normal"===s.type){if(o=n.done?f:d,s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=f,n.method="throw",n.arg=s.arg)}}}(e,n,i),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var u="suspendedStart",d="suspendedYield",p="executing",f="completed",h={};function m(){}function g(){}function b(){}var y={};y[a]=function(){return this};var v=Object.getPrototypeOf,w=v&&v(v(E([])));w&&w!==n&&o.call(w,a)&&(y=w);var x=b.prototype=m.prototype=Object.create(y);function C(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function O(e,t){function n(r,a,i,l){var s=c(e[r],e,a);if("throw"!==s.type){var u=s.arg,d=u.value;return d&&"object"==typeof d&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(d).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(s.arg)}var r;this._invoke=function(e,o){function a(){return new t((function(t,r){n(e,o,t,r)}))}return r=r?r.then(a,a):a()}}function _(e,n){var o=e.iterator[n.method];if(o===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,_(e,n),"throw"===n.method))return h;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=c(o,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,h;var a=r.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,h):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function E(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function n(){for(;++r<e.length;)if(o.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}return{next:M}}function M(){return{value:t,done:!0}}return g.prototype=x.constructor=b,b.constructor=g,b[l]=g.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l in e||(e[l]="GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},C(O.prototype),O.prototype[i]=function(){return this},e.AsyncIterator=O,e.async=function(t,n,o,r,a){void 0===a&&(a=Promise);var i=new O(s(t,n,o,r),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(x),x[l]="Generator",x[a]=function(){return this},x.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var o=t.pop();if(o in e)return n.value=o,n.done=!1,n}return n.done=!0,n}},e.values=E,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(o,r){return l.type="throw",l.arg=e,n.next=o,r&&(n.method="next",n.arg=t),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),c=o.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var r=o.arg;k(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,o){return this.delegate={iterator:E(e),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=t),h}},e}(e.exports);try{regeneratorRuntime=o}catch(e){Function("r","regeneratorRuntime = r")(o)}},1454:function(e,t,n){var o=n(214),r=n(384),a=n(699),i=n(258),l=n(221),s=n(1455),c=n(387),u=n(692),d=c((function(e,t){var n={};if(null==e)return n;var c=!1;t=o(t,(function(t){return t=i(t,e),c||(c=t.length>1),t})),l(e,u(e),n),c&&(n=r(n,7,s));for(var d=t.length;d--;)a(n,t[d]);return n}));e.exports=d},1455:function(e,t,n){var o=n(340);e.exports=function(e){return o(e)?void 0:e}},1456:function(e,t,n){e.exports=n(1457)},1457:function(e,t,n){var o=n(1458);e.exports=o},1458:function(e,t,n){var o=n(1459),r=String.prototype;e.exports=function(e){var t=e.trim;return"string"==typeof e||e===r||e instanceof String&&t===r.trim?o:t}},1459:function(e,t,n){n(1460);var o=n(98);e.exports=o("String").trim},1460:function(e,t,n){"use strict";var o=n(45),r=n(1461).trim;o({target:"String",proto:!0,forced:n(1462)("trim")},{trim:function(){return r(this)}})},1461:function(e,t,n){var o=n(220),r="["+n(1373)+"]",a=RegExp("^"+r+r+"*"),i=RegExp(r+r+"*$"),l=function(e){return function(t){var n=String(o(t));return 1&e&&(n=n.replace(a,"")),2&e&&(n=n.replace(i,"")),n}};e.exports={start:l(1),end:l(2),trim:l(3)}},1462:function(e,t,n){var o=n(69),r=n(1373);e.exports=function(e){return o((function(){return!!r[e]()||"​᠎"!="​᠎"[e]()||r[e].name!==e}))}},1463:function(e,t){e.exports=function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=13)}([function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){var n=e.exports={version:"2.5.0"};"number"==typeof __e&&(__e=n)},function(e,t,n){e.exports=!n(4)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var o=n(32)("wks"),r=n(9),a=n(0).Symbol,i="function"==typeof a;(e.exports=function(e){return o[e]||(o[e]=i&&a[e]||(i?a:r)("Symbol."+e))}).store=o},function(e,t,n){var o=n(0),r=n(2),a=n(8),i=n(22),l=n(10),s=function(e,t,n){var c,u,d,p,f=e&s.F,h=e&s.G,m=e&s.S,g=e&s.P,b=e&s.B,y=h?o:m?o[t]||(o[t]={}):(o[t]||{}).prototype,v=h?r:r[t]||(r[t]={}),w=v.prototype||(v.prototype={});for(c in h&&(n=t),n)d=((u=!f&&y&&void 0!==y[c])?y:n)[c],p=b&&u?l(d,o):g&&"function"==typeof d?l(Function.call,d):d,y&&i(y,c,d,e&s.U),v[c]!=d&&a(v,c,p),g&&w[c]!=d&&(w[c]=d)};o.core=r,s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t,n){var o=n(16),r=n(21);e.exports=n(3)?function(e,t,n){return o.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t){var n=0,o=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+o).toString(36))}},function(e,t,n){var o=n(24);e.exports=function(e,t,n){if(o(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,o){return e.call(t,n,o)};case 3:return function(n,o,r){return e.call(t,n,o,r)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var o=n(28),r=Math.min;e.exports=function(e){return e>0?r(o(e),9007199254740991):0}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),o=e.name||"",r=e.type||"",a=r.replace(/\/.*$/,"");return n.some((function(e){var t=e.trim();return"."===t.charAt(0)?o.toLowerCase().endsWith(t.toLowerCase()):t.endsWith("/*")?a===t.replace(/\/.*$/,""):r===t}))}return!0},n(14),n(34)},function(e,t,n){n(15),e.exports=n(2).Array.some},function(e,t,n){"use strict";var o=n(7),r=n(25)(3);o(o.P+o.F*!n(33)([].some,!0),"Array",{some:function(e){return r(this,e,arguments[1])}})},function(e,t,n){var o=n(17),r=n(18),a=n(20),i=Object.defineProperty;t.f=n(3)?Object.defineProperty:function(e,t,n){if(o(e),t=a(t,!0),o(n),r)try{return i(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var o=n(1);e.exports=function(e){if(!o(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports=!n(3)&&!n(4)((function(){return 7!=Object.defineProperty(n(19)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var o=n(1),r=n(0).document,a=o(r)&&o(r.createElement);e.exports=function(e){return a?r.createElement(e):{}}},function(e,t,n){var o=n(1);e.exports=function(e,t){if(!o(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!o(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!o(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!o(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var o=n(0),r=n(8),a=n(23),i=n(9)("src"),l=Function.toString,s=(""+l).split("toString");n(2).inspectSource=function(e){return l.call(e)},(e.exports=function(e,t,n,l){var c="function"==typeof n;c&&(a(n,"name")||r(n,"name",t)),e[t]!==n&&(c&&(a(n,i)||r(n,i,e[t]?""+e[t]:s.join(String(t)))),e===o?e[t]=n:l?e[t]?e[t]=n:r(e,t,n):(delete e[t],r(e,t,n)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[i]||l.call(this)}))},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var o=n(10),r=n(26),a=n(27),i=n(12),l=n(29);e.exports=function(e,t){var n=1==e,s=2==e,c=3==e,u=4==e,d=6==e,p=5==e||d,f=t||l;return function(t,l,h){for(var m,g,b=a(t),y=r(b),v=o(l,h,3),w=i(y.length),x=0,C=n?f(t,w):s?f(t,0):void 0;w>x;x++)if((p||x in y)&&(g=v(m=y[x],x,b),e))if(n)C[x]=g;else if(g)switch(e){case 3:return!0;case 5:return m;case 6:return x;case 2:C.push(m)}else if(u)return!1;return d?-1:c||u?u:C}}},function(e,t,n){var o=n(5);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==o(e)?e.split(""):Object(e)}},function(e,t,n){var o=n(11);e.exports=function(e){return Object(o(e))}},function(e,t){var n=Math.ceil,o=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?o:n)(e)}},function(e,t,n){var o=n(30);e.exports=function(e,t){return new(o(e))(t)}},function(e,t,n){var o=n(1),r=n(31),a=n(6)("species");e.exports=function(e){var t;return r(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!r(t.prototype)||(t=void 0),o(t)&&null===(t=t[a])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){var o=n(5);e.exports=Array.isArray||function(e){return"Array"==o(e)}},function(e,t,n){var o=n(0),r=o["__core-js_shared__"]||(o["__core-js_shared__"]={});e.exports=function(e){return r[e]||(r[e]={})}},function(e,t,n){"use strict";var o=n(4);e.exports=function(e,t){return!!e&&o((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},function(e,t,n){n(35),e.exports=n(2).String.endsWith},function(e,t,n){"use strict";var o=n(7),r=n(12),a=n(36),i="".endsWith;o(o.P+o.F*n(38)("endsWith"),"String",{endsWith:function(e){var t=a(this,e,"endsWith"),n=arguments.length>1?arguments[1]:void 0,o=r(t.length),l=void 0===n?o:Math.min(r(n),o),s=String(e);return i?i.call(t,s,l):t.slice(l-s.length,l)===s}})},function(e,t,n){var o=n(37),r=n(11);e.exports=function(e,t,n){if(o(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(r(e))}},function(e,t,n){var o=n(1),r=n(5),a=n(6)("match");e.exports=function(e){var t;return o(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==r(e))}},function(e,t,n){var o=n(6)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[o]=!1,!"/./"[e](t)}catch(e){}}return!0}}])},1464:function(e,t,n){"use strict";n.r(t);var o=n(67),r=n.n(o),a=n(627),i=n.n(a),l=n(0),s=n.n(l),c=n(88),u=n(43),d=n(21),p=n(41),f=n.n(p),h=n(304),m=n.n(h),g=n(12),b=n.n(g),y=n(208),v=n.n(y),w=n(5),x=n(18),C=n(301),O=n(302),_=n(27),j=n(42),k=n(102),I=n(175),E=n(117),M=n(36),S=n(203),N=n.n(S),T=n(25),B=n.n(T),F=n(252),P=n.n(F),R=n(20),L=n.n(R),D=n(37),z=n(108),A=n(1294),W=n(300),U=n(212),H=n(478),G=n(19),q=function(e){var t=Object(c.f)(e,{path:"/user-chats/:userChatId",exact:!1});return b()(t,"params.userChatId","")},K=n(1328),V=n(201),Y=n(181),X=n(92),$=n(469),Z=n(46),J=n(84),Q=Object(w.f)(Y.b).withConfig({displayName:"CompactHeaderstyled__SVGIcon",componentId:"sc-1rdzle3-0"})(["transform:rotate(90deg);"]),ee=w.f.div.withConfig({displayName:"CompactHeaderstyled__Badge",componentId:"sc-1rdzle3-1"})(["display:flex;align-items:center;width:21px;height:20px;font-weight:500;color:",";",""],(function(e){return e.theme.iconColor}),J.d.RemSize13),te=w.f.div.withConfig({displayName:"CompactHeaderstyled__Description",componentId:"sc-1rdzle3-2"})(["",";margin-left:2px;overflow:hidden;font-weight:500;color:",";text-overflow:ellipsis;white-space:nowrap;"],J.d.RemSize13,(function(e){return e.theme.foundationTheme["txt-black-dark"]})),ne=w.f.div.withConfig({displayName:"CompactHeaderstyled__Button",componentId:"sc-1rdzle3-3"})(["display:flex;align-items:center;justify-content:center;width:36px;height:36px;cursor:pointer;"]),oe=w.f.div.withConfig({displayName:"CompactHeaderstyled__Wrapper",componentId:"sc-1rdzle3-4"})(["display:flex;align-items:center;width:100%;height:100%;padding:1px 14px 0 ","px;color:",";background:rgba(252,252,252,0.95);@supports (backdrop-filter:blur()) or (-webkit-backdrop-filter:blur()){background:rgba(252,252,252,0.8);backdrop-filter:blur(60px);}"],(function(e){return e.hideBackButton?22:12}),(function(e){return e.theme.foundationTheme["txt-black-darkest"]})),re=w.f.div.withConfig({displayName:"CompactHeaderstyled__BottomBorder",componentId:"sc-1rdzle3-5"})(["width:100%;height:1px;background-color:",";"],(function(e){return e.theme.foundationTheme["bg-gnb"]})),ae=w.f.div.withConfig({displayName:"CompactHeaderstyled__BackButtonWrapper",componentId:"sc-1rdzle3-6"})(["display:",";flex-shrink:0;align-items:center;width:42px;height:40px;cursor:pointer;"],(function(e){return e.hidden?"none":"flex"})),ie=Object(w.f)(X.a).withConfig({displayName:"CompactHeaderstyled__BackButton",componentId:"sc-1rdzle3-7"})(["pointer-events:none;"]),le=w.f.div.withConfig({displayName:"CompactHeaderstyled__ContentWrapper",componentId:"sc-1rdzle3-8"})(["display:flex;flex-shrink:1;align-items:center;overflow:hidden;"]),se=w.f.div.withConfig({displayName:"CompactHeaderstyled__Content",componentId:"sc-1rdzle3-9"})(["display:flex;flex-direction:column;margin-left:6px;overflow:hidden;"]),ce=w.f.div.withConfig({displayName:"CompactHeaderstyled__Name",componentId:"sc-1rdzle3-10"})(["flex:0 1 auto;height:24px;overflow:hidden;color:",";text-overflow:ellipsis;white-space:nowrap;"],Z.a.txt_black_darkest),ue=w.f.div.withConfig({displayName:"CompactHeaderstyled__Status",componentId:"sc-1rdzle3-11"})(["display:flex;align-items:center;overflow:hidden;"]),de=w.f.div.withConfig({displayName:"CompactHeaderstyled__RightButtonWrapper",componentId:"sc-1rdzle3-12"})(["display:flex;flex-shrink:0;align-items:center;padding-left:12px;margin-left:auto;& > "," + ","{margin-left:4px;}"],ne,ne),pe={SVGIcon:Q,Badge:ee,Avatar:Object(w.f)($.a).withConfig({displayName:"CompactHeaderstyled__Avatar",componentId:"sc-1rdzle3-13"})(["flex-shrink:0;margin-left:6px;"]),Name:ce,Description:te,BackButtonWrapper:ae,BackButton:ie,RightButtonWrapper:de,Button:ne,Wrapper:oe,BottomBorder:re,ContentWrapper:le,Content:se,Status:ue};var fe=function(e){var t,n=e.onClickBackButton,o=e.isUserChatList,r=void 0!==o&&o,a=Object(W.a)(),i=Object(c.h)(),p=Object(U.a)().translate,h=null!==(t=Object(H.a)(a))&&void 0!==t?t:p("ch.chat.expect_response_delay.out_of_working"),m=Object(u.c)(),g=Object(c.g)(),b=Object(l.useRef)(null),y=Object(u.d)((function(e){return d.a.userChatsSelectors.getUserChat(e,q(i.pathname))}))||new k.a,v=Object(u.d)((function(e){return d.a.userChatsSelectors.getUnreadWithOutCurChat(e,q(i.pathname))})),w=Object(l.useState)("0"),C=f()(w,2),O=C[0],_=C[1],j=Object(l.useMemo)((function(){return z.a.getHistory().length<2||!r&&(!!Object(G.j)()||!(!Object(G.m)()||!D.a.isPhone()))}),[r]),I=Object(A.a)("compactHeader")(y),E=I.avatarUrl,M=I.name,S=!L()(y.id),T=Object(l.useMemo)((function(){return s.a.createElement(pe.ContentWrapper,null,S&&s.a.createElement(pe.Avatar,{size:30,url:E}),s.a.createElement(pe.Content,null,s.a.createElement(pe.Name,null,M),S&&s.a.createElement(pe.Status,null,s.a.createElement(Y.b,{name:a.getStatusIconName(),defaultOpacity:1,size:14}),s.a.createElement(pe.Description,null,h))))}),[E,M,S,a,h]),F=Object(l.useCallback)((function(){y.isEmpty()||m(x.a.userChatActions.requestLeaveUserChat({userChatId:y.id})).promise.then((function(){m(x.a.uiActions.closeUserChat())})).then((function(){Object(G.j)()&&g.replace("/leave")}))}),[m,y,g]),R=Object(K.a)({target:b.current,onLeave:F}),$=f()(R,4),Z=$[1],J=$[2],Q=$[3],ee=Object(l.useCallback)((function(){J(),n()}),[J,n]),te=Object(l.useCallback)((function(){g.push("/setting")}),[g]),ne=Object(l.useCallback)((function(){Object(G.e)()?m(x.a.uiActions.setShowMessenger({showMessenger:!1})):window.location.href=a.homepageUrl}),[a.homepageUrl,m]),oe=Object(l.useCallback)((function(e){e.stopPropagation(),Z()}),[Z]),re=Object(l.useCallback)(P()((function(e){_(e)}),1e3,{trailing:!0}),[]),ae=!B()(Object(c.f)(i.pathname,{path:"/user-chats",exact:!0})),ie=Object(l.useMemo)((function(){return s.a.createElement(pe.BackButtonWrapper,{"data-ch-testid":"back-button",hidden:j,onClick:ee},s.a.createElement(pe.BackButton,{name:"chevron-left",size:Y.a.Small,defaultOpacity:1,withTheme:!0}),!ae&&"0"!==O&&!N()(O)&&s.a.createElement(pe.Badge,null,O))}),[ee,ae,O,j]),le=Object(l.useMemo)((function(){return s.a.createElement(pe.Button,{ref:b,onClick:oe},s.a.createElement(X.a,{name:"more-vertical",size:Y.a.Small,defaultOpacity:1,withTheme:!0}))}),[oe]),se=Object(l.useMemo)((function(){return s.a.createElement(pe.Button,{onClick:te},s.a.createElement(X.a,{name:"settings",size:Y.a.Small,defaultOpacity:1,withTheme:!0}))}),[te]),ce=Object(l.useMemo)((function(){return s.a.createElement(pe.Button,{onClick:ne},s.a.createElement(X.a,{name:"cancel",size:Y.a.Small,defaultOpacity:1,withTheme:!0}))}),[ne]);return Object(l.useEffect)((function(){re(v)}),[re,v]),s.a.createElement(V.a.CompactHeaderLayout,null,s.a.createElement(pe.Wrapper,{hideBackButton:j},ie,T,s.a.createElement(pe.RightButtonWrapper,null,!y.isEmpty()&&le,Q,Object(G.e)()?ce:se)),s.a.createElement(pe.BottomBorder,null))},he=n(238),me=n(9),ge=n.n(me),be=n(10),ye=n.n(be),ve=n(7),we=n.n(ve),xe=n(13),Ce=n.n(xe),Oe=n(8),_e=n.n(Oe),je=n(14),ke=n.n(je),Ie=n(16),Ee=n.n(Ie),Me=n(3),Se=n.n(Me),Ne=n(23),Te=n.n(Ne),Be=n(24),Fe=n.n(Be),Pe=n(17),Re=n.n(Pe),Le=n(1),De=n.n(Le),ze=n(38),Ae=n.n(ze),We=n(703),Ue=n.n(We),He=n(1426),Ge=n.n(He),qe=n(6),Ke=n.n(qe),Ve=n(4),Ye=n.n(Ve),Xe=n(93),$e=n.n(Xe),Ze=n(39),Je=n.n(Ze),Qe=n(1324),et=n(1309),tt=n(144),nt=n(479),ot=n(145),rt=n.n(ot),at=n(352);function it(e){var t=s.a.forwardRef((function(t,n){var o=Object(U.a)(),a=o.locale,i=o.translate,l=o.translateWithInnerHtml;return s.a.createElement(e,r()({},t,{ref:n,locale:a,translate:i,translateWithInnerHtml:l}))}));return t.displayName="withTranslator(".concat(Object(at.b)(e),")"),t.WrappedComponent=e,rt()(t,e)}var lt,st,ct={Wrapper:w.f.div.withConfig({displayName:"ImageViewerstyled__Wrapper",componentId:"awvnb8-0"})(["position:absolute;top:0;right:0;bottom:0;left:0;overflow:hidden;"]),Outer:w.f.div.withConfig({displayName:"ImageViewerstyled__Outer",componentId:"awvnb8-1"})(["width:100%;height:100%;text-align:center;transition:transform 0.35s ease;&::before{content:'';display:inline-block;height:50%;width:1px;margin-right:-1px;}&.dragging{transition:transform 0s ease;}"]),Image:w.f.img.withConfig({displayName:"ImageViewerstyled__Image",componentId:"awvnb8-2"})(["display:inline-block;width:auto;height:auto;max-width:calc(100% - 134px);max-height:calc(100% - 50px);transition:transform 0.4s ease;transform:scale3d(1,1,1);cursor:grab;vertical-align:middle;"])};function ut(e,t){var n=ye()(e);if(we.a){var o=we()(e);t&&(o=Ce()(o).call(o,(function(t){return Ye()(e,t).enumerable}))),n.push.apply(n,o)}return n}function dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(n),!0).forEach((function(t){De()(e,t,n[t])})):_e.a?Object.defineProperties(e,_e()(n)):ut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Ye()(n,t))}))}return e}function pt(e){var t=function(){if("undefined"==typeof Reflect||!ge.a)return!1;if(ge.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(ge()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Re()(e);if(t){var r=Re()(this).constructor;n=ge()(o,arguments,r)}else n=o.apply(this,arguments);return Fe()(this,n)}}var ft={x:0,y:0},ht=(lt=Object(nt.a)(["zoomLevel"]),st=function(e){Te()(n,e);var t=pt(n);function n(){var e,o;ke()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return o=t.call.apply(t,Ke()(e=[this]).call(e,a)),De()(Se()(o),"state",{offset:ft,width:0,height:0,privateImgURL:""}),De()(Se()(o),"offsetRange",ft),De()(Se()(o),"clientOffset",ft),De()(Se()(o),"draggable",!1),De()(Se()(o),"imageRef",Object(l.createRef)()),De()(Se()(o),"imageOuterRef",Object(l.createRef)()),o}return Ee()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.file,n=this.state.privateImgURL;t.isPrivateFile()&&!n&&et.a.getMedia(t.getUrl()).then((function(t){return e.setState({privateImgURL:t})}))}},{key:"componentDidUpdate",value:function(e){var t=this.props.zoomLevel;e.zoomLevel!==t&&this.setOffsetRange(this.props)}},{key:"setOffsetRange",value:function(e){var t=e.zoomLevel;if(this.imageRef.current&&this.imageOuterRef.current){var n=this.imageRef.current.scrollWidth*(1+t/2)-this.imageOuterRef.current.clientWidth,o=this.imageRef.current.scrollHeight*(1+t/2)-this.imageOuterRef.current.clientHeight;this.offsetRange={x:Math.max(0,n/2),y:Math.max(0,o/2)}}}},{key:"getImageStyle",value:function(){var e=this.state,t=e.width,n=e.height;return t&&n?{width:"".concat(t,"px"),height:"".concat(n,"px")}:null}},{key:"handleMouseDown",value:function(e){(this.offsetRange.x||this.offsetRange.y)&&(this.clientOffset={x:e.clientX,y:e.clientY},this.draggable=!0)}},{key:"handleMouseMove",value:function(e){if(e.clientX&&e.clientY&&this.draggable){var t=e.clientX-this.clientOffset.x,n=e.clientY-this.clientOffset.y;this.clientOffset={x:e.clientX,y:e.clientY},this.setState((function(e){return{offset:{x:e.offset.x+t,y:e.offset.y+n}}}))}}},{key:"handleMouseUp",value:function(){var e=this;this.draggable&&(this.draggable=!1,this.setState((function(t){return{offset:{x:Math.abs(t.offset.x)>=e.offsetRange.x?t.offset.x<0?Math.min(0,-e.offsetRange.x):Math.max(0,e.offsetRange.x):t.offset.x,y:Math.abs(t.offset.y)>=e.offsetRange.y?t.offset.y<0?Math.min(0,-e.offsetRange.y):Math.max(0,e.offsetRange.y):t.offset.y}}})))}},{key:"handleLoad",value:function(e){e.persist(),this.setState((function(t){return dt(dt({},t),{},{width:e.target.width,height:e.target.height})}))}},{key:"render",value:function(){var e,t,n=this.props,o=n.file,r=n.zoomLevel,a=n.onOuterClick,i=n.onImageClick,l=this.state,c=l.offset,u=l.privateImgURL,d={transform:Ke()(e="translate3d(".concat(c.x,"px, ")).call(e,c.y,"px, 0px)")},p={transform:Ke()(t="scale3d(".concat(1+.5*r,", ")).call(t,1+.5*r,", 1)")};return s.a.createElement(ct.Wrapper,{onClick:a},s.a.createElement(ct.Outer,{style:d,ref:this.imageOuterRef,className:this.draggable?"dragging":""},s.a.createElement(ct.Image,{onClick:i,onLoad:this.handleLoad,style:p,ref:this.imageRef,draggable:!1,src:o.isPrivateFile()?u:o.getUrl(),onMouseDown:this.handleMouseDown,onMouseMove:this.handleMouseMove,onMouseUp:this.handleMouseUp,onMouseLeave:this.handleMouseUp})))}}],[{key:"getDerivedStateFromProps",value:function(e,t,n){return n.zoomLevel>e.zoomLevel?{offset:ft}:null}}]),n}(s.a.PureComponent),Ae()(st,"getDerivedStateFromProps",[lt],Ye()(st,"getDerivedStateFromProps"),st),Ae()(st.prototype,"handleMouseDown",[Je.a],Ye()(st.prototype,"handleMouseDown"),st.prototype),Ae()(st.prototype,"handleMouseMove",[Je.a],Ye()(st.prototype,"handleMouseMove"),st.prototype),Ae()(st.prototype,"handleMouseUp",[Je.a],Ye()(st.prototype,"handleMouseUp"),st.prototype),Ae()(st.prototype,"handleLoad",[Je.a],Ye()(st.prototype,"handleLoad"),st.prototype),st),mt=n(153),gt=n(1298),bt=Object(w.f)($.a).withConfig({displayName:"ImageGallerystyled__Avatar",componentId:"sc-1sm6zti-0"})(["flex-shrink:0;"]),yt=Object(w.g)(["from{opacity:0.01;transform:translate(0,-122px);}to{opacity:1;transform:translate(0,-0);}"]),vt=w.f.div.withConfig({displayName:"ImageGallerystyled__Dim",componentId:"sc-1sm6zti-1"})(["z-index:1000000001;position:fixed;top:0;left:0;right:0;bottom:0;background-color:",";"],Z.a.black70),wt=w.f.div.withConfig({displayName:"ImageGallerystyled__Wrapper",componentId:"sc-1sm6zti-2"})(["position:relative;width:100%;min-width:300px;height:100%;display:flex;flex-direction:column;animation:"," 0.25s ease-out;"],yt),xt=w.f.div.withConfig({displayName:"ImageGallerystyled__Header",componentId:"sc-1sm6zti-3"})(["z-index:100;height:60px;display:flex;align-items:center;padding:0 25px;background-color:",";border:1px solid ",";box-shadow:0 4px 12px 0 ",";"],Z.a.grey900,Z.a.black10,Z.a.black20),Ct=w.f.div.withConfig({displayName:"ImageGallerystyled__ImageInfo",componentId:"sc-1sm6zti-4"})(["margin-left:10px;flex-grow:1;flex-shrink:1;flex-basis:0;min-width:50px;"," overflow:hidden;"],J.d.RemSize12),Ot=w.f.div.withConfig({displayName:"ImageGallerystyled__Profile",componentId:"sc-1sm6zti-5"})(["display:flex;align-items:center;overflow:hidden;"]),_t=w.f.div.withConfig({displayName:"ImageGallerystyled__PersonName",componentId:"sc-1sm6zti-6"})(["flex-grow:0;flex-shrink:1;flex-basis:auto;color:",";overflow:hidden;text-overflow:ellipsis;white-space:nowrap;min-width:20px;"],Z.a.white50),jt=w.f.div.withConfig({displayName:"ImageGallerystyled__Date",componentId:"sc-1sm6zti-7"})(["margin-left:8px;"," color:",";overflow:hidden;white-space:nowrap;text-overflow:ellipsis;"],J.d.RemSize11,Z.a.white30),kt=w.f.div.withConfig({displayName:"ImageGallerystyled__FileName",componentId:"sc-1sm6zti-8"})(["color:",";text-overflow:ellipsis;overflow:hidden;white-space:nowrap;"],Z.a.white),It=Object(w.f)(gt.a).withConfig({displayName:"ImageGallerystyled__HeaderIcon",componentId:"sc-1sm6zti-9"})(["margin:0 10px;",";"],(function(e){return e.disabled&&Object(w.e)(["pointer-events:none;&::before{opacity:0.3;}"])})),Et=w.f.div.withConfig({displayName:"ImageGallerystyled__Divider",componentId:"sc-1sm6zti-10"})(["width:1px;height:34px;background-color:#2f343a;margin:0 4px;"]),Mt={Avatar:bt,Dim:vt,Wrapper:wt,Header:xt,ImageInfo:Ct,Profile:Ot,PersonName:_t,Date:jt,FileName:kt,HeaderIcon:It,Body:w.f.div.withConfig({displayName:"ImageGallerystyled__Body",componentId:"sc-1sm6zti-11"})(["position:relative;flex-grow:1;flex-shrink:1;flex-basis:auto;display:flex;"]),GutterIcon:Object(w.f)(gt.a).withConfig({displayName:"ImageGallerystyled__GutterIcon",componentId:"sc-1sm6zti-12"})(["z-index:100;position:absolute;height:48px;top:calc(50% - 24px);bottom:0;width:67px;",";",";"],(function(e){return e.left&&Object(w.e)(["left:0;margin-left:15px;"])}),(function(e){return e.right&&Object(w.e)(["right:0;margin-right:15px;"])})),Content:w.f.div.withConfig({displayName:"ImageGallerystyled__Content",componentId:"sc-1sm6zti-13"})(["flex-grow:1;flex-shrink:1;flex-basis:auto;position:relative;text-align:center;"]),Divider:Et};var St,Nt,Tt=function(e){var t=e.message,n=e.file,o=Object(A.a)("message")(t),r=o.avatarUrl,a=o.name;return s.a.createElement(s.a.Fragment,null,s.a.createElement(Mt.Avatar,{url:r,size:32}),s.a.createElement(Mt.ImageInfo,null,s.a.createElement(Mt.Profile,null,s.a.createElement(Mt.PersonName,null,a),s.a.createElement(Mt.Date,null,mt.l(t.createdAt))),s.a.createElement(Mt.FileName,null,n.name)))};function Bt(e,t){var n=ye()(e);if(we.a){var o=we()(e);t&&(o=Ce()(o).call(o,(function(t){return Ye()(e,t).enumerable}))),n.push.apply(n,o)}return n}function Ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bt(Object(n),!0).forEach((function(t){De()(e,t,n[t])})):_e.a?Object.defineProperties(e,_e()(n)):Bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Ye()(n,t))}))}return e}function Pt(e){var t=function(){if("undefined"==typeof Reflect||!ge.a)return!1;if(ge.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(ge()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Re()(e);if(t){var r=Re()(this).constructor;n=ge()(o,arguments,r)}else n=o.apply(this,arguments);return Fe()(this,n)}}var Rt=it((St=Object(nt.a)(["show"]),Nt=function(e){Te()(n,e);var t=Pt(n);function n(){var e,o;ke()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return o=t.call.apply(t,Ke()(e=[this]).call(e,a)),De()(Se()(o),"state",{messageIndex:0,fileIndex:0,zoomLevel:0}),o}return Ee()(n,[{key:"isLastImage",value:function(){var e=this.props.messages,t=this.state,n=t.messageIndex,o=t.fileIndex;return n===e.size-1&&o===Ge()(e.last().files,(function(e){return e.type===tt.b.Image}))}},{key:"isFirstImage",value:function(){var e=this.props.messages,t=this.state,n=t.messageIndex,o=t.fileIndex;return 0===n&&o===Ue()(e.first().files,(function(e){return e.type===tt.b.Image}))}},{key:"handleClickPrev",value:function(){var e=this.props.messages;this.setState((function(t){var n=0===t.fileIndex?-1:Ge()(e.get(t.messageIndex).files,(function(e){return e.type===tt.b.Image}),t.fileIndex-1);return-1===n?{messageIndex:t.messageIndex-1,fileIndex:Ge()(e.get(t.messageIndex-1).files,(function(e){return e.type===tt.b.Image})),zoomLevel:0}:{messageIndex:t.messageIndex,fileIndex:n,zoomLevel:0}}))}},{key:"handleClickNext",value:function(){var e=this.props.messages;this.setState((function(t){var n=e.get(t.messageIndex),o=Ue()(n.files,(function(e){return e.type===tt.b.Image}),t.fileIndex+1);return-1===o?{messageIndex:t.messageIndex+1,fileIndex:Ue()(e.get(t.messageIndex+1).files,(function(e){return e.type===tt.b.Image})),zoomLevel:0}:{messageIndex:t.messageIndex,fileIndex:o,zoomLevel:0}}))}},{key:"handleZoomIn",value:function(){this.setState((function(e){return Ft(Ft({},e),{},{zoomLevel:e.zoomLevel+1})}))}},{key:"handleZoomOut",value:function(){this.setState((function(e){return Ft(Ft({},e),{},{zoomLevel:e.zoomLevel-1})}))}},{key:"handleImageClick",value:function(e){e.stopPropagation()}},{key:"handleImageViewOuterClick",value:function(e){var t=this.props.onHide;e.stopPropagation(),t()}},{key:"handleDownloadImage",value:function(e,t){e.stopPropagation(),et.a.downloadMedia(t)}},{key:"renderDownloadLink",value:function(e){var t=this;return e.isPrivateFile()?s.a.createElement("div",{onClick:function(n){return t.handleDownloadImage(n,e)}},s.a.createElement(Mt.HeaderIcon,{name:"download-white-hover",width:24,height:24,size:24})):s.a.createElement("a",{download:!0,href:e.getUrl(),target:"_blank",rel:"noopener noreferrer"},s.a.createElement(Mt.HeaderIcon,{name:"download-white-hover",width:24,height:24,size:24}))}},{key:"renderHeader",value:function(){var e=this.props,t=e.messages,n=e.onHide,o=this.state,r=o.messageIndex,a=o.fileIndex,i=o.zoomLevel,l=t.get(r),c=l.files[a];return s.a.createElement(Mt.Header,null,s.a.createElement(Tt,{message:l,file:c}),s.a.createElement(Mt.HeaderIcon,{disabled:i<=0,name:"img-zoom-out-hover",width:24,height:24,size:24,onClick:this.handleZoomOut}),s.a.createElement(Mt.HeaderIcon,{disabled:i>=6,name:"img-zoom-in-hover",width:24,height:24,size:24,onClick:this.handleZoomIn}),this.renderDownloadLink(c),s.a.createElement(Mt.Divider,null),s.a.createElement(Mt.HeaderIcon,{name:"exit-white-hover",width:24,height:24,size:24,onClick:n}))}},{key:"renderBody",value:function(){var e=this.props.messages,t=this.state,n=t.messageIndex,o=t.fileIndex,r=t.zoomLevel,a=e.get(n).files[o];return s.a.createElement(Mt.Body,null,s.a.createElement(Mt.GutterIcon,{left:!0,width:48,height:48,size:48,name:"img-preview-left-hover",hidden:this.isFirstImage(),onClick:this.handleClickPrev}),s.a.createElement(Mt.Content,null,s.a.createElement(ht,{key:a.id,onImageClick:this.handleImageClick,onOuterClick:this.handleImageViewOuterClick,zoomLevel:r,file:a})),s.a.createElement(Mt.GutterIcon,{right:!0,width:48,height:48,size:48,name:"img-preview-right-hover",hidden:this.isLastImage(),onClick:this.handleClickNext}))}},{key:"render",value:function(){var e=this.props,t=e.show,n=e.targetElement;return t?$e.a.createPortal(s.a.createElement("div",null,s.a.createElement(Mt.Dim,{onWheel:Qe.a.stopPropagation},s.a.createElement(Mt.Wrapper,null,this.renderHeader(),this.renderBody()))),n):null}}],[{key:"getDerivedStateFromProps",value:function(e){return e.show?{messageIndex:e.startMessageIndex,fileIndex:e.startFileIndex,zoomLevel:0}:null}}]),n}(s.a.Component),Ae()(Nt,"getDerivedStateFromProps",[St],Ye()(Nt,"getDerivedStateFromProps"),Nt),Ae()(Nt.prototype,"isLastImage",[Je.a],Ye()(Nt.prototype,"isLastImage"),Nt.prototype),Ae()(Nt.prototype,"isFirstImage",[Je.a],Ye()(Nt.prototype,"isFirstImage"),Nt.prototype),Ae()(Nt.prototype,"handleClickPrev",[Je.a],Ye()(Nt.prototype,"handleClickPrev"),Nt.prototype),Ae()(Nt.prototype,"handleClickNext",[Je.a],Ye()(Nt.prototype,"handleClickNext"),Nt.prototype),Ae()(Nt.prototype,"handleZoomIn",[Je.a],Ye()(Nt.prototype,"handleZoomIn"),Nt.prototype),Ae()(Nt.prototype,"handleZoomOut",[Je.a],Ye()(Nt.prototype,"handleZoomOut"),Nt.prototype),Ae()(Nt.prototype,"handleImageClick",[Je.a],Ye()(Nt.prototype,"handleImageClick"),Nt.prototype),Ae()(Nt.prototype,"handleImageViewOuterClick",[Je.a],Ye()(Nt.prototype,"handleImageViewOuterClick"),Nt.prototype),Ae()(Nt.prototype,"handleDownloadImage",[Je.a],Ye()(Nt.prototype,"handleDownloadImage"),Nt.prototype),Ae()(Nt.prototype,"renderDownloadLink",[Je.a],Ye()(Nt.prototype,"renderDownloadLink"),Nt.prototype),Nt)),Lt=n(168),Dt=n(1427),zt=n.n(Dt),At=n(32),Wt=n.n(At),Ut=n(22),Ht=n.n(Ut),Gt=n(51),qt=n.n(Gt),Kt=n(101),Vt=n.n(Kt),Yt=n(494),Xt=n.n(Yt),$t=n(28),Zt=n(303),Jt=n.n(Zt),Qt=n(11),en=n(77),tn=n(242),nn=n(1312),on=n(473),rn=n(656);var an=function(){return Object(l.useContext)(rn.a)},ln=n(657);var sn,cn,un=function(){return Object(l.useContext)(ln.a)},dn=n(622),pn=n(97),fn=n(660),hn=n(241),mn=1073741824,gn=n(1310),bn=n(76);!function(e){e.Select="select",e.SupportBot="supportBot"}(sn||(sn={})),function(e){e.UserChatClose="close"}(cn||(cn={}));var yn=n(62);var vn=function(){var e=Object(W.a)(),t=Object(u.c)(),n=Object(u.d)(d.a.userChatsSelectors.getUserChat);return{localFiles:Object(u.d)(d.a.localFileSelectors.getFilesByUserChatId),handleCancelSendingFile:Object(l.useCallback)((function(o){return t(x.a.localFileActions.cancelSendingLocalFile({channelId:e.id,userChatId:n.id,localFile:o}))}),[t,e.id,n.id]),handleRemoveFailedFile:Object(l.useCallback)((function(o){return t(x.a.localFileActions.removeFailedLocalFile({channelId:e.id,userChatId:n.id,localFile:o}))}),[t,e.id,n.id]),handleRetryFailedFile:Object(l.useCallback)((function(o){return t(x.a.localFileActions.retryFailedLocalFile({channelId:e.id,userChatId:n.id,localFile:o}))}),[t,e.id,n.id])}},wn=n(83),xn=n.n(wn),Cn=n(44),On=n.n(Cn),_n=n(72),jn=function(){function e(){ke()(this,e),De()(this,"messages",$t.c.List()),De()(this,"hasTranslateMessage",!1),De()(this,"personType",null),De()(this,"profileBot",null),De()(this,"createdAt",0)}return Ee()(e,[{key:"id",get:function(){return this.messages.last().getKey()}},{key:"push",value:function(e){return this.messages=this.messages.push(e),this}},{key:"setHasTranslateMessage",value:function(){this.hasTranslateMessage=!0}},{key:"setPersonType",value:function(e){this.personType=e}},{key:"setCreatedAt",value:function(e){this.createdAt=e}},{key:"setProfileBot",value:function(e){this.profileBot=e}},{key:"hasProfileBot",value:function(){return On()(this.profileBot)}},{key:"shouldTranslate",value:function(){return(this.personType===_n.a.Manager||this.personType===_n.a.Bot)&&this.hasTranslateMessage}},{key:"shouldRenderTimeDivider",value:function(e){var t=e?(this.createdAt-e.createdAt)/1e3/60:0;return e&&!Object(mt.e)(e.createdAt,this.createdAt)||t>20}}]),e}();var kn=n(65),In={TimeDivider:w.f.div.withConfig({displayName:"TimeDividerstyled__TimeDivider",componentId:"jlgrsq-0"})(["display:flex;align-items:center;justify-content:center;padding:16px 14px 8px;font-weight:bold;color:",";text-align:center;background-color:",";",""],Z.a.grey500,Z.a.white,J.d.RemSize11)};var En=function(e){var t=e.messageGroup,n=Object(U.a)().locale;return s.a.createElement(In.TimeDivider,null,Object(mt.o)(t.createdAt,n))},Mn=n(143),Sn=n.n(Mn),Nn=n(200),Tn=n.n(Nn),Bn=n(182),Fn=n.n(Bn),Pn=n(484),Rn=n.n(Pn),Ln=n(256),Dn=n.n(Ln),zn=n(284),An=n.n(zn),Wn=n(161),Un=n.n(Wn),Hn=n(344),Gn=n.n(Hn),qn=n(54),Kn=n.n(qn),Vn=n(1315);var Yn=function(e){var t=Object(l.useRef)(e),n=e&&!t.current;return t.current=e,n},Xn=n(60),$n=n(1360),Zn=n(1361),Jn=n(470),Qn=n(1362),eo=n(133),to=w.f.div.withConfig({displayName:"BoolaenSelectstyled__Wrapper",componentId:"sc-1he3oi9-0"})(["display:flex;flex-direction:row;justify-content:stretch;"]),no=w.f.div.withConfig({displayName:"BoolaenSelectstyled__Item",componentId:"sc-1he3oi9-1"})(["display:flex;align-items:center;justify-content:center;width:100%;height:38px;margin-top:4px;font-style:normal;font-stretch:normal;line-height:1.43;color:",";letter-spacing:normal;cursor:pointer;background-color:",";border:1px solid ",";"," &:hover{background-color:",";border-color:transparent;transition:background-color 150ms;}"],(function(e){var t;return null===(t=e.theme.foundationTheme)||void 0===t?void 0:t["txt-black-dark"]}),(function(e){var t;return null===(t=e.theme.foundationTheme)||void 0===t?void 0:t["bg-grey-lightest"]}),(function(e){var t;return null===(t=e.theme.foundationTheme)||void 0===t?void 0:t["bg-black-light"]}),J.d.RemSize15,(function(e){var t;return null===(t=e.theme.foundationTheme)||void 0===t?void 0:t["bg-black-light"]})),oo={Wrapper:to,Item:no,Loader:Object(w.f)(eo.b).withConfig({displayName:"BoolaenSelectstyled__Loader",componentId:"sc-1he3oi9-2"})([""," background-color:transparent;"],(function(e){var t;return e.size&&Ke()(t="\n    top: calc(50%-".concat(e.size/2,"px);\n    left: calc(50%-")).call(t,e.size/2,"px);\n  ")})),TrueButton:Object(w.f)(no).withConfig({displayName:"BoolaenSelectstyled__TrueButton",componentId:"sc-1he3oi9-3"})(["position:relative;border-right:0;border-radius:","px 0 0 ","px;"],8,8),FalseButton:Object(w.f)(no).withConfig({displayName:"BoolaenSelectstyled__FalseButton",componentId:"sc-1he3oi9-4"})(["position:relative;border-radius:0 ","px ","px 0;"],8,8)};var ro=function(e){var t=e.value,n=e.trueItem,o=e.falseItem,r=e.isLoading,a=e.onChange;return s.a.createElement(oo.Wrapper,null,s.a.createElement(oo.TrueButton,{onClick:function(){a(!0)}},r&&!0===t?s.a.createElement(oo.Loader,{size:12}):n),s.a.createElement(oo.FalseButton,{onClick:function(){a(!1)}},r&&!1===t?s.a.createElement(oo.Loader,{size:12}):o))},ao=n(1376),io=n(1374),lo=n(1378),so=n(1304),co=Object(w.e)(["padding:0;overflow:visible;cursor:pointer;background:inherit;border:none;border-radius:0;box-shadow:none;"]),uo=Object(w.e)(["position:absolute;top:50%;transform:translateY(-50%);"]),po=Object(w.g)(["from{opacity:0.01;transform:translate(0,25px);}to{opacity:1;transform:translate(0,0);}"]),fo=w.f.div.withConfig({displayName:"ProfileFormstyled__Wrapper",componentId:"q3nvz2-0"})(["padding:10px 0 12px;background-color:",";"],(function(e){var t;return null===(t=e.theme.foundationTheme)||void 0===t?void 0:t["bgtxt-white-absolute-dark"]})),ho=w.f.div.withConfig({displayName:"ProfileFormstyled__Item",componentId:"q3nvz2-1"})(["position:relative;"]),mo=w.f.div.withConfig({displayName:"ProfileFormstyled__Form",componentId:"q3nvz2-2"})(["position:relative;width:100%;max-width:calc(100% - 50px);padding:14px 12px;margin:0 auto;border-radius:18px;box-shadow:",";transition:box-shadow 0.2s ease-out;animation:"," 0.25s ease-in-out;> "," + ","{margin-top:8px;}"],Z.a.ev2,po,ho,ho),go=w.f.div.withConfig({displayName:"ProfileFormstyled__InputWrapper",componentId:"q3nvz2-3"})(["position:relative;"]),bo=Object(w.f)(so.a).withConfig({displayName:"ProfileFormstyled__Input",componentId:"q3nvz2-4"})(["box-sizing:border-box;display:block;width:100%;height:","px;padding:","px ","px ","px 12px;margin-top:4px;"," "," &::placeholder{","}&&&{","}"],38,8,38,8,J.d.RemSize15,(function(e){return e.isFocused&&so.d}),J.d.RemSize15,(function(e){return e.hasError&&so.c})),yo=Object(w.f)(bo).withConfig({displayName:"ProfileFormstyled__TagInputWrapper",componentId:"q3nvz2-5"})(["height:auto;min-height:","px;padding-bottom:0;&::after{display:block;width:100%;height:4px;content:'';}"],38),vo=Object(w.f)(bo).withConfig({displayName:"ProfileFormstyled__MoblieNumberInputWrapper",componentId:"q3nvz2-6"})(["display:flex;align-items:center;min-height:","px;"],38),wo=w.f.input.withConfig({displayName:"ProfileFormstyled__MobileNumberInput",componentId:"q3nvz2-7"})(["width:100%;padding:0;margin:0;margin-left:8px;border:none;box-shadow:none;"," &::placeholder{","}"],J.d.RemSize15,J.d.RemSize15),xo=Object(w.f)(lo.a).withConfig({displayName:"ProfileFormstyled__Selector",componentId:"q3nvz2-8"})(["display:flex;align-items:center;justify-content:center;padding:3px 4px 3px 6px;color:",";",""],(function(e){var t;return null===(t=e.theme.foundationTheme)||void 0===t?void 0:t["txt-black-darkest"]}),J.d.RemSize15),Co=w.f.div.withConfig({displayName:"ProfileFormstyled__Label",componentId:"q3nvz2-9"})(["width:200px;height:16px;margin-left:","px;overflow:hidden;font-weight:bold;color:",";text-align:left;text-overflow:ellipsis;white-space:pre;",""],2,(function(e){var t,n=e.theme,o=e.hasError;return null===(t=n.foundationTheme)||void 0===t?void 0:t[o?"bgtxt-orange-normal":"txt-black-dark"]}),J.d.RemSize11),Oo=w.f.div.withConfig({displayName:"ProfileFormstyled__StepInfo",componentId:"q3nvz2-10"})(["position:absolute;top:0;right:","px;display:inline;color:",";",""],2,(function(e){var t;return null===(t=e.theme.foundationTheme)||void 0===t?void 0:t["txt-black-dark"]}),J.d.RemSize11),_o=w.f.span.withConfig({displayName:"ProfileFormstyled__CurrentStep",componentId:"q3nvz2-11"})(["color:",";"],(function(e){var t;return null===(t=e.theme.foundationTheme)||void 0===t?void 0:t["txt-black-darkest"]})),jo=w.f.div.withConfig({displayName:"ProfileFormstyled__FilledInputWrapper",componentId:"q3nvz2-12"})(["display:flex;align-items:center;justify-content:flex-start;height:","px;margin-top:2px;"],38),ko=w.f.div.withConfig({displayName:"ProfileFormstyled__FilledInput",componentId:"q3nvz2-13"})(["flex:1 1 auto;margin-left:2px;overflow:hidden;color:",";text-align:left;text-overflow:ellipsis;white-space:nowrap;",""],(function(e){var t;return null===(t=e.theme.foundationTheme)||void 0===t?void 0:t["txt-black-darkest"]}),J.d.RemSize15),Io=Object(w.f)(Y.b).withConfig({displayName:"ProfileFormstyled__SucceedIcon",componentId:"q3nvz2-14"})(["margin-right:2px;cursor:default;&:hover{&::before{opacity:1;}}"]),Eo=w.f.button.withConfig({displayName:"ProfileFormstyled__SendButton",componentId:"q3nvz2-15"})([""," position:absolute;top:","px;right:","px;display:flex;align-items:center;justify-content:center;width:","px;height:","px;background-color:",";border-radius:30%;&:hover{background-color:",";}> ","{width:100%;height:100%;}"],co,6,6,26,26,(function(e){var t;return null===(t=e.theme.foundationTheme)||void 0===t?void 0:t["bg-black-light"]}),(function(e){var t;return null===(t=e.theme.foundationTheme)||void 0===t?void 0:t["bg-black-dark"]}),Y.b),Mo=Object(w.f)(eo.b).withConfig({displayName:"ProfileFormstyled__Loader",componentId:"q3nvz2-16"})([""," width:","px;height:","px;"],uo,(function(e){return e.size+6||35}),(function(e){return e.size+6||35})),So={Wrapper:fo,Form:mo,Label:Co,InputWrapper:go,Input:bo,MoblieNumberInputWrapper:vo,MobileNumberInput:wo,Selector:xo,Item:ho,StepInfo:Oo,FilledInputWrapper:jo,FilledInput:ko,SucceedIcon:Io,SendButton:Eo,TermDescription:w.f.div.withConfig({displayName:"ProfileFormstyled__TermDescription",componentId:"q3nvz2-17"})([""," padding:0 16px;margin-top:8px;color:",";text-align:center;letter-spacing:0;word-break:break-all;cursor:pointer;"],J.d.RemSize11,(function(e){var t;return null===(t=e.theme.foundationTheme)||void 0===t?void 0:t["txt-black-dark"]})),Loader:Mo,CurrentStep:_o,DateTimePickerInput:Object(w.f)(io.a).withConfig({displayName:"ProfileFormstyled__DateTimePickerInput",componentId:"q3nvz2-18"})(["height:","px;margin-top:4px;"],38),TagInputWrapper:yo},No=Object(w.e)([" "," "],J.d.RemSize15);function To(e,t){var n,o;return-1!==Gn()(n=e.get("name").replace(/\s/gi,"").toLowerCase()).call(n,t.toLowerCase())||-1!==Gn()(o="".concat(e.get("callingCode"))).call(o,t)}function Bo(e,t){var n=e.profileList,o=e.user,r=e.userChatId,a=e.messageId,i=e.className,c=void 0===i?"":i,p=Object(u.c)(),h=Object(U.a)(),g=h.locale,y=h.translate,v=h.translateWithInnerHtml,w=Object(on.a)().infiniteScrollRef,C=an().inputRef,O=un().textAreaRef,_=Object(l.useRef)(null),j=Object(Vn.a)(),k=Object(u.d)(d.a.geoSelectors.getCountries),I=Object(u.d)(d.a.geoSelectors.getCountryObject),E=Object(u.d)(d.a.userSelectors.getGlobalProfile),M=Object(l.useState)(I),S=f()(M,2),N=S[0],T=S[1],F=Object(l.useState)(""),P=f()(F,2),R=P[0],z=P[1],A=Object(l.useState)(null),W=f()(A,2),H=W[0],G=W[1],q=Object(l.useState)(!1),K=f()(q,2),V=K[0],X=K[1],$=Object(l.useState)((function(){return Un()(n,(function(e,t){var n=t.value;return B()(n)?e:e+1}),0)})),Z=f()($,2),J=Z[0],Q=Z[1],ee=Object(l.useState)(""),te=f()(ee,2),ne=te[0],oe=te[1],re=Object(l.useState)(!1),ae=f()(re,2),ie=ae[0],le=ae[1],se=Object(l.useState)(!1),ce=f()(se,2),ue=ce[0],de=ce[1],pe=Object(l.useCallback)((function(e){var t,r,a=null===(t=n[e])||void 0===t?void 0:t.key,i=null===(r=n[e])||void 0===r?void 0:r.type,l=b()(o,"profile.".concat(a))||b()(E,"profile.".concat(a));i===Zn.a.LIST&&z(Object(Jn.g)(l)),B()(l)||(a===$n.a.MOBILE_NUMBER&&p(x.a.utilActions.requestGetPhoneNumber({number:l})).promise.then((function(e){var t=Kn()(k).call(k,(function(t){return t.get("callingCode")===e.payload.countryCode}),null,I);T(t),z(e.payload.national||""),oe(e.payload.international)})).catch(Wt.a),(i===Zn.a.NUMBER&&m()(l)||i===Zn.a.STRING)&&z(l))}),[k,I,p,E,n,o]),fe=Object(l.useCallback)((function(e){p(x.a.utilActions.requestGetPhoneNumber({number:e})).promise.then((function(e){var t=Kn()(k).call(k,(function(t){return t.get("callingCode")===e.payload.countryCode}),null,I);T(t),oe(e.payload.international)})).catch(Wt.a)}),[k,I,p]),he=n.every((function(e){return!B()(b()(o,"profile.".concat(e.key)))}));Object(l.useEffect)((function(){J<n.length&&pe(J)}),[]),Object(l.useEffect)((function(){var e=An()(n,(function(e){return e.key===$n.a.MOBILE_NUMBER}));null!=e&&e.value&&fe(e.value)}),[]);var me=Yn(he);Object(l.useEffect)((function(){var e;me&&(null===(e=w.current)||void 0===e||e.scrollToBottom())}),[me,w]),Object(l.useEffect)((function(){var e,t=0===J,o=J===n.length,r=J<n.length&&!he;if(!t&&r)null===(e=C.current)||void 0===e||e.focus();else if(o&&!D.a.isApplePhone()){var a;null===(a=O.current)||void 0===a||a.focus()}}),[J,he,n.length,C,O]);var ge=Object(l.useCallback)((function(){var e,t;if(!V&&L()(H)){var o,i=null===(e=n[J])||void 0===e?void 0:e.key,l=null===(t=n[J])||void 0===t?void 0:t.type,s=function(){if(l===Zn.a.NUMBER||l===Zn.a.DATE_TIME)return Dn()(R);if(l===Zn.a.LIST){var e,t=R,n=null===(e=C.current)||void 0===e?void 0:e.value;return L()(n)?Sn()(t):Sn()(t.add(n))}return l===Zn.a.BOOLEAN?R:Rn()(R)}();if(i===$n.a.MOBILE_NUMBER&&N)fe(Ke()(o="+".concat(N.get("callingCode")," ")).call(o,R));if(Object(Qn.c)(R)&&Object(Qn.d)(s)){var c,u=i===$n.a.MOBILE_NUMBER&&N?De()({},i,Ke()(c="+".concat(N.get("callingCode")," ")).call(c,R)):De()({},i,s);X(!0),p(x.a.userChatActions.requestUpdateProfileBot({userChatId:r,messageId:a,profileData:u})).promise.then((function(e){X(!1);var t=J+1;Q(t),z(""),le(!0),de(!0),t<n.length&&w.current&&(pe(t),w.current.scrollDown(60));var o=Un()(b()(e,"payload.message.profileBot"),(function(e,t){return B()(t.value)||(e[t.key]=t.value),e}),{});p(x.a.userActions.changedUserProfile({profile:o}))}),(function(e){X(!1),G(b()(e,"payload.body.errors[0].message"))}))}}}),[pe,p,H,fe,w,R,V,a,C,n,N,J,r]);Object(l.useEffect)((function(){"boolean"==typeof R&&ge(),!D.a.isPhone()&&R instanceof Date&&ge()}),[R]);var be=Object(l.useCallback)((function(e){e.keyCode===gn.a.ENTER&&(e.preventDefault(),ge())}),[ge]),ye=Object(l.useCallback)((function(e){z(e),G(null)}),[]),ve=Object(l.useCallback)((function(e){T(e),G(null)}),[]),we=Object(l.useCallback)((function(){var e;window.open(Ke()(e="https://channel.io/".concat(g,"/terms_user?plugin_key=")).call(e,j.key),"_blank")}),[g,j.key]),xe=Object(l.useCallback)((function(){de(!0)}),[]),Ce=Object(l.useCallback)((function(){de(!1)}),[]),Oe=Object(l.useCallback)((function(e){le(e)}),[]),_e=Object(l.useCallback)((function(e){z(e),G(null)}),[]),je=Object(l.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fn.a;return s.a.createElement(So.Input,{ref:C,hasError:!L()(H),onChange:function(e){return ye(t(e.currentTarget.value))},onKeyDown:be,value:e,placeholder:y("ch.profile_form.placeholder")})}),[H,ye,be,C,y]),ke=Object(l.useCallback)((function(e){return s.a.createElement(So.MoblieNumberInputWrapper,{as:"div",hasError:!L()(H),isFocused:ue},s.a.createElement(So.Selector,{defaultSelectedItem:N,onClickItem:ve,items:k,selectedItemRenderer:function(e){return"+".concat(e.get("callingCode"))},itemRenderer:function(e){var t;return Ke()(t="".concat(e.get("name")," (+")).call(t,e.get("callingCode"),")")},width:250,height:200,searchable:!0,searchFunc:To,compareItemKey:"callingCode",container:_.current,placement:Xn.a.TOP_LEFT,marginY:10,marginX:-11}),s.a.createElement(So.MobileNumberInput,{type:"tel",ref:C,value:e,placeholder:y("ch.profile_form.placeholder"),onFocus:xe,onBlur:Ce,onChange:function(e){return ye(Object(Jn.e)(e.currentTarget.value))},onKeyDown:be}))}),[k,H,ue,xe,Ce,ye,ve,be,C,N,y,_]),Ie=Object(l.useCallback)((function(e){return s.a.createElement(So.TagInputWrapper,{as:"div",hasError:!L()(H),isFocused:ie},s.a.createElement(ao.a,{tagList:e,onChange:_e,onKeyDown:be,onFocus:Oe,inputRef:C,placeholder:y("ch.profile_form.list_placeholder"),inputInterpolation:No}))}),[H,be,_e,Oe,ie,C,y]),Ee=Object(l.useCallback)((function(e){var t=D.a.isPhone(),n=e instanceof Date,o=n?Object(mt.n)(e,g):void 0,r=t&&o||y("ch.profile_form.datetime_pick");return s.a.createElement(So.DateTimePickerInput,{isNative:t,value:n?e:null,withoutChevron:!L()(o),onChange:function(e){var t=e instanceof Date?e:"";z(t)},label:r})}),[g,y]),Me=Object(l.useCallback)((function(e){return s.a.createElement(ro,{value:e,isLoading:V,trueItem:y("ch.profile_form.boolean.yes"),falseItem:y("ch.profile_form.boolean.no"),onChange:ye})}),[ye,V,y]),Se=Object(l.useCallback)((function(e){var t=e.id,n=e.key,o=e.type,r=e.name,a=e.value,i=function(){if(n===$n.a.MOBILE_NUMBER)return ne;switch(o){case Zn.a.DATE_TIME:return Object(mt.n)(new Date(Number(a)),g);case Zn.a.BOOLEAN:return y(Object(Qn.a)(a));case Zn.a.LIST:return Object(Qn.b)(a);default:return a}}();return s.a.createElement(So.Item,{key:t},s.a.createElement(So.Label,null,r),s.a.createElement(So.FilledInputWrapper,null,s.a.createElement(So.FilledInput,null,i),s.a.createElement(So.SucceedIcon,{name:"check-blue",size:Y.a.Small,width:24,height:24,defaultOpacity:1})))}),[y,g,ne]),Ne=Object(l.useCallback)((function(e){var t=e.type;if(V&&t!==Zn.a.BOOLEAN)return s.a.createElement(So.Loader,{left:"auto",right:12,size:12});if(t===Zn.a.LIST&&R.size<=0)return null;if(t!==Zn.a.LIST){var n=t===Zn.a.BOOLEAN,o=!Rn()(R);if(n||o)return null}return s.a.createElement(So.SendButton,{type:"button",onClick:ge},s.a.createElement(Y.b,{name:"arrow-turn-left-down",size:Y.a.XSmall,hoveredOpacity:.85}))}),[V,R,ge]),Te=Object(l.useCallback)((function(e){var t=e.id,o=e.key,r=e.type,a=e.name,i=function(){if(o===$n.a.MOBILE_NUMBER)return ke(R);switch(r){case Zn.a.DATE_TIME:return Ee(R);case Zn.a.BOOLEAN:return Me(R);case Zn.a.LIST:return Ie(R);case Zn.a.STRING:return je(R);default:return je(R,Jn.d)}}();return s.a.createElement(So.Item,{key:t},L()(H)?s.a.createElement(So.Label,null,a):s.a.createElement(So.Label,{hasError:!0},y("ch.profile_form.error")),s.a.createElement(So.StepInfo,null,s.a.createElement(So.CurrentStep,null,J+1),"/",n.length),s.a.createElement(So.InputWrapper,null,i,Ne(e)))}),[y,J,H,R,n.length,Ne,je,ke,Ee,Me,Ie]),Be=Object(l.useMemo)((function(){return Tn()(n,(function(e,t){return t>J?null:t<J?Se(e):Te(e)}))}),[J,n,Se,Te]);return s.a.createElement(So.Wrapper,{ref:t},s.a.createElement(So.Form,{className:c,ref:_},Be,0===J&&s.a.createElement(So.TermDescription,{onClick:we},v("ch.agreement"))))}var Fo=Object(l.forwardRef)(Bo),Po=n(1432),Ro=n.n(Po),Lo=n(1363),Do=n.n(Lo),zo=n(162),Ao=n.n(zo),Wo=n(701),Uo=n.n(Wo),Ho=n(63),Go=n.n(Ho),qo=["people","nature","foods","places","activity","objects","symbols","flags"],Ko=n(659),Vo=n(1433),Yo=n.n(Vo),Xo={Wrapper:w.f.div.withConfig({displayName:"EmptyContentstyled__Wrapper",componentId:"wxd01v-0"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;"," color:",";"],J.d.RemSize12,Z.a.grey500),EmojiItem:w.f.div.withConfig({displayName:"EmptyContentstyled__EmojiItem",componentId:"wxd01v-1"})(["display:flex;align-items:center;justify-content:center;width:44px;height:44px;background-repeat:no-repeat;background-position:50% 50%;background-size:50%;"])};function $o(e){var t=function(){if("undefined"==typeof Reflect||!ge.a)return!1;if(ge.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(ge()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Re()(e);if(t){var r=Re()(this).constructor;n=ge()(o,arguments,r)}else n=o.apply(this,arguments);return Fe()(this,n)}}var Zo=["see_no_evil","ghost","joy_cat","face_palm","disappointed_relieved","new_moon_with_face"],Jo=function(e){Te()(n,e);var t=$o(n);function n(e){var o;return ke()(this,n),o=t.call(this,e),De()(Se()(o),"emptyEmojiKey",void 0),o.emptyEmojiKey=Zo[Yo()(0,Zo.length-1)],o}return Ee()(n,[{key:"render",value:function(){var e=this.props.message,t=O.b.getImageUrl(this.emptyEmojiKey),n={backgroundImage:"url('".concat(t,"')")};return s.a.createElement(Xo.Wrapper,null,s.a.createElement(Xo.EmojiItem,{style:n}),s.a.createElement("div",null,e))}}]),n}(s.a.PureComponent),Qo=n(134),er=n.n(Qo),tr=n(1435),nr=n.n(tr),or=n(34),rr=n.n(or),ar=n(1436),ir=n(111),lr=n.n(ir),sr=n(1439),cr=n(486),ur=n.n(cr),dr=n(48),pr=n.n(dr);function fr(e){return(fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hr(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function mr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gr(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function br(e,t,n){return t&&gr(e.prototype,t),n&&gr(e,n),e}function yr(e,t){return!t||"object"!==fr(t)&&"function"!=typeof t?Cr(e):t}function vr(e){return(vr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xr(e,t)}function xr(e,t){return(xr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Cr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Or(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _r={debounce:P.a,throttle:ur.a},jr={position:"absolute",width:0,height:0,visibility:"hidden",display:"none"};var kr=function(e){function t(e){var n;mr(this,t),Or(Cr(Cr(n=yr(this,vr(t).call(this,e)))),"getElement",(function(){var e=n.props.resizableElementId,t=e&&document.getElementById(e),o=n.el&&n.el.parentElement;return t||o})),Or(Cr(Cr(n)),"createResizeHandler",(function(e){var t=n.props,o=t.handleWidth,r=t.handleHeight,a=t.onResize;e.forEach((function(e){var t=e.contentRect,i=t.width,l=t.height,s=o&&n.state.width!==i,c=r&&n.state.height!==l;n.skipOnMount||!s&&!c||"undefined"==typeof window||(n.animationFrameID=window.requestAnimationFrame((function(){a(i,l),n.setState({width:i,height:l})}))),n.skipOnMount=!1}))})),Or(Cr(Cr(n)),"handleRenderProp",(function(){var e=n.state,t=e.width,o=e.height,r=n.props.render;if(r&&"function"==typeof r)return Object(l.cloneElement)(r({width:t,height:o}),{key:"render"})})),Or(Cr(Cr(n)),"renderChildren",(function(){var e=n.state,t=e.width,o=e.height;return function(e){return e?Array.isArray(e)?e:[e]:[]}(n.props.children).filter((function(e){return!!e})).map((function(e,n){return pr()(e)?Object(l.cloneElement)(e(t,o),{key:n}):Object(l.isValidElement)(e)?Object(l.cloneElement)(e,{width:t,height:o,key:n}):e}))}));var o=e.skipOnMount,r=e.refreshMode,a=e.refreshRate,i=e.refreshOptions;return n.state={width:void 0,height:void 0},n.skipOnMount=o,n.animationFrameID=null,n.resizeHandler=_r[r]?_r[r](n.createResizeHandler,a,i):n.createResizeHandler,n.ro=new sr.a(n.resizeHandler),n}return wr(t,e),br(t,[{key:"componentDidMount",value:function(){var e=this.getElement();e&&this.ro.observe(e)}},{key:"componentWillUnmount",value:function(){var e=this.getElement();e&&this.ro.unobserve(e),"undefined"!=typeof window&&this.animationFrameID&&window.cancelAnimationFrame(this.animationFrameID),this.resizeHandler&&this.resizeHandler.cancel&&this.resizeHandler.cancel()}},{key:"render",value:function(){var e=this,t=this.props.nodeType;return[Object(l.createElement)(t,{key:"resize-detector",style:jr,ref:function(t){e.el=t}}),this.handleRenderProp()].concat(hr(this.renderChildren()))}}]),t}(l.PureComponent);kr.propTypes={handleWidth:lr.a.bool,handleHeight:lr.a.bool,skipOnMount:lr.a.bool,refreshRate:lr.a.number,refreshMode:lr.a.string,refreshOptions:lr.a.shape({leading:lr.a.bool,trailing:lr.a.bool}),resizableElementId:lr.a.string,onResize:lr.a.func,render:lr.a.func,children:lr.a.any,nodeType:lr.a.node},kr.defaultProps={handleWidth:!1,handleHeight:!1,skipOnMount:!1,refreshRate:1e3,refreshMode:void 0,refreshOptions:void 0,resizableElementId:"",onResize:function(e){return e},render:void 0,children:null,nodeType:"div"};var Ir=n(1359),Er={Wrapper:w.f.div.withConfig({displayName:"Scrollbarstyled__Wrapper",componentId:"sc-1c5iqkh-0"})(["",""],(function(e){return e.canSupportScroll&&Object(w.e)(["position:absolute;top:0;left:0;right:0;bottom:0;overflow-x:hidden;overflow-y:"," !important;&::-webkit-scrollbar{width:","px;}&::-webkit-scrollbar-thumb{height:","px;background-color:rgba(0,0,0,0.2);border-radius:10px;background-clip:padding-box;border:2px solid transparent;&:hover{background-color:rgba(0,0,0,0.4);}}@supports (-ms-ime-align:auto){margin-right:-10px;padding-top:16px;margin-top:-16px;margin-bottom:-16px;padding-bottom:16px;}"],e.show?"visible":"hidden",6,30)})),Children:w.f.div.withConfig({displayName:"Scrollbarstyled__Children",componentId:"sc-1c5iqkh-1"})(["display:inline-block;width:",";",""],(function(e){var t=e.canSupportScroll,n=e.show;return t&&n?"calc(100% - ".concat(6,"px)"):"100%"}),(function(e){var t=e.canSupportScroll,n=e.interpolation;return t&&n}))};function Mr(e,t){var n=e.className,o=void 0===n?"":n,r=e.children,a=e.onScroll,i=void 0===a?Wt.a:a,c=e.onMouseEnter,u=void 0===c?Wt.a:c,d=e.onMouseLeave,p=void 0===d?Wt.a:d,h=e.onWheel,m=void 0===h?Wt.a:h,g=e.interpolation,b=Object(l.useState)(!0),y=f()(b,2),v=y[0],w=y[1],x=Object(l.useState)(!1),C=f()(x,2),O=C[0],_=C[1],j=Object(l.useState)(!0),k=f()(j,2),I=k[0],E=k[1],M=Object(l.useState)(null),S=f()(M,2),N=S[0],T=S[1];Object(l.useEffect)((function(){if(N){var e=N.scrollHeight,t=N.clientHeight;E(e>t)}}),[I,N]);var B=Object(l.useMemo)((function(){return I&&!yn.a&&!D.a.isMobileDevice()}),[I]),F=Object(l.useCallback)(P()((function(){w(!1)}),2e3),[]),R=Object(l.useCallback)(ur()((function(){w(!0),i(),E(!0),F()}),50,{trailing:!0}),[i]),L=Object(l.useCallback)((function(e){m(e),w(!0),_(!0)}),[m]),z=Object(l.useCallback)((function(){u(),w(!0),_(!1),O||F()}),[O,u,F]),A=Object(l.useCallback)((function(){p(),w(!1),_(!1)}),[p]),W=Object(l.useCallback)((function(e){t.current=e,T(e)}),[t]);return s.a.createElement(Er.Wrapper,{ref:W,className:o,show:v,canSupportScroll:B,onScroll:R,onWheel:L,onMouseEnter:z,onMouseLeave:A},s.a.createElement(Er.Children,{show:v,canSupportScroll:B,interpolation:g},r))}var Sr,Nr,Tr,Br=Object(l.forwardRef)(Mr),Fr={ScrollBarWrapper:Object(w.f)(Br).withConfig({displayName:"InfiniteScrollstyled__ScrollBarWrapper",componentId:"sc-1b63wy2-0"})(["position:absolute;top:0;right:0;bottom:0;left:0;overflow-x:hidden;overflow-y:auto;-webkit-overflow-scrolling:",";"],(function(e){return e.fetching?"auto":"touch"})),IPadScrollBarWrapper:w.f.div.withConfig({displayName:"InfiniteScrollstyled__IPadScrollBarWrapper",componentId:"sc-1b63wy2-1"})(["position:absolute;top:0;right:0;bottom:0;left:0;overflow-x:hidden;overflow-y:auto;-webkit-overflow-scrolling:",";"],(function(e){return e.fetching?"auto":"touch"})),Wrapper:w.f.div.withConfig({displayName:"InfiniteScrollstyled__Wrapper",componentId:"sc-1b63wy2-2"})([""]),InnerWrapper:w.f.div.withConfig({displayName:"InfiniteScrollstyled__InnerWrapper",componentId:"sc-1b63wy2-3"})(["width:100%;height:auto;",""],(function(e){return e.interpolation})),Loader:Object(w.f)(eo.b).withConfig({displayName:"InfiniteScrollstyled__Loader",componentId:"sc-1b63wy2-4"})(["position:relative;padding:10px 0;"])};function Pr(e,t){var n=ye()(e);if(we.a){var o=we()(e);t&&(o=Ce()(o).call(o,(function(t){return Ye()(e,t).enumerable}))),n.push.apply(n,o)}return n}function Rr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pr(Object(n),!0).forEach((function(t){De()(e,t,n[t])})):_e.a?Object.defineProperties(e,_e()(n)):Pr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Ye()(n,t))}))}return e}function Lr(e){var t=function(){if("undefined"==typeof Reflect||!ge.a)return!1;if(ge.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(ge()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Re()(e);if(t){var r=Re()(this).constructor;n=ge()(o,arguments,r)}else n=o.apply(this,arguments);return Fe()(this,n)}}var Dr,zr,Ar,Wr,Ur=(Tr=Nr=function(e){Te()(n,e);var t=Lr(n);function n(){var e,o;ke()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return o=t.call.apply(t,Ke()(e=[this]).call(e,a)),De()(Se()(o),"state",{fetchingNext:!1}),De()(Se()(o),"wrapperRef",Object(l.createRef)()),De()(Se()(o),"wrapperHeight",0),De()(Se()(o),"smoothScroll",null),De()(Se()(o),"handleScroll",ur()((function(){var e=o.props,t=e.toUp,n=e.threshold,r=e.useBodyScroll,a=e.onScroll,i=o.state.fetchingNext,l=r?document.documentElement:o.wrapperRef.current;l&&(i||(t&&l.scrollTop<n||!t&&l.scrollTop+l.clientHeight>l.scrollHeight-n)&&o.handleLoadMore(),a({scrollBottomOffset:o.getScrollBottomOffset()}))}),50,{trailing:!0})),o}return Ee()(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.toUp,n=e.useBodyScroll,o=e.disableScrollBottomOnMount;this.loadMoreIfThereIsNoScroll(),this.smoothScroll=Object(Ir.a)(this.wrapperRef.current,{duration:700}),t&&!o&&this.scrollToBottom(),this.wrapperRef.current&&(this.wrapperHeight=this.wrapperRef.current.getBoundingClientRect().height),n&&window.addEventListener("scroll",this.handleScroll)}},{key:"getSnapshotBeforeUpdate",value:function(){var e=this.props.useBodyScroll?document.documentElement:this.wrapperRef.current;return e?{scrollHeight:e.scrollHeight,scrollTop:e.scrollTop}:null}},{key:"componentDidUpdate",value:function(e,t,n){var o=this.props,r=o.toUp,a=o.useBodyScroll,i=o.fixedClientView,l=o.disableScrollBottomOnUpdate,s=this.state.fetchingNext;if(this.loadMoreIfThereIsNoScroll(),r){var c=a?document.documentElement:this.wrapperRef.current;if(!c)return;if(i){var u=c.scrollHeight-n.scrollHeight;c.scrollTop+=u}var d=D.a.isPhone()&&a?b()(window,"visualViewport.height",c.clientHeight):c.clientHeight;!l&&!this.isScrollBottom()&&d+n.scrollTop>n.scrollHeight-2&&this.scrollToBottom(),!t.fetchingNext&&s&&(c.scrollTop=0)}}},{key:"componentWillUnmount",value:function(){this.props.useBodyScroll&&window.removeEventListener("scroll",this.handleScroll)}},{key:"loadMoreIfThereIsNoScroll",value:function(){var e=this.props,t=e.hasMore,n=e.onLoadMore,o=e.useBodyScroll,r=this.state.fetchingNext,a=o?document.documentElement:this.wrapperRef.current;t&&!r&&pr()(n)&&a&&a.scrollHeight===a.clientHeight&&this.handleLoadMore()}},{key:"isScrollBottom",value:function(){var e=this.props.useBodyScroll,t=e?document.documentElement:this.wrapperRef.current;if(!t)return!1;var n=D.a.isPhone()&&e?b()(window,"visualViewport.height",t.clientHeight):t.clientHeight;return t.scrollTop+n>=t.scrollHeight-2}},{key:"getScrollBottomOffset",value:function(){var e=this.props.useBodyScroll,t=e?document.documentElement:this.wrapperRef.current;if(!t)return 0;var n=D.a.isPhone()&&e?b()(window,"visualViewport.height",t.clientHeight):t.clientHeight;return t.scrollHeight-(t.scrollTop+n)}},{key:"scrollToBottom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.props.useBodyScroll,n=e.smoothScroll;if(t){if(!document.scrollingElement)return;if(n)return void window.scroll({behavior:"smooth",top:document.scrollingElement.scrollHeight});if(document.scrollingElement){var o,r,a=null!==(o=null===(r=document.scrollingElement)||void 0===r?void 0:r.scrollHeight)&&void 0!==o?o:window.innerHeight+window.scrollY,i=b()(window,"visualViewport.height",window.innerHeight),l=a-i;document.scrollingElement.scrollTop=l}}else{var s=this.wrapperRef.current;s&&(n&&this.smoothScroll?this.smoothScroll(s.scrollHeight):s.scrollTop=s.scrollHeight)}}},{key:"scrollToTop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.props.useBodyScroll,n=t?document.documentElement:this.wrapperRef.current;if(n){var o=e.smoothScroll;o&&this.smoothScroll?this.smoothScroll(0):n.scrollTop=0}}},{key:"scrollDown",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.props.useBodyScroll,o=n?document.documentElement:this.wrapperRef.current;if(o){var r=t.smoothScroll;r&&this.smoothScroll?this.smoothScroll(o.scrollTop+e):o.scrollTop+=e}}},{key:"getClientWidth",value:function(){var e,t;return null===(e=this.wrapperRef)||void 0===e||null===(t=e.current)||void 0===t?void 0:t.clientWidth}},{key:"getScrollTop",value:function(){var e,t;return null===(e=this.wrapperRef)||void 0===e||null===(t=e.current)||void 0===t?void 0:t.scrollTop}},{key:"shouldRenderLoader",value:function(){var e=this.props.showLoader,t=this.state.fetchingNext;return e&&t}},{key:"handleLoadMore",value:function(){var e=this,t=this.props,n=t.hasMore,o=t.onLoadMore,r=t.useBodyScroll;if(n&&pr()(o)){var a=r?document.documentElement:this.wrapperRef.current;a.style.overflow="hidden",this.setState((function(e){return Rr(Rr({},e),{},{fetchingNext:!0})})),o().then((function(){a.style.overflowY="auto",e.setState((function(e){return Rr(Rr({},e),{},{fetchingNext:!1})}))}),(function(){a.style.overflowY="auto",e.setState((function(e){return Rr(Rr({},e),{},{fetchingNext:!1})}))}))}}},{key:"handleMouseEnter",value:function(){Qe.a.lock("infinite")}},{key:"handleMouseLeave",value:function(){Qe.a.unlock("infinite")}},{key:"renderLoader",value:function(){return s.a.createElement(Fr.Loader,{key:"infinite-scroll-loader",strokeWidth:2,size:15})}},{key:"renderContent",value:function(){var e=this.props,t=e.children,n=e.toUp,o=e.fixedInnerWrapperInterpolation;return s.a.createElement(Fr.InnerWrapper,{interpolation:o},this.shouldRenderLoader()&&n&&this.renderLoader(),t,this.shouldRenderLoader()&&!n&&this.renderLoader())}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.useBodyScroll,o=e.scrollBarInterpolation,r=this.state.fetchingNext;return n?s.a.createElement(Fr.Wrapper,{ref:this.wrapperRef,onScroll:this.handleScroll,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,className:t},this.renderContent()):D.a.isAppleTablet()?s.a.createElement(Fr.IPadScrollBarWrapper,{ref:this.wrapperRef,onScroll:this.handleScroll,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,className:t,fetching:r},this.renderContent()):s.a.createElement(Fr.ScrollBarWrapper,{ref:this.wrapperRef,onScroll:this.handleScroll,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,className:t,fetching:r,interpolation:o},this.renderContent())}}]),n}(s.a.Component),De()(Nr,"defaultProps",{toUp:!0,onScroll:Wt.a,fixedClientView:!1,disableScrollBottomOnUpdate:!1,showLoader:!1,hasMore:!1,className:"",threshold:50,useBodyScroll:!1,disableScrollBottomOnMount:!1}),Sr=Tr,Ae()(Sr.prototype,"scrollToBottom",[Je.a],Ye()(Sr.prototype,"scrollToBottom"),Sr.prototype),Ae()(Sr.prototype,"scrollToTop",[Je.a],Ye()(Sr.prototype,"scrollToTop"),Sr.prototype),Ae()(Sr.prototype,"scrollDown",[Je.a],Ye()(Sr.prototype,"scrollDown"),Sr.prototype),Ae()(Sr.prototype,"getClientWidth",[Je.a],Ye()(Sr.prototype,"getClientWidth"),Sr.prototype),Ae()(Sr.prototype,"getScrollTop",[Je.a],Ye()(Sr.prototype,"getScrollTop"),Sr.prototype),Ae()(Sr.prototype,"handleMouseEnter",[Je.a],Ye()(Sr.prototype,"handleMouseEnter"),Sr.prototype),Ae()(Sr.prototype,"handleMouseLeave",[Je.a],Ye()(Sr.prototype,"handleMouseLeave"),Sr.prototype),Sr),Hr={Wrapper:w.f.div.withConfig({displayName:"EmojiItemsstyled__Wrapper",componentId:"sc-17c7l2s-0"})(["position:relative;"]),CategoryTitle:w.f.div.withConfig({displayName:"EmojiItemsstyled__CategoryTitle",componentId:"sc-17c7l2s-1"})(["width:100%;padding:2px 0 8px;font-weight:600;color:",";",""],Z.a.grey500,J.d.RemSize11),EmojiItem:w.f.div.withConfig({displayName:"EmojiItemsstyled__EmojiItem",componentId:"sc-17c7l2s-2"})(["width:24px;height:24px;margin:0 14px 12px 0;cursor:pointer;background-repeat:no-repeat;background-position:50% 50%;background-size:100%;&:hover{background-color:",";}"],Z.a.grey100),InfiniteScroll:Object(w.f)(Ur).withConfig({displayName:"EmojiItemsstyled__InfiniteScroll",componentId:"sc-17c7l2s-3"})(["position:relative;left:3px;height:206px;text-align:left;"]),InnerWrapper:w.f.div.withConfig({displayName:"EmojiItemsstyled__InnerWrapper",componentId:"sc-17c7l2s-4"})(["display:flex;flex-wrap:wrap;"])};function Gr(e,t){var n=ye()(e);if(we.a){var o=we()(e);t&&(o=Ce()(o).call(o,(function(t){return Ye()(e,t).enumerable}))),n.push.apply(n,o)}return n}function qr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gr(Object(n),!0).forEach((function(t){De()(e,t,n[t])})):_e.a?Object.defineProperties(e,_e()(n)):Gr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Ye()(n,t))}))}return e}function Kr(e){var t=function(){if("undefined"==typeof Reflect||!ge.a)return!1;if(ge.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(ge()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Re()(e);if(t){var r=Re()(this).constructor;n=ge()(o,arguments,r)}else n=o.apply(this,arguments);return Fe()(this,n)}}var Vr=Object(w.e)(["width:344px"]),Yr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{handleWidth:!0,handleHeight:!0};return function(n){function o(){return mr(this,o),yr(this,vr(o).apply(this,arguments))}return wr(o,n),br(o,[{key:"render",value:function(){return s.a.createElement(kr,t,s.a.createElement(e,this.props))}}]),o}(l.Component)}(it((Dr=Object(nt.a)(["searchedEmojis","show"]),Wr=Ar=function(e){Te()(n,e);var t=Kr(n);function n(){var e,o;ke()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return o=t.call.apply(t,Ke()(e=[this]).call(e,a)),De()(Se()(o),"state",{cursor:0,lastCursorState:null,loadedSearchedEmojiNum:0}),De()(Se()(o),"emojiNodes",[]),De()(Se()(o),"scrollParent",s.a.createRef()),De()(Se()(o),"preLodedImages",[]),o}return Ee()(n,[{key:"componentDidMount",value:function(){this.preLoadImages()}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.hasAllLoaded,o=this.state.cursor;if(t.cursor!==o){var r=this.getEmojiNode(),a=null==r?void 0:r.offsetParent;if(r&&a){var i=r.getBoundingClientRect().top-a.getBoundingClientRect().top,l=i+r.scrollHeight;i<0?a.scrollTop+=i:l>a.clientHeight&&(a.scrollTop+=l-a.clientHeight)}else o>=0&&!n&&this.scrollParent.current&&this.scrollParent.current.scrollDown(44)}}},{key:"getEmojiNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.cursor;return B()(this.emojiNodes[e])?null:this.emojiNodes[e].current}},{key:"getEmojisPerRow",value:function(){var e,t=null===(e=this.scrollParent.current)||void 0===e?void 0:e.getClientWidth();return t?Math.floor((t-6)/42):O.a.EMOJIS_PER_ROW}},{key:"preLoadImages",value:function(){var e,t,n=this.props,o=n.categoryIndex,r=n.emojiIndex,a=n.categories,i=O.b.emojiMap,l=O.b.emojiInfo,s=rr()(e=O.b.getFequentlyUsedEmojiList()).call(e,(function(e){var t=e.k;return i[t]})),c=xn()(t=nr()(a,0,o)).call(t,(function(e,t,n){if(o<n)return e;var a=n===o-1?nr()(l[t],0,r):l[t];return Ke()(e).call(e,a)}),s);this.preLodedImages=rr()(c).call(c,(function(e){var t=new Image;return t.src=O.b.getImageUrl(e.n),t}))}},{key:"changeCursor",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.props,a=r.disableLoading,i=r.onCursorUnderBounded;if(e>=0){var l=e;a&&l>=this.emojiNodes.length&&(l=this.emojiNodes.length-1),this.setState({cursor:l},n)}else this.setState((function(e){return null===e.lastCursorState||e.cursor>=0?qr(qr({},e),{},{cursor:-1,lastCursorState:e.cursor}):qr(qr({},e),{},{cursor:-1})}),(function(){t.scrollParent.current&&o&&(t.scrollParent.current.scrollToTop(),i()),n&&n()}))}},{key:"loadMoreSearchedEmojis",value:function(){var e=this.props.searchedEmojis,t=this.state.loadedSearchedEmojiNum;return this.setState({loadedSearchedEmojiNum:Math.min(t+35,(null==e?void 0:e.size)||0)}),Go.a.resolve()}},{key:"handleFocusChanged",value:function(e){var t=this,n=this.state.lastCursorState;e?this.changeCursor(B()(n)?0:n,(function(){t.setState({lastCursorState:null})}),!1):this.changeCursor(-1,void 0,!1)}},{key:"handleUpKey",value:function(e){e&&e.preventDefault();var t=this.state.cursor,n=this.getEmojisPerRow(),o=this.getEmojiNode();if(o){var r,a=er()(o.getAttribute("data-ri")),i=t-a-1,l=this.getEmojiNode(i);if(l){var s=er()(l.getAttribute("data-ri"));r=s<a?t-n-s-1:t-s-1,this.getEmojiNode(r)||(r=i)}else r=t-n;this.changeCursor(r)}}},{key:"handleDownKey",value:function(e){e&&e.preventDefault();var t=this.state.cursor,n=this.getEmojisPerRow();if(t<0)this.changeCursor(0);else{var o=this.getEmojiNode();if(o){var r=t+n,a=this.getEmojiNode(t+n);if(a)r=t+n+(Number(o.getAttribute("data-ri"))-Number(a.getAttribute("data-ri")));this.changeCursor(r)}}}},{key:"handleLeftKey",value:function(e){var t=this.state.cursor;e&&e.preventDefault(),this.changeCursor(t-1)}},{key:"handleRightKey",value:function(e){var t=this.state.cursor;e&&e.preventDefault(),this.getEmojiNode(t+1)&&this.changeCursor(t+1)}},{key:"handleEnter",value:function(e){var t=this.props.onSelectEmojiByEnter;e&&e.preventDefault();var n=this.getEmojiNode();if(n){var o=n.getAttribute("data-emoji-key");o&&t(e,o)}}},{key:"renderCategoryTitle",value:function(e){return s.a.createElement(Hr.CategoryTitle,{key:e},e)}},{key:"renderEmojiItem",value:function(e,t,n,o){var r,a=this.state.cursor,i=O.b.getImageUrl(e.n),l={backgroundImage:"url('".concat(i,"')")};return B()(this.emojiNodes[n])&&(this.emojiNodes[n]=s.a.createRef()),s.a.createElement(Hr.EmojiItem,{ref:this.emojiNodes[n],key:Ke()(r="".concat(t,":")).call(r,e.n),title:e.n,"data-index":n,"data-emoji-key":e.n,"data-ri":o,highlight:n===a,style:l})}},{key:"renderEmojiItems",value:function(){var e=this,t=this.props,n=t.categoryIndex,o=t.emojiIndex,r=t.translate,a=t.categories,i=O.b.emojiMap,l=O.b.emojiInfo,c=this.getEmojisPerRow(),u=[],d=0,p=O.b.getFequentlyUsedEmojiList();if(!L()(p)){var f="Frequently used",h=0;u.push(s.a.createElement(Hr.CategoryTitle,{key:"".concat(f)},r("ch.emoji_selector.category.frequently_used"))),p.forEach((function(t){var n=t.k;u.push(e.renderEmojiItem(i[n],f,d,h%c)),d+=1,h+=1}))}return nr()(a,0,n).forEach((function(t,a){n<a||(u.push(s.a.createElement(Hr.CategoryTitle,{key:t},r("ch.emoji_selector.category.".concat(t)))),(a===n-1?nr()(l[t],0,o):l[t]).forEach((function(n,o){u.push(e.renderEmojiItem(n,t,d,o%c)),d+=1})))})),u}},{key:"renderSearchedEmojiItems",value:function(){var e=this,t=this.props.searchedEmojis,n=this.state.loadedSearchedEmojiNum,o=this.getEmojisPerRow(),r=[];return $t.c.List.isList(t)&&qt()(t).call(t,0,n).forEach((function(t,n){r.push(e.renderEmojiItem(t,null,n,n%o))})),r}},{key:"render",value:function(){var e=this,t=this.props,n=t.disableLoading,o=t.toUp,r=t.loadMore,a=t.searchedEmojis,i=t.wrapperRef,l=t.show,c=this.state.loadedSearchedEmojiNum,u=$t.c.List.isList;return s.a.createElement(ar.HotKeys,{onFocus:function(){return e.handleFocusChanged(!0)},onBlur:function(){return e.handleFocusChanged(!1)},keyMap:{actionUp:"up",actionDown:"down",actionLeft:"left",actionRight:"right",actionEnter:"enter"},handlers:{actionUp:this.handleUpKey,actionDown:this.handleDownKey,actionLeft:this.handleLeftKey,actionRight:this.handleRightKey,actionEnter:this.handleEnter}},s.a.createElement(Hr.Wrapper,{ref:i,tabIndex:0},u(a)?s.a.createElement(Hr.InfiniteScroll,{ref:this.scrollParent,toUp:o,showLoader:!1,onLoadMore:this.loadMoreSearchedEmojis,hasMore:l&&c<a.size,threshold:100,scrollBarInterpolation:Vr},s.a.createElement(Hr.InnerWrapper,null,this.renderSearchedEmojiItems())):s.a.createElement(Hr.InfiniteScroll,{ref:this.scrollParent,toUp:o,showLoader:!1,onLoadMore:r,hasMore:!n,threshold:100,scrollBarInterpolation:Vr},s.a.createElement(Hr.InnerWrapper,null,this.renderEmojiItems()))))}}],[{key:"getDerivedStateFromProps",value:function(e,t,n){var o={lastCursorState:null};return $t.c.is(n.searchedEmojis,e.searchedEmojis)||(o.loadedSearchedEmojiNum=0),n.show&&!e.show&&(o.cursor=0),o}},{key:"getEmojiKey",value:function(e,t){var n;return Ke()(n="".concat(e,":")).call(n,t)}}]),n}(s.a.PureComponent),De()(Ar,"defaultProps",{searchedEmojis:null,disableLoading:!1,toUp:!1,hasAllLoaded:!1,wrapperRef:Wt.a,onSelectEmojiByEnter:Wt.a,onCursorUnderBounded:Wt.a}),zr=Wr,Ae()(zr,"getDerivedStateFromProps",[Dr],Ye()(zr,"getDerivedStateFromProps"),zr),Ae()(zr.prototype,"getEmojiNode",[Je.a],Ye()(zr.prototype,"getEmojiNode"),zr.prototype),Ae()(zr.prototype,"getEmojisPerRow",[Je.a],Ye()(zr.prototype,"getEmojisPerRow"),zr.prototype),Ae()(zr.prototype,"changeCursor",[Je.a],Ye()(zr.prototype,"changeCursor"),zr.prototype),Ae()(zr.prototype,"loadMoreSearchedEmojis",[Je.a],Ye()(zr.prototype,"loadMoreSearchedEmojis"),zr.prototype),Ae()(zr.prototype,"handleFocusChanged",[Je.a],Ye()(zr.prototype,"handleFocusChanged"),zr.prototype),Ae()(zr.prototype,"handleUpKey",[Je.a],Ye()(zr.prototype,"handleUpKey"),zr.prototype),Ae()(zr.prototype,"handleDownKey",[Je.a],Ye()(zr.prototype,"handleDownKey"),zr.prototype),Ae()(zr.prototype,"handleLeftKey",[Je.a],Ye()(zr.prototype,"handleLeftKey"),zr.prototype),Ae()(zr.prototype,"handleRightKey",[Je.a],Ye()(zr.prototype,"handleRightKey"),zr.prototype),Ae()(zr.prototype,"handleEnter",[Je.a],Ye()(zr.prototype,"handleEnter"),zr.prototype),zr))),Xr=Object(w.g)(["from{opacity:0.5;transform:translate(0,25px);}to{opacity:1;transform:translate(0,0);}"]),$r={Wrapper:w.f.div.withConfig({displayName:"EmojiSelectorstyled__Wrapper",componentId:"sx3z8t-0"})(["position:relative;display:",";flex-direction:column;width:100%;height:","px;padding:10px 10px ","px;overflow-y:auto;color:",";background-color:",";border-radius:6px;z-index:10;box-shadow:0 -4px 12px ",";animation:"," 0.25s ease-out;"],(function(e){return e.show?"flex":"none"}),260+kn.g+kn.h,kn.g+kn.h,Z.a.white,Z.a.white,(function(e){var t;return null===(t=e.theme.foundationTheme)||void 0===t?void 0:t["bg-black-lighter"]}),Xr),Input:Object(w.f)(so.a).withConfig({displayName:"EmojiSelectorstyled__Input",componentId:"sx3z8t-1"})(["flex-shrink:0;height:36px;padding:0 10px;margin-bottom:8px;font-weight:500;color:",";"," &:focus{border:solid 1px ",";}&::placeholder{color:",";}"],Z.a.grey900,J.d.RemSize15,Z.a.grey200,Z.a.grey500)};var Zr=function(e){var t=e.onClickEmoji,n=e.style,o=e.show,r=e.hideEmojiSelector,a=Object(U.a)().translate,i=Object(l.useState)(""),c=f()(i,2),u=c[0],d=c[1],p=Object(l.useState)(null),h=f()(p,2),m=h[0],g=h[1],b=Object(l.useState)([1,70]),y=f()(b,2),v=y[0],w=y[1],x=f()(v,2),C=x[0],_=x[1],j=Object(l.useRef)(null),k=Object(l.useRef)(null),I=Object(nn.a)(o),E=Object(l.useCallback)(P()((function(e,t){e&&t($t.c.List(Uo()(O.b.emojiArray,(function(t){return Ao()(t.n,e)||Do()(t.k,(function(t){return Ao()(t,e)}))}))))}),300,{trailing:!0}),[]),M=Object(l.useCallback)((function(){j.current&&j.current.focus()}),[]),S=Object(l.useCallback)((function(e){if(e.target){var n=e.target.getAttribute("data-emoji-key");n&&(O.b.updateUsage(n),t(n))}}),[t]),N=Object(l.useCallback)((function(e,n){e.preventDefault(),O.b.updateUsage(n),t(n)}),[t]),T=Object(l.useCallback)((function(e){var t=e.target.value;d(t),t?E(t,g):(g(null),E.cancel())}),[E]),B=Object(l.useCallback)((function(e){"ArrowDown"===e.key&&k.current&&(e.preventDefault(),k.current.focus())}),[]),F=Object(l.useCallback)((function(){var e=Ro()(O.b.emojiInfo[qo[C-1]]),t=e<_+O.a.LOAD_AMOUNT?qo.length>C?[C+1,O.a.LOAD_AMOUNT]:[C,e]:[C,_+O.a.LOAD_AMOUNT];return w(t),Go.a.resolve()}),[C,_]),R=Object(l.useMemo)((function(){return Ro()(O.b.emojiInfo[qo[C-1]])}),[C]),L=Object(l.useMemo)((function(){return qo.length===C&&R===_}),[R,C,_]);return Object(l.useEffect)((function(){o&&(d(""),g(null),w([1,70]))}),[o]),Object(l.useEffect)((function(){!I&&o&&k.current&&k.current.focus()}),[I,o]),s.a.createElement(Ko.a,{onRootClose:r,disabled:!o},s.a.createElement($r.Wrapper,{onClick:S,style:n,show:o},s.a.createElement($r.Input,{ref:j,type:"text",placeholder:a("ch.emoji_selector.search_input.placeholder"),value:u,onChange:T,onKeyDown:B}),null!=m&&m.isEmpty()?s.a.createElement(Jo,{message:a("ch.emoij_selector.empty_content.description")}):s.a.createElement(Yr,{wrapperRef:k,toUp:!1,show:o,categories:qo,hasAllLoaded:L,searchedEmojis:m,loadMore:F,categoryIndex:C,emojiIndex:_,disableLoading:!(!L&&!u&&o),onSelectEmojiByEnter:N,onCursorUnderBounded:M})))},Jr=n(294),Qr=n(451),ea=n.n(Qr),ta=w.f.div.withConfig({displayName:"LinearProgressstyled__BaseBar",componentId:"sc-6z22mx-0"})(["height:6px;border-radius:4px;"]),na={BackgroundBar:Object(w.f)(ta).withConfig({displayName:"LinearProgressstyled__BackgroundBar",componentId:"sc-6z22mx-1"})(["position:relative;width:auto;overflow:hidden;background-color:",";"],Z.a.grey300),ProgressBar:Object(w.f)(ta).withConfig({displayName:"LinearProgressstyled__ProgressBar",componentId:"sc-6z22mx-2"})(["position:absolute;top:0;left:-100%;transform:translateX(","%);width:100%;height:100%;transition:left 0.2s ease-in-out;background-color:",";"],(function(e){return e.percentage}),Z.a.blue400)};function oa(e){var t=e.ratio,n=ea()(Math.floor(100*t),0,100);return s.a.createElement(na.BackgroundBar,null,s.a.createElement(na.ProgressBar,{percentage:n}))}var ra=n(496),aa={FileList:w.f.div.withConfig({displayName:"FileListstyled__FileList",componentId:"vbggwd-0"})(["width:100%;background-color:",";"],Z.a.white),ThumbnailWrapper:w.f.div.withConfig({displayName:"FileListstyled__ThumbnailWrapper",componentId:"vbggwd-1"})(["width:40px;height:40px;overflow:hidden;border:solid 1px ",";border-radius:4px;"],Z.a.black10),ImageThumbnail:w.f.div.withConfig({displayName:"FileListstyled__ImageThumbnail",componentId:"vbggwd-2"})(["width:100%;height:100%;background-image:url(",");background-position:center;background-size:cover;"],(function(e){return e.image})),FileThumbnail:w.f.div.withConfig({displayName:"FileListstyled__FileThumbnail",componentId:"vbggwd-3"})(["display:flex;align-items:center;justify-content:center;width:100%;height:100%;background-color:white;&::after{width:100%;height:100%;content:'';background:no-repeat center/contain url(\"",'");}'],(function(e){return ra.a.getFileIconUrl(e.ext)})),Item:w.f.div.withConfig({displayName:"FileListstyled__Item",componentId:"vbggwd-4"})(["position:relative;width:100%;height:52px;padding:6px 12px;"]),ItemThumb:w.f.div.withConfig({displayName:"FileListstyled__ItemThumb",componentId:"vbggwd-5"})(["position:absolute;top:6px;left:12px;"]),ItemContent:w.f.div.withConfig({displayName:"FileListstyled__ItemContent",componentId:"vbggwd-6"})(["display:flex;flex-direction:column;justify-content:center;height:40px;padding-right:38px;padding-left:50px;overflow:hidden;& >:not(:last-child){margin-bottom:6px;}"]),TitleWrapper:w.f.div.withConfig({displayName:"FileListstyled__TitleWrapper",componentId:"vbggwd-7"})(["display:flex;flex-direction:row;overflow:hidden;"," font-weight:bold;color:",";"],J.d.RemSize12,Z.a.grey900),Title:w.f.div.withConfig({displayName:"FileListstyled__Title",componentId:"vbggwd-8"})(["flex:1 0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"]),Description:w.f.span.withConfig({displayName:"FileListstyled__Description",componentId:"vbggwd-9"})(["flex:0 0;min-width:50px;overflow:hidden;color:",";text-overflow:ellipsis;word-break:keep-all;white-space:nowrap;"],Z.a.grey500),ItemActions:w.f.div.withConfig({displayName:"FileListstyled__ItemActions",componentId:"vbggwd-10"})(["position:absolute;top:14px;right:10px;display:flex;align-items:center;& > *{margin-left:14px;}"])};function ia(e){var t=e.title,n=e.thumbnail,o=e.description,r=e.sendingRatio,a=e.actions,i=Object(l.useMemo)((function(){return s.a.createElement(aa.ItemThumb,null,s.a.createElement(aa.ThumbnailWrapper,null,n))}),[n]),c=Object(l.useMemo)((function(){return s.a.createElement(aa.ItemContent,null,s.a.createElement(aa.TitleWrapper,null,s.a.createElement(aa.Title,null,t),o?s.a.createElement(aa.Description,null,o):null),B()(r)?null:s.a.createElement(oa,{ratio:r}))}),[t,o,r]),u=Object(l.useMemo)((function(){return s.a.createElement(aa.ItemActions,null,a)}),[a]);return s.a.createElement(aa.Item,null,i,c,u)}function la(e){var t=e.localFile,n=e.description,o=e.onCancel,r=e.onRemove,a=e.onRetry,i=Object(l.useState)(null),c=f()(i,2),u=c[0],d=c[1],p=Object(l.useMemo)((function(){return t.isPreviewable()}),[t]),h=Object(U.a)().translate;Object(l.useEffect)((function(){p?t.getPreviewThumb().then((function(e){d(s.a.createElement(aa.ImageThumbnail,{image:e.url}))})).catch((function(){d(null)})):d(s.a.createElement(aa.FileThumbnail,{ext:t.getExt()}))}),[p]);var m=Object(l.useMemo)((function(){return s.a.createElement(Y.b,{name:"cancel-small",size:Y.a.Normal,onClick:function(){return o(t)}})}),[t,o]),g=Object(l.useMemo)((function(){return s.a.createElement(Y.b,{name:"cancel-small",size:Y.a.Normal,onClick:function(){return r(t)}})}),[t,r]),y=Object(l.useMemo)((function(){return s.a.createElement(Y.b,{withHover:!0,name:"refresh-circle-filled",size:Y.a.Normal,defaultOpacity:1,onClick:function(){return a(t)}})}),[t,a]);switch(t.state){case Jr.a.Sending:return s.a.createElement(ia,{title:b()(t,"blob.name","Default"),thumbnail:u,description:n,sendingRatio:t.sendingRatio,actions:m});case Jr.a.Failed:return s.a.createElement(ia,{title:h("ch.file_upload.fail"),thumbnail:u,actions:s.a.createElement(s.a.Fragment,null,y,g)});case Jr.a.Waiting:default:return null}}function sa(e){var t,n=e.localFiles,o=e.onCancel,r=e.onRemove,a=e.onRetry,i=n.sending.size>0?n.sending.first():null,l=n.waiting.size,c=Object(U.a)().translate,u=l>0?c("ch.file_upload.wait_count",l):"";return s.a.createElement(aa.FileList,null,rr()(t=n.failed).call(t,(function(e){return s.a.createElement(la,{key:e.id,localFile:e,onCancel:o,onRemove:r,onRetry:a})})),i?s.a.createElement(la,{key:i.id,localFile:i,onCancel:o,onRemove:r,onRetry:a,description:u}):null)}var ca={Wrapper:w.f.div.withConfig({displayName:"NewMessageAlertstyled__Wrapper",componentId:"bijr0f-0"})(["position:",";display:",";align-items:center;justify-content:center;width:48px;height:48px;cursor:pointer;background-color:",";border-radius:42%;box-shadow:0 3px 12px 0 ",";transition:box-shadow 0.2s ease-out;"," &:hover{box-shadow:0 6px 16px 0 ",";}"],D.a.isPhone()?"fixed":"absolute",(function(e){return e.show?"flex":"none"}),Z.a.white,Z.a.grey300,(function(e){var t=e.isFocus;return D.a.isApplePhone()&&t?Object(w.e)(["top:","px;margin-top:8px;"],kn.c):Object(w.e)(["bottom:","px;margin-bottom:8px;"],kn.g+kn.h)}),Z.a.grey300)};var ua=function(e){var t=e.className,n=e.show,o=e.message,r=void 0===o?null:o,a=Object(on.a)().infiniteScrollRef,i=un().textAreaRef,c=Object(l.useState)(!1),u=f()(c,2),d=u[0],p=u[1],h=Object(A.a)("message"),m=Object(l.useCallback)((function(){if(d)return i.current&&i.current.focus(),void setTimeout((function(){var e,t,n=(null!==(e=null===(t=document.scrollingElement)||void 0===t?void 0:t.scrollHeight)&&void 0!==e?e:window.innerHeight+window.scrollY)-b()(window,"visualViewport.height",window.innerHeight);window.scrollTo(0,n)}),0);if(D.a.isApplePhone()){var e,t,n=(null!==(e=null===(t=document.scrollingElement)||void 0===t?void 0:t.scrollHeight)&&void 0!==e?e:window.innerHeight+window.scrollY)-b()(window,"visualViewport.height",window.innerHeight);window.scrollTo(0,n)}else a.current&&a.current.scrollToBottom({smoothScroll:!0});i.current&&i.current.focus()}),[a,d,i]),g=Object(l.useMemo)((function(){if(!B()(r)){var e=h(r).avatarUrl;return s.a.createElement($.a,{size:40,url:e})}return s.a.createElement(Y.b,{name:"keyboard",width:24,height:24,size:Y.a.Normal,defaultOpacity:1})}),[h,r]);return Object(l.useEffect)((function(){var e;n&&D.a.isPhone()&&p("TEXTAREA"===(null===(e=document.activeElement)||void 0===e?void 0:e.tagName))}),[n]),s.a.createElement(ca.Wrapper,{className:t,show:n,isFocus:d,onClick:m},g)},da=n(474),pa=w.f.div.withConfig({displayName:"ChannelDescriptionstyled__Wrapper",componentId:"sc-1nrmoay-0"})(["display:flex;flex-direction:column;align-items:center;padding-top:24px;"]),fa=w.f.div.withConfig({displayName:"ChannelDescriptionstyled__TextWrapper",componentId:"sc-1nrmoay-1"})(["display:flex;flex-direction:column;align-items:center;padding:0 14px;margin-top:18px;"]),ha=w.f.div.withConfig({displayName:"ChannelDescriptionstyled__Title",componentId:"sc-1nrmoay-2"})(["font-weight:bold;color:",";"," ",""],(function(e){return e.theme.foundationTheme["txt-black-darkest"]}),kn.o,J.d.RemSize18),ma=w.f.div.withConfig({displayName:"ChannelDescriptionstyled__Description",componentId:"sc-1nrmoay-3"})(["padding:0 10px;margin-top:4px;font-weight:500;color:",";text-align:center;"," ",""],(function(e){return e.theme.foundationTheme["txt-black-dark"]}),kn.o,J.d.RemSize15),ga=w.f.div.withConfig({displayName:"ChannelDescriptionstyled__Status",componentId:"sc-1nrmoay-4"})(["display:flex;align-items:center;height:22px;margin-top:4px;overflow:hidden;"]),ba=w.f.div.withConfig({displayName:"ChannelDescriptionstyled__ResponseDelay",componentId:"sc-1nrmoay-5"})(["margin-left:4px;font-weight:500;color:",";",""],(function(e){return e.theme.foundationTheme["txt-black-darker"]}),J.d.RemSize13);var ya=function(){var e,t=Object(U.a)().translate,n=Object(W.a)(),o=null!==(e=Object(H.a)(n))&&void 0!==e?e:t("ch.chat.expect_response_delay.out_of_working"),r=Object(da.a)();return s.a.createElement(pa,null,s.a.createElement($.a,{size:96,url:n.getAvatarUrl()}),s.a.createElement(fa,null,s.a.createElement(ha,null,t("ch.channel.contact",n.getName(r))),n.getDescription(r)&&s.a.createElement(ma,null,n.getDescription(r)),s.a.createElement(ga,null,s.a.createElement(Y.b,{name:n.getStatusIconName(),defaultOpacity:1,size:14}),s.a.createElement(ba,null,o))))},va=n(493),wa=n.n(va),xa=n(1440),Ca=n.n(xa),Oa=n(1447),_a=n.n(Oa),ja=n(1450),ka=n.n(ja),Ia=n(1452),Ea=n.n(Ia),Ma=n(624),Sa=n(485),Na=n(620),Ta=n(283),Ba=n(1313),Fa=w.f.div.withConfig({displayName:"ReactionModalItemstyled__ModalItem",componentId:"gj6sb3-0"})(["display:flex;align-items:center;height:32px;padding-left:11px;"]),Pa=w.f.div.withConfig({displayName:"ReactionModalItemstyled__ModalItemText",componentId:"gj6sb3-1"})(["width:243px;padding:0 10px 0 8px;overflow:hidden;"," color:",";text-overflow:ellipsis !important;white-space:nowrap;"],J.d.RemSize14,Z.a.grey900),Ra={ModalItem:Fa,ModalItemText:Pa,ModalItemCountText:Object(w.f)(Pa).withConfig({displayName:"ReactionModalItemstyled__ModalItemCountText",componentId:"gj6sb3-2"})(["font-weight:bold;color:",";"],Z.a.grey900)};var La=function(e){var t=e.reaction,n=Object(u.d)((function(e){return Na.a.getReactors(e,t.personKeys)})),o=Object(A.a)("person");return s.a.createElement(s.a.Fragment,null,s.a.createElement(Ra.ModalItem,null,s.a.createElement(Ba.a,{size:Ta.a.LARGE,name:t.emojiName}),s.a.createElement(Ra.ModalItemCountText,null,t.getCount())),rr()(n).call(n,(function(e){var t=o(e),n=t.avatarUrl,r=t.name;return s.a.createElement(Ra.ModalItem,{key:e.id},s.a.createElement($.a,{size:24,url:n}),s.a.createElement(Ra.ModalItemText,null,r))})))},Da=n(472),za=w.f.div.withConfig({displayName:"ReactionModalstyled__ModalHeader",componentId:"sc-7y8vwl-0"})(["display:flex;align-items:center;width:100%;height:36px;padding:0 6px 0 14px;"]),Aa=w.f.span.withConfig({displayName:"ReactionModalstyled__ModalTitle",componentId:"sc-7y8vwl-1"})([""," color:",";"],J.d.RemSize14,Z.a.grey500),Wa={ModalHeader:za,ModalTitle:Aa,ModalTitleCount:Object(w.f)(Aa).withConfig({displayName:"ReactionModalstyled__ModalTitleCount",componentId:"sc-7y8vwl-2"})(["margin-left:8px;font-weight:bold;"]),CancelIconWrapper:w.f.div.withConfig({displayName:"ReactionModalstyled__CancelIconWrapper",componentId:"sc-7y8vwl-3"})(["display:flex;align-items:center;justify-content:center;width:24px;height:24px;margin-left:auto;border-radius:12px;background-color:",";"],Z.a.black5),ModalContent:w.f.div.withConfig({displayName:"ReactionModalstyled__ModalContent",componentId:"sc-7y8vwl-4"})(["padding-bottom:4px;max-height:388px;overflow-y:scroll;"]),Divider:w.f.div.withConfig({displayName:"ReactionModalstyled__Divider",componentId:"sc-7y8vwl-5"})(["height:1px;margin:6px 0;background-color:",";"],Z.a.grey300)};var Ua=function(e){var t=e.reactions,n=e.count,o=Object(U.a)().translate;return s.a.createElement(s.a.Fragment,null,s.a.createElement(Wa.ModalHeader,null,s.a.createElement(Wa.ModalTitle,null,o("ch.userchat.reaction.modal_title"),s.a.createElement(Wa.ModalTitleCount,null,Object(Jn.c)(n))),s.a.createElement(Wa.CancelIconWrapper,{onClick:Da.c.hide},s.a.createElement(Y.b,{name:"cancel",size:Y.a.XSmall,defaultOpacity:1}))),s.a.createElement(Wa.ModalContent,null,null==t?void 0:rr()(t).call(t,(function(e,t){return s.a.createElement(s.a.Fragment,null,0!==t&&s.a.createElement(Wa.Divider,null),s.a.createElement(La,{key:e.getKey(),reaction:e}))}))))},Ha=n(1333),Ga={reactionModal:{width:280,maxHeight:424,borderRadius:12,boxShadow:"0 2px 6px 0 ".concat(Z.a.black10),overflow:"hidden"},messageDeleteModal:{width:280}};var qa=function(e){var t=e.message,n=e.showImageGallery,o=Object(u.c)(),r=Object(Ha.a)(),a=Object(u.d)(Ma.a.getManagerIds);Object(l.useEffect)((function(){r(t,Sa.a.View)}),[]);var i=Object(l.useCallback)((function(){r(t,Sa.a.Click)}),[t,r]),c=Object(l.useCallback)((function(e){n(e),i()}),[n,i]),d=Object(l.useCallback)((function(){i()}),[i]),p=Object(l.useCallback)((function(e){var t=e.target.tagName;"a"!==t&&"A"!==t||i()}),[i]),f=Object(l.useMemo)((function(){var e;return ka()(null===(e=t.reactions)||void 0===e?void 0:rr()(e).call(e,(function(e){return e.getCount()})))}),[t]),h=Object(l.useCallback)(Ca()(Ea.a.mark((function e(){var n,r,i;return Ea.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i={managerIds:_a.a.apply(null,Ke()(n=[null==t?void 0:t.getReactorIds().toArray()]).call(n,Sn()(a)))},0===(null===(r=i.managerIds)||void 0===r?void 0:r.length)){e.next=5;break}return e.next=5,o(x.a.userChatActions.requestGetReactors(i)).promise;case 5:Da.c.show({content:s.a.createElement(Ua,{reactions:t.reactions,count:f}),style:Ga.reactionModal}),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])}))),[o,a,t,f]);return{sendClickEvent:i,handleImageClick:c,handleMarketingEvent:d,handleClickMessage:p,reactionTotalCount:f,handleShowReactorModal:h}},Ka=n(1322),Va=n(171),Ya=n(1306),Xa={Wrapper:w.f.div.withConfig({displayName:"Reactionstyled__Wrapper",componentId:"sc-18sjftw-0"})(["display:flex;align-items:center;max-width:92px;height:","px;padding:2px 6px 2px 4px;cursor:pointer;background-color:",";border-radius:12px;box-shadow:0 0 0 2px ",";transform:translateY(-2px);&:hover{background-color:",";}"],22,Z.a.grey100,Z.a.white,Z.a.grey300),Count:w.f.div.withConfig({displayName:"Reactionstyled__Count",componentId:"sc-18sjftw-1"})(["padding-left:2px;"," color:",";"],J.d.RemSize13,Z.a.txt_black_dark)};var $a=function(e){var t=e.reactions,n=e.count,o=e.showReactionModal,r=Object(l.useMemo)((function(){var e;return null==t?void 0:rr()(e=qt()(t).call(t,0,3)).call(e,(function(e){return":".concat(e.emojiName,":")})).join("")}),[t]);return s.a.createElement(Xa.Wrapper,{onClick:o},Object(Ya.a)(r),s.a.createElement(Xa.Count,null,Object(Jn.c)(n)))},Za=n(1336),Ja=n(475),Qa={Wrapper:w.f.div.withConfig({displayName:"Videostyled__Wrapper",componentId:"sc-1npi77x-0"})(["width:","px;"],(function(e){return e.width})),VideoWrapper:w.f.div.withConfig({displayName:"Videostyled__VideoWrapper",componentId:"sc-1npi77x-1"})(["position:relative;width:","px;height:","px;overflow:hidden;border:solid 1px ",";border-radius:16px;",""],(function(e){return e.width}),(function(e){return e.height}),Z.a.grey300,(function(e){return e.interpolation})),Overlay:w.f.div.withConfig({displayName:"Videostyled__Overlay",componentId:"sc-1npi77x-2"})(["position:absolute;top:0;right:0;bottom:0;left:0;display:flex;align-items:center;justify-content:center;"]),PlayIcon:Object(w.f)(Y.b).withConfig({displayName:"Videostyled__PlayIcon",componentId:"sc-1npi77x-3"})(["width:36px;height:36px;margin:8px;background-color:",";border-radius:8px;"],Z.a.bg_black_darkest),DownloadLink:Object(w.f)(Ja.a).withConfig({displayName:"Videostyled__DownloadLink",componentId:"sc-1npi77x-4"})(["display:inline-flex;align-items:center;margin:4px 0;"," color:",";cursor:pointer;& > div{opacity:0.6;}&:hover{color:",";& > div{opacity:1;}}"],J.d.RemSize12,Z.a.grey500,Z.a.grey900),DownloadIcon:Object(w.f)(Y.b).withConfig({displayName:"Videostyled__DownloadIcon",componentId:"sc-1npi77x-5"})(["margin-right:4px;"])};var ei=function(e){var t=e.className,n=e.file,o=e.interpolation,r=e.onEvent,a=void 0===r?Wt.a:r,i=e.onMouseOver,c=void 0===i?Wt.a:i,u=e.onMouseLeave,d=void 0===u?Wt.a:u,p=Object(l.useRef)(null),h=Object(l.useState)(!0),m=f()(h,2),g=m[0],b=m[1],y=Object(l.useMemo)((function(){var e=Object(Va.c)({width:n.width,height:n.height}),t=e.width,o=e.height;return{width:t,height:o,url:n.getThumbUrl(2*t,2*o)}}),[n]),v=Object(Za.a)(n.isPrivateFile()&&y.url||void 0),w=f()(v,1)[0],x=Object(Za.a)(n.isPrivateFile()&&n.getUrl()||void 0),C=f()(x,1)[0],O=Object(l.useCallback)((function(){p.current&&p.current.play()}),[]),_=Object(l.useCallback)((function(){b(!1),a()}),[a]),j=Object(l.useCallback)(P()((function(){a()}),100,{trailing:!0}),[a]),k=Object(l.useMemo)((function(){return s.a.createElement(Qa.Overlay,null,s.a.createElement(Qa.PlayIcon,{name:"play",size:20,onClick:O,defaultOpacity:1}))}),[O]);return s.a.createElement(Qa.Wrapper,{className:t,width:y.width,onMouseOver:c,onMouseLeave:d},s.a.createElement(Qa.VideoWrapper,{width:y.width,height:y.height,interpolation:o},s.a.createElement("video",{playsInline:!0,controls:!g,width:y.width,height:y.height,poster:n.isPrivateFile()?w:y.url,src:n.isPrivateFile()?C:n.getUrl(),onPlay:_,onSeeked:j,onPause:a,onVolumeChange:a,ref:p}),g?k:null))};var ti=function(e){var t=e.file,n=e.children,o=Object(l.useCallback)((function(e){e.stopPropagation(),et.a.downloadMedia(t)}),[t]);return t.isPrivateFile()?s.a.createElement(Ja.a,{onClick:o},n):s.a.createElement(Ja.a,{download:!0,target:"_blank",href:t.getUrl(),rel:"noopener noreferrer"},n)},ni=n(1314),oi=n(476),ri=n(477),ai=n(205),ii=n(135),li=n(237),si=n.n(li),ci=n(630),ui=n.n(ci),di=function(e){return e.fileIconReducer.fetching},pi=Object(w.f)(Y.b).withConfig({displayName:"FileNodestyled__DownloadIcon",componentId:"ezh8wp-0"})(["margin:0 11px;cursor:pointer;opacity:0.4;"]),fi={Link:Object(w.f)(Ja.a).withConfig({displayName:"FileNodestyled__Link",componentId:"ezh8wp-1"})(["position:relative;display:flex;align-items:center;width:228px;height:66px;pointer-events:",";cursor:pointer;background-color:",";border-radius:16px;&:hover{background-color:",";}&:hover ","{opacity:0.6;}"],(function(e){return e.disabled?"none":"auto"}),(function(e){return e.theme.foundationTheme["bg-black-lightest"]}),(function(e){return e.theme.foundationTheme["bg-black-lighter"]}),pi),FileIcon:w.f.img.withConfig({displayName:"FileNodestyled__FileIcon",componentId:"ezh8wp-2"})(["margin:0 12px 0 14px;"]),Content:w.f.div.withConfig({displayName:"FileNodestyled__Content",componentId:"ezh8wp-3"})(["flex-basis:0;flex-grow:1;flex-shrink:1;overflow:hidden;color:",";text-align:left;"],Z.a.grey900),Title:w.f.div.withConfig({displayName:"FileNodestyled__Title",componentId:"ezh8wp-4"})(["height:22px;"," overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"],J.d.RemSize15),Meta:w.f.div.withConfig({displayName:"FileNodestyled__Meta",componentId:"ezh8wp-5"})(["height:22px;"," overflow:hidden;color:",";text-overflow:ellipsis;white-space:nowrap;"],J.d.RemSize13,(function(e){return e.theme.foundationTheme["txt-black-dark"]})),DownloadIcon:pi},hi=["children"];var mi,gi,bi,yi=function(e){var t,n=e.file,o=e.className,a=e.onClick,i=void 0===a?Wt.a:a,c=e.onMouseOver,d=void 0===c?Wt.a:c,p=e.onMouseLeave,f=void 0===p?Wt.a:p,h=Object(u.c)(),m=Object(u.d)(di);Object(l.useEffect)((function(){ra.a.isEmpty()&&h(x.a.fileIconActions.requestGetFileIconInfo())}),[h]);var g=Object(l.useMemo)((function(){return ra.a.getFileIconUrl(n.getExt())}),[n,m]),b=Object(l.useCallback)((function(e){e.stopPropagation(),i(),et.a.downloadMedia(n)}),[n,i]),y=Object(l.useCallback)((function(e){var t=e.children,a=si()(e,hi);return n.isPrivateFile()?s.a.createElement(fi.Link,r()({},a,{className:o,disabled:n.isEmpty(),onClick:b}),t):s.a.createElement(fi.Link,{className:o,disabled:n.isEmpty(),href:n.getUrl(),target:"_blank",download:!0},t)}),[o,n,b]);return s.a.createElement(y,{onMouseOver:d,onMouseLeave:f},s.a.createElement(fi.FileIcon,{src:g,width:40,height:40}),s.a.createElement(fi.Content,null,s.a.createElement(fi.Title,null,n.name),s.a.createElement(fi.Meta,null,Ke()(t="".concat(n.getSize())).call(t,n.hasExt()?" · ".concat(ui()(n.getExt())):""))),s.a.createElement(fi.DownloadIcon,{name:"arrow-down",defaultOpacity:1,size:Y.a.Small}))},vi=n(1454),wi=n.n(vi),xi=n(291),Ci=n(290),Oi=Object(w.f)(gt.a).withConfig({displayName:"Imagestyled__ImageIcon",componentId:"uc2fct-0"})(["position:absolute;right:12px;bottom:12px;cursor:pointer;visibility:hidden;background-color:",";border:2px solid ",";border-radius:50%;&:hover{background-color:",";border-color:",";}"],Z.a.black70,Z.a.white50,Z.a.grey900,Z.a.white),_i={Wrapper:w.f.div.withConfig({displayName:"Imagestyled__Wrapper",componentId:"uc2fct-1"})(["position:relative;box-sizing:border-box;display:flex;align-items:center;justify-content:center;min-width:","px;max-width:","px;min-height:","px;max-height:","px;overflow:hidden;cursor:",";background-clip:padding-box;border:1px solid ",";border-radius:16px;&:hover ","{visibility:visible;}"],Ci.b.width,Ci.a.width,Ci.b.height,Ci.a.height,(function(e){return e.cursor}),Z.a.grey300,Oi),ImageIcon:Oi};function ji(e){var t=function(){if("undefined"==typeof Reflect||!ge.a)return!1;if(ge.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(ge()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Re()(e);if(t){var r=Re()(this).constructor;n=ge()(o,arguments,r)}else n=o.apply(this,arguments);return Fe()(this,n)}}var ki=(bi=gi=function(e){Te()(n,e);var t=ji(n);function n(){var e,o;ke()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return o=t.call.apply(t,Ke()(e=[this]).call(e,a)),De()(Se()(o),"state",{privateThumbImgURL:""}),o}return Ee()(n,[{key:"componentDidMount",value:function(){var e=this;this.props.file.isPrivateFile()&&et.a.getMedia(this.getPreviewThumb().url).then((function(t){return e.setState({privateThumbImgURL:t})}))}},{key:"getCursor",value:function(){return this.props.file.isEmpty()?"default":"zoom-in"}},{key:"getPreviewThumb",value:function(){var e=this.props,t=e.file;if(e.keepRatio){var n=Object(Va.c)({width:t.width,height:t.height}),o=n.width,r=n.height,a=t.isPossiblyAnimated()?t.getUrl():t.getThumbUrl(2*o,2*r,"inside");return!B()(t.orientation)&&Ao()([xi.a.VerticalFlipRotate90,xi.a.Rotate90,xi.a.HorizontalFlipRotate90,xi.a.Rotate270],t.orientation)?{width:r,height:o,url:a}:{width:o,height:r,url:a}}return{width:110,height:110,url:t.isPossiblyAnimated()?t.getUrl():t.getThumbUrl(220,220)}}},{key:"handleClickImage",value:function(){var e=this.props,t=e.file,n=e.onClick;!t.isEmpty()&&t.id&&n(t.id)}},{key:"handleDownloadImage",value:function(e){e.stopPropagation();var t=this.props.file;et.a.downloadMedia(t)}},{key:"renderDownloadButton",value:function(){var e=this.props.file;return e.isEmpty()?null:e.isPrivateFile()?s.a.createElement("div",{onClick:this.handleDownloadImage},s.a.createElement(_i.ImageIcon,{name:"image-download",width:34,height:34,size:16})):s.a.createElement(Ja.a,{download:!0,target:"_blank",href:e.getUrl(),onClick:function(e){return e.stopPropagation()}},s.a.createElement(_i.ImageIcon,{name:"image-download",width:34,height:34,size:16}))}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.file,o=e.onMouseOver,r=e.onMouseLeave,a=this.state.privateThumbImgURL,i=this.getPreviewThumb(),l={width:"".concat(i.width,"px"),height:"".concat(i.height,"px"),backgroundImage:"url('".concat(i.url,"')"),backgroundSize:"cover",backgroundPosition:"center"};return s.a.createElement(_i.Wrapper,{style:l,onClick:this.handleClickImage,cursor:this.getCursor(),className:t,onMouseOver:o,onMouseLeave:r},n.isPrivateFile()&&s.a.createElement("img",{src:a,style:wi()(l,"backgroundImage")}),D.a.isPhone()?null:this.renderDownloadButton())}}]),n}(s.a.PureComponent),De()(gi,"defaultProps",{className:"",onClick:Wt.a,keepRatio:!0}),mi=bi,Ae()(mi.prototype,"handleClickImage",[Je.a],Ye()(mi.prototype,"handleClickImage"),mi.prototype),Ae()(mi.prototype,"handleDownloadImage",[Je.a],Ye()(mi.prototype,"handleDownloadImage"),mi.prototype),mi),Ii=n(1331),Ei=n(1375),Mi=n(1379),Si=230,Ni={Wrapper:w.f.div.withConfig({displayName:"WebPagestyled__Wrapper",componentId:"jasbu4-0"})(["position:relative;display:",";width:","px;overflow:hidden;a{display:block;vertical-align:top;}"],(function(e){return e.hidden?"none":"block"}),Si),Youtube:Object(w.f)(Mi.a).withConfig({displayName:"WebPagestyled__Youtube",componentId:"jasbu4-1"})(["border:solid 1px ",";border-radius:18px;"],Z.a.grey300),YoutubeLogo:w.f.div.withConfig({displayName:"WebPagestyled__YoutubeLogo",componentId:"jasbu4-2"})(["display:inline-flex;max-width:100%;color:",";"],Z.a.grey700),Publisher:w.f.div.withConfig({displayName:"WebPagestyled__Publisher",componentId:"jasbu4-3"})(["margin-left:6px;overflow:initial !important;font-weight:bold;"]),Bar:w.f.div.withConfig({displayName:"WebPagestyled__Bar",componentId:"jasbu4-4"})(["width:1px;height:14px;margin:0 9px 0 7px;background-color:",";"],Z.a.grey300),Image:w.f.div.withConfig({displayName:"WebPagestyled__Image",componentId:"jasbu4-5"})(["width:","px;height:120px;background-position:center center;background-size:","px auto;border:1px solid ",";border-radius:18px;"],Si,Si,Z.a.grey300),Meta:w.f.div.withConfig({displayName:"WebPagestyled__Meta",componentId:"jasbu4-6"})(["position:relative;width:","px;padding-left:10px;margin-top:10px;"," color:",";text-align:left;border-left:4px solid ",";div{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}&:empty{display:none;}"],Si,J.d.RemSize12,Z.a.grey500,Z.a.black10),Title:w.f.div.withConfig({displayName:"WebPagestyled__Title",componentId:"jasbu4-7"})([""," font-weight:bold;color:",";"],J.d.RemSize14,Z.a.grey900),Description:w.f.div.withConfig({displayName:"WebPagestyled__Description",componentId:"jasbu4-8"})(["max-height:","px;margin:4px 0 6px 0;overflow:hidden;"," "," -webkit-line-clamp:",";"],34,J.d.RemSize12,kn.o,2)};var Ti=function(e){var t=e.className,n=e.webPage,o=n.getPreviewThumbUrl(),r=n.title,a=n.description,i=n.url,c=Object(l.useMemo)((function(){return n.isYouTube()?s.a.createElement(Ni.Youtube,{height:152,width:270,videoId:n.getYouTubeId()}):o?s.a.createElement(Ni.Image,{style:{backgroundImage:"url(".concat(o,")")}}):null}),[o,n]);return s.a.createElement(Ni.Wrapper,{className:t,hidden:!o&&!r&&!a},s.a.createElement(Ja.a,{href:i,target:"_blank"},c,s.a.createElement(Ni.Meta,null,s.a.createElement(Ni.Title,null,r),s.a.createElement(Ni.Description,null,a),n.isYouTube()&&s.a.createElement(Ni.YoutubeLogo,null,s.a.createElement(Y.b,{size:Y.a.XSmall,width:18,height:16,name:"logo-youtube",defaultOpacity:1}),s.a.createElement(Ni.Publisher,null,n.publisher)))))},Bi=18,Fi=w.f.div.withConfig({displayName:"Commonstyled__MessageWrapper",componentId:"sc-1cf43bo-0"})(["display:flex;justify-content:center;width:fit-content;min-width:18px;margin:0 2px;"]),Pi=w.f.div.withConfig({displayName:"Commonstyled__BubbleContainer",componentId:"sc-1cf43bo-1"})(["position:relative;display:flex;"]),Ri=w.f.div.withConfig({displayName:"Commonstyled__BubbleWrapper",componentId:"sc-1cf43bo-2"})(["position:relative;max-width:","px;padding:8px ","px;"],270,10),Li=Object(w.f)(Ii.a).withConfig({displayName:"Commonstyled__Message",componentId:"sc-1cf43bo-3"})(["",""],J.d.RemSize15);var Di=Object(w.f)(Ei.a).withConfig({displayName:"Commonstyled__MessageButton",componentId:"sc-1cf43bo-4"})(["flex-direction:column;min-width:","px !important;height:","px !important;margin-top:","px;"," & > a:not(:first-child){margin-top:6px !important;}"],(function(e){return e.hasOnlyGiantEmoji?270:250}),(function(e){return function(e,t){return 36*e+(2===e?6:0)+(t?20:0)}(e.buttonCount,e.hasOnlyGiantEmoji)}),(function(e){return e.hasBlocks?10:0}),(function(e){return e.hasOnlyGiantEmoji&&Object(w.e)(["background-color:"," !important;padding:10px !important;border-radius:12px !important;"],Z.a.bg_black_lightest)})),zi=w.f.div.withConfig({displayName:"Commonstyled__ImageWrapper",componentId:"sc-1cf43bo-5"})(["",""],(function(e){return e.grid&&"\n      display: grid;\n      grid-template-columns: 112px 112px;\n      gap: 4px;\n    "})),Ai=w.f.div.withConfig({displayName:"Commonstyled__DeletedBubble",componentId:"sc-1cf43bo-6"})(["padding:10px 12px;margin-bottom:2px;background-color:",";border-radius:","px;"],(function(e){return e.theme.foundationTheme["bg-black-lighter"]}),Bi),Wi=Object(w.f)(Li).withConfig({displayName:"Commonstyled__DeletedMessage",componentId:"sc-1cf43bo-7"})(["color:",";"],Z.a.grey500),Ui=Object(w.f)(Ti).withConfig({displayName:"Commonstyled__WebPage",componentId:"sc-1cf43bo-8"})(["display:flex;width:100%;padding-top:2px;background-color:",";"],Z.a.white),Hi=w.f.div.withConfig({displayName:"Commonstyled__ContextMenu",componentId:"sc-1cf43bo-9"})(["display:flex;flex-direction:column;width:240px;padding:6px;background-color:",";border-radius:12px;box-shadow:0 4px 12px 0 ",";"],Z.a.white,Z.a.black20),Gi=w.f.div.withConfig({displayName:"Commonstyled__ContextItem",componentId:"sc-1cf43bo-10"})(["display:flex;align-items:center;padding:5px 6px;color:",";cursor:pointer;border-radius:6px;"," &:hover{background-color:",";}"],Z.a.grey900,J.d.RemSize15,Z.a.bg_black_lighter),qi=w.f.div.withConfig({displayName:"Commonstyled__BottomMargin",componentId:"sc-1cf43bo-11"})(["width:100%;height:2px;background-color:",";"],Z.a.white),Ki=Object(w.g)(["from{opacity:0;}to{opacity:1;}"]),Vi={MessageWrapper:Fi,BubbleContainer:Pi,BubbleWrapper:Ri,Message:Li,MessageButton:Di,ImageWrapper:zi,DeletedBubble:Ai,DeletedMessage:Wi,WebPage:Ui,ContextMenu:Hi,ContextItem:Gi,BottomMargin:qi,TooltipContent:w.f.div.withConfig({displayName:"Commonstyled__TooltipContent",componentId:"sc-1cf43bo-12"})(["z-index:1;width:max-content;padding:6px 10px;color:",";pointer-events:none;background-color:",";border-radius:8px;box-shadow:",";"," animation:"," 500ms cubic-bezier(0.24,0.06,0,0.97) !important;animation-delay:500ms !important;animation-fill-mode:backwards !important;"],Z.a.white90,Z.a.grey800,Z.a.ev3,J.d.RemSize13,Ki),TimestampWrapper:w.f.div.withConfig({displayName:"Commonstyled__TimestampWrapper",componentId:"sc-1cf43bo-13"})(["position:relative;width:100%;height:0;pointer-events:none;"])};function Yi(e,t){var n=ye()(e);if(we.a){var o=we()(e);t&&(o=Ce()(o).call(o,(function(t){return Ye()(e,t).enumerable}))),n.push.apply(n,o)}return n}function Xi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yi(Object(n),!0).forEach((function(t){De()(e,t,n[t])})):_e.a?Object.defineProperties(e,_e()(n)):Yi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Ye()(n,t))}))}return e}var $i=Object(w.f)(Vi.BubbleContainer).withConfig({displayName:"GuestMessageContentstyled__BubbleContainer",componentId:"sc-14r3uhp-0"})(["justify-content:flex-end;padding-right:","px;"],10),Zi=Object(w.f)(Vi.BubbleWrapper).withConfig({displayName:"GuestMessageContentstyled__BubbleWrapper",componentId:"sc-14r3uhp-1"})(["color:",";background-color:",";border-radius:","px 6px 6px ","px;"," "," "," a{color:",";}"],(function(e){return e.theme.textColor}),(function(e){var t=e.theme;return Object(ii.c)(t.color)}),Bi,Bi,(function(e){return e.isLastMessage&&"\n    border-bottom-right-radius: ".concat(Bi,"px;\n  ")}),(function(e){return e.isFirstMessage&&"\n    border-top-right-radius: ".concat(Bi,"px;\n  ")}),(function(e){return e.hasOnlyGiantEmoji&&Object(w.e)(["padding:4px 0;border-radius:0;background-color:",";"],Z.a.white)}),(function(e){return e.theme.textColor})),Ji=Object(w.f)(gt.a).withConfig({displayName:"GuestMessageContentstyled__ResendButton",componentId:"sc-14r3uhp-2"})(["margin-right:6px;background-color:",";border-radius:50%;transition:background-color 0.2s;&:hover{background-color:",";}"],Z.a.red400,Z.a.red500),Qi=Object(w.f)(gt.a).withConfig({displayName:"GuestMessageContentstyled__SendingIcon",componentId:"sc-14r3uhp-3"})(["margin-right:6px;cursor:default;&::before{background-image:url(","sending-left.gif);background-size:cover;}"],ai.a);function el(e){var t=e.isFirstMessage,n=e.isLastMessage,o=[];return t||o.push("border-top-right-radius: 6px;"),n||o.push("border-bottom-right-radius: 6px;"),o.join("")}var tl=Object(w.f)(yi).withConfig({displayName:"GuestMessageContentstyled__File",componentId:"sc-14r3uhp-4"})(["",""],el),nl=Object(w.f)(ki).withConfig({displayName:"GuestMessageContentstyled__Image",componentId:"sc-14r3uhp-5"})(["",""],el),ol=Object(w.f)(Vi.DeletedBubble).withConfig({displayName:"GuestMessageContentstyled__DeletedBubble",componentId:"sc-14r3uhp-6"})(["",""],el),rl=Object(w.f)(Vi.WebPage).withConfig({displayName:"GuestMessageContentstyled__WebPage",componentId:"sc-14r3uhp-7"})(["justify-content:flex-end;padding-right:10px;"]),al=w.f.div.withConfig({displayName:"GuestMessageContentstyled__OtherMessageWrapper",componentId:"sc-14r3uhp-8"})(["display:flex;justify-content:flex-end;padding-right:","px;background-color:",";"],10,Z.a.white),il=w.f.div.withConfig({displayName:"GuestMessageContentstyled__MoreButtonWrapper",componentId:"sc-14r3uhp-9"})(["z-index:1;display:flex;align-items:center;margin-right:6px;background-color:",";opacity:",";"],Z.a.white,(function(e){return e.show?1:0})),ll=Object(w.f)(Y.b).withConfig({displayName:"GuestMessageContentstyled__MoreButton",componentId:"sc-14r3uhp-10"})(["border-radius:12px;&:hover{background-color:",";}"],Z.a.bg_black_lightest),sl=Object(w.f)(Vi.TooltipContent).withConfig({displayName:"GuestMessageContentstyled__TimestampContent",componentId:"sc-14r3uhp-11"})(["position:absolute;right:20px;transform:translateY(-14px);"]),cl=Xi(Xi({},Vi),{},{OtherMessageWrapper:al,DeletedBubble:ol,BubbleContainer:$i,BubbleWrapper:Zi,ResendButton:Ji,SendingIcon:Qi,File:tl,VideoInterpolation:function(e){return Object(w.e)(["",""],(function(){return el(e)}))},Image:nl,WebPage:rl,MoreButtonWrapper:il,MoreButton:ll,TimestampContent:sl});var ul=function(e){var t,n=e.message,o=e.dictionary,r=e.showSendingIcon,a=e.showImageGallery,i=e.createMessage,c=e.isFirstMessage,d=void 0!==c&&c,p=e.isLastMessage,h=void 0!==p&&p,m=Object(U.a)(),g=m.translate,b=m.locale,y=Object(u.c)(),v=Object(C.a)(!1),w=f()(v,3),O=w[0],_=w[1],j=w[2],k=Object(C.a)(),I=f()(k,3),E=I[0],M=I[1],S=I[2],N=qa({message:n,showImageGallery:a}),T=N.sendClickEvent,F=N.handleImageClick,P=N.handleMarketingEvent,R=N.handleClickMessage,D=N.reactionTotalCount,z=N.handleShowReactorModal,A=Object(l.useState)(!1),W=f()(A,2),H=W[0],G=W[1],q=Object(l.useState)(!1),K=f()(q,2),V=K[0],Y=K[1],X=Object(l.useState)(null),$=f()(X,2),Z=$[0],J=$[1],Q=Object(l.useRef)(null),ee=Object(l.useRef)(null),te=Object(l.useCallback)((function(){var e=n.getPerson();i&&e&&i(pn.a.createMessageObject(e,{requestId:n.requestId,plainText:n.plainText}))}),[n,i]),ne=Object(l.useCallback)((function(e){null==e||e.preventDefault(),Y(!0);var t=n.getVideoFile();t&&J(t)}),[n]),oe=Object(l.useCallback)((function(e){null==e||e.preventDefault(),Y(!1),J(null)}),[]),re=Object(l.useCallback)((function(){n.canDelete()&&G(!0)}),[n]),ae=Object(l.useCallback)((function(){G(!1)}),[]),ie=Object(l.useCallback)((function(){re(),_()}),[re,_]),le=Object(l.useCallback)((function(){ae(),j()}),[ae,j]),se=Object(l.useCallback)((function(){y(x.a.userChatActions.requestDeleteMessage({userChatId:n.chatId,messageId:n.id})),S()}),[y,n,S]),ce=Object(l.useMemo)((function(){return L()(n.blocks)?null:s.a.createElement(cl.MessageWrapper,{onClick:R},n.$failed&&!n.isSending()&&s.a.createElement(oi.a,{content:g("message_stream.failed_message.retry.tooltip"),marginY:3},s.a.createElement(cl.ResendButton,{name:"refresh",size:20,defaultOpacity:1,onClick:te})),s.a.createElement("div",{ref:Q},s.a.createElement(cl.Message,{message:n,dictionary:o})))}),[n,g,o,te,R]),ue=Object(l.useMemo)((function(){return n.hasButton()?s.a.createElement(cl.MessageButton,{hasOnlyGiantEmoji:n.hasOnlyGiantEmojis(),message:n,hasBlocks:n.hasBlocks(),buttonCount:n.buttons.length,buttonExposureType:Ka.a.Chat}):null}),[n]),de=Object(l.useMemo)((function(){return ce||ue?s.a.createElement(cl.BubbleContainer,null,n.canDelete()&&s.a.createElement(cl.MoreButtonWrapper,{show:H,onMouseOver:re,onMouseLeave:ae},s.a.createElement(cl.MoreButton,{name:"more-black",size:16,width:24,height:24,onClick:ne})),n.isSending()&&r&&s.a.createElement(cl.SendingIcon,{name:"sending-left",size:16,defaultOpacity:1}),s.a.createElement(cl.BubbleWrapper,{hasOnlyGiantEmoji:n.hasOnlyGiantEmojis(),isFirstMessage:d,isLastMessage:h,onMouseOver:ie,onMouseLeave:le},ce,ue)):null}),[ue,n,r,ce,H,d,h,re,ae,ie,le,ne]),pe=Object(l.useMemo)((function(){var e,t,o;if(0===n.files.length)return null;var r=Ce()(e=n.files).call(e,(function(e){return e.type===tt.b.Video&&Object(Va.b)(e.contentType)})),a=Ce()(t=n.files).call(t,(function(e){return e.type===tt.b.Image})),i=Ce()(o=n.files).call(o,(function(e){return e.type!==tt.b.Image&&(e.type!==tt.b.Video||!Object(Va.b)(e.contentType))}));return s.a.createElement(cl.OtherMessageWrapper,{ref:ee},s.a.createElement(cl.MoreButtonWrapper,{show:H,onMouseOver:re,onMouseLeave:ae},s.a.createElement(cl.MoreButton,{name:"more-black",size:16,width:24,height:24,onClick:ne})),rr()(r).call(r,(function(e){return s.a.createElement(ei,{interpolation:cl.VideoInterpolation({isFirstMessage:d,isLastMessage:h}),key:e.id,file:e,onEvent:P,onMouseOver:_,onMouseLeave:j})})),s.a.createElement(cl.ImageWrapper,{grid:a.length>1},rr()(a).call(a,(function(e){return s.a.createElement(cl.Image,{isFirstMessage:d,isLastMessage:h,keepRatio:1===a.length,key:e.id,file:e,onClick:F,onMouseOver:_,onMouseLeave:j})}))),rr()(i).call(i,(function(e){return s.a.createElement(cl.File,{isFirstMessage:d,isLastMessage:h,key:e.id,file:e,onClick:T,onMouseOver:_,onMouseLeave:j})})))}),[n,F,d,h,P,T,H,re,ae,ne,_,j]),fe=Object(l.useMemo)((function(){return B()(n.webPage)?null:s.a.createElement(cl.WebPage,{webPage:n.webPage})}),[n.webPage]),he=Object(l.useMemo)((function(){var e;return 0===(null===(e=n.reactions)||void 0===e?void 0:e.length)?null:s.a.createElement(cl.OtherMessageWrapper,null,s.a.createElement($a,{reactions:n.reactions,count:D,showReactionModal:z}))}),[n,D,z]),me=Object(l.useMemo)((function(){return s.a.createElement(ni.a,{show:E,onHide:S,title:g("ch.chat.menu.delete_message"),description:g("ch.chat.message.delete_confirm.message"),primaryButton:{content:g("ch.chat.delete"),type:"warning",onClick:se},secondaryButton:{content:g("ch.common.cancel"),onClick:S}})}),[se,S,E,g]),ge=Object(l.useCallback)((function(){Y(!1),J(null),M()}),[M]),be=Object(l.useMemo)((function(){return O?s.a.createElement(cl.TimestampWrapper,null,s.a.createElement(cl.TimestampContent,null,Object(mt.k)(n.createdAt,b))):null}),[b,n.createdAt,O]);return n.isDeletedMessage()?s.a.createElement(cl.OtherMessageWrapper,null,s.a.createElement(cl.DeletedBubble,{isFirstMessage:d,isLastMessage:h},s.a.createElement(cl.DeletedMessage,{message:n}))):s.a.createElement(s.a.Fragment,null,de,pe,be,fe,he,s.a.createElement(cl.BottomMargin,null),me,(V||Z)&&s.a.createElement(ri.a,{target:Q.current||ee.current,placement:Xn.a.BOTTOM_RIGHT,onHide:oe,rootClose:!0,marginY:8},s.a.createElement(cl.ContextMenu,null,V&&s.a.createElement(cl.ContextItem,{onClick:ge},g("ch.chat.menu.delete_message")),Z&&s.a.createElement(ti,{file:Z},s.a.createElement(cl.ContextItem,null,Ke()(t="".concat(g("ch.file.download")," (")).call(t,Z.getSize(),")"))))))},dl=n(351),pl={Wrapper:w.f.div.withConfig({displayName:"GuestMessagestyled__Wrapper",componentId:"sc-1nlni4y-0"})(["color:",";text-align:right;"],Z.a.grey900)};function fl(e){var t=function(){if("undefined"==typeof Reflect||!ge.a)return!1;if(ge.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(ge()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Re()(e);if(t){var r=Re()(this).constructor;n=ge()(o,arguments,r)}else n=o.apply(this,arguments);return Fe()(this,n)}}var hl=function(e){Te()(n,e);var t=fl(n);function n(){var e,o;ke()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return o=t.call.apply(t,Ke()(e=[this]).call(e,a)),De()(Se()(o),"state",{showSendingIcon:!1}),De()(Se()(o),"timeoutInstance",void 0),o}return Ee()(n,[{key:"componentDidMount",value:function(){var e=this.props.message,t=this.context.infiniteScrollRef;if(e.isSending()&&this.setDelayTimeout(),e.isLocal()){if(_.a.isBodyScrollMode())return void window.setTimeout((function(){var e=b()(window,"visualViewport.offsetTop",0),t=b()(window,"visualViewport.height",0),n=document.documentElement,o=n.scrollHeight;o+e>n.scrollTop+n.clientHeight&&window.scrollTo(0,o-t)}),0);null!=t&&t.current&&window.setTimeout((function(){var e,n;null===(e=(n=t.current).scrollToBottom)||void 0===e||e.call(n)}),0)}}},{key:"componentDidUpdate",value:function(e){var t=this.props.message;!e.message.isSending()&&t.isSending()&&this.setDelayTimeout(),e.message.isSending()&&!t.isSending()&&(this.setState((function(){return{showSendingIcon:!1}})),this.clearDelayTimeout())}},{key:"componentWillUnmount",value:function(){this.clearDelayTimeout()}},{key:"setDelayTimeout",value:function(){var e=this;this.timeoutInstance=window.setTimeout((function(){e.setState((function(){return{showSendingIcon:!0}}))}),3e3)}},{key:"clearDelayTimeout",value:function(){window.clearTimeout(this.timeoutInstance)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.message,o=e.isFirstMessage,r=e.isLastMessage,a=e.showImageGallery,i=e.dictionary,l=e.createMessage,c=this.state.showSendingIcon;return s.a.createElement(pl.Wrapper,{className:t},s.a.createElement(ul,{message:n,dictionary:i,showSendingIcon:c,showImageGallery:a,isFirstMessage:o,isLastMessage:r,createMessage:l}))}}]),n}(s.a.PureComponent);De()(hl,"defaultProps",{isFirstMessage:!1,isLastMessage:!1,className:""}),hl.contextType=dl.a;var ml=s.a.memo(hl,(function(e,t){return e.message.id===t.message.id&&e.message.isDeletedMessage()===t.message.isDeletedMessage()&&e.message.reactions===t.message.reactions})),gl=n(163);function bl(e,t){var n=ye()(e);if(we.a){var o=we()(e);t&&(o=Ce()(o).call(o,(function(t){return Ye()(e,t).enumerable}))),n.push.apply(n,o)}return n}function yl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bl(Object(n),!0).forEach((function(t){De()(e,t,n[t])})):_e.a?Object.defineProperties(e,_e()(n)):bl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Ye()(n,t))}))}return e}var vl=Object(w.f)(Vi.BubbleWrapper).withConfig({displayName:"PersonMessageContentstyled__BubbleWrapper",componentId:"sc-1lc1k8z-0"})(["color:",";background-color:",";border-radius:6px ","px ","px 6px;"," "," ",""],Z.a.grey900,(function(e){return e.theme.foundationTheme["bg-black-lighter"]}),Bi,Bi,(function(e){var t=e.isLastMessage,n=e.hasBlockWithFile;return t&&!n&&"\n    border-bottom-left-radius: ".concat(Bi,"px;\n  ")}),(function(e){return e.isFirstMessage&&"\n    border-top-left-radius: ".concat(Bi,"px;\n  ")}),(function(e){return e.hasOnlyGiantEmoji&&Object(w.e)(["padding:4px 0px;border-radius:0;background-color:",";"],Z.a.white)}));function wl(e){var t=e.isFirstMessage,n=e.isLastMessage,o=e.hasBlocks,r=[];return t&&!o||r.push("border-top-left-radius: 6px;"),n||r.push("border-bottom-left-radius: 6px;"),o&&r.push("margin-top: 2px;"),r.join("")}var xl=Object(w.f)(yi).withConfig({displayName:"PersonMessageContentstyled__File",componentId:"sc-1lc1k8z-1"})(["",""],wl),Cl=Object(w.f)(ki).withConfig({displayName:"PersonMessageContentstyled__Image",componentId:"sc-1lc1k8z-2"})(["",""],wl),Ol=Object(w.f)(Vi.DeletedBubble).withConfig({displayName:"PersonMessageContentstyled__DeletedBubble",componentId:"sc-1lc1k8z-3"})(["",""],wl),_l=w.f.div.withConfig({displayName:"PersonMessageContentstyled__OtherMessageWrapper",componentId:"sc-1lc1k8z-4"})(["display:flex;background-color:",";"],Z.a.white),jl=w.f.div.withConfig({displayName:"PersonMessageContentstyled__FileNodesWrapper",componentId:"sc-1lc1k8z-5"})(["display:flex;flex-direction:column;"]),kl=w.f.div.withConfig({displayName:"PersonMessageContentstyled__TranslateWrapper",componentId:"sc-1lc1k8z-6"})(["display:flex;height:","px;padding-top:2px;padding-left:12px;"," color:",";"],22,J.d.RemSize11,Z.a.grey500),Il=Object(w.f)(gt.a).withConfig({displayName:"PersonMessageContentstyled__TranslateUndoIcon",componentId:"sc-1lc1k8z-7"})(["display:",";margin-right:2px;margin-bottom:2px;"],(function(e){return e.showing?"flex":"none"})),El=w.f.div.withConfig({displayName:"PersonMessageContentstyled__Translate",componentId:"sc-1lc1k8z-8"})(["display:inline-flex;align-items:center;line-height:16px;cursor:pointer;user-select:none;&:hover{color:",";","{&::before{opacity:1;}}}"],Z.a.grey900,Il),Ml=w.f.div.withConfig({displayName:"PersonMessageContentstyled__VideoWrapper",componentId:"sc-1lc1k8z-9"})(["display:flex;align-items:center;"]),Sl=Object(w.f)(Y.b).withConfig({displayName:"PersonMessageContentstyled__DownloadIcon",componentId:"sc-1lc1k8z-10"})(["margin-left:8px;"]),Nl=Object(w.f)(Vi.TooltipContent).withConfig({displayName:"PersonMessageContentstyled__TimestampContent",componentId:"sc-1lc1k8z-11"})(["position:absolute;left:20px;transform:translateY(-14px);"]),Tl=yl(yl({},Vi),{},{OtherMessageWrapper:_l,FileNodesWrapper:jl,DeletedBubble:Ol,BubbleWrapper:vl,File:xl,VideoInterpolation:function(e){return Object(w.e)(["",""],(function(){return wl(e)}))},Image:Cl,TranslateWrapper:kl,TranslateUndoIcon:Il,Translate:El,VideoWrapper:Ml,DownloadIcon:Sl,TimestampContent:Nl});var Bl=function(e){var t=e.message,n=e.dictionary,o=e.showImageGallery,r=e.isFirstMessage,a=void 0!==r&&r,i=e.isLastMessage,c=void 0!==i&&i,u=e.isShowingTranslate,d=Object(U.a)(),p=d.translate,h=d.locale,m=Object(C.a)(!1),g=f()(m,3),b=g[0],y=g[1],v=g[2],w=qa({message:t,showImageGallery:o}),x=w.sendClickEvent,O=w.handleImageClick,_=w.handleMarketingEvent,j=w.handleClickMessage,k=w.reactionTotalCount,I=w.handleShowReactorModal,E=Object(l.useState)(null),M=f()(E,2),S=M[0],N=M[1],T=Object(l.useState)(null),F=f()(T,2),P=F[0],R=F[1],D=Object(l.useCallback)((function(e){return function(t){var n;N(t.currentTarget),R(Ke()(n="".concat(p("ch.file.download")," (")).call(n,e,")"))}}),[p]),z=Object(l.useCallback)((function(){N(null),R(null)}),[]),A=Object(l.useRef)(null),W=Object(l.useRef)(null),H=t.getTranslation(),G=Object(l.useMemo)((function(){return new pn.a({blocks:(null==H?void 0:H.getBlocks())||[]})}),[H]),q=Object(l.useMemo)((function(){return u&&null!=H&&H.hasBlocks()?s.a.createElement(Tl.MessageWrapper,{onClick:j},s.a.createElement(Tl.Message,{message:G,dictionary:n})):L()(t.blocks)?null:s.a.createElement(Tl.MessageWrapper,{onClick:j},s.a.createElement("div",{ref:A},s.a.createElement(Tl.Message,{message:t,dictionary:n})))}),[t,n,u,H,G,j]),K=Object(l.useMemo)((function(){return t.hasButton()?s.a.createElement(Tl.MessageButton,{hasOnlyGiantEmoji:t.hasOnlyGiantEmojis(),message:t,hasBlocks:t.hasBlocks(),buttonCount:t.buttons.length,buttonExposureType:Ka.a.Chat}):null}),[t]),V=Object(l.useMemo)((function(){return q||K?s.a.createElement(Tl.BubbleContainer,null,s.a.createElement(Tl.BubbleWrapper,{hasOnlyGiantEmoji:t.hasOnlyGiantEmojis(),isFirstMessage:a,isLastMessage:c,hasBlockWithFile:t.hasBlocks()&&t.hasFile(),onMouseOver:y,onMouseLeave:v},q,K)):null}),[K,t,q,a,c,y,v]),Y=Object(l.useMemo)((function(){var e,n,o;if(0===t.files.length)return null;var r=Ce()(e=t.files).call(e,(function(e){return e.type===tt.b.Video&&Object(Va.b)(e.contentType)})),i=Ce()(n=t.files).call(n,(function(e){return e.type===tt.b.Image})),l=Ce()(o=t.files).call(o,(function(e){return e.type!==tt.b.Image&&(e.type!==tt.b.Video||!Object(Va.b)(e.contentType))}));return s.a.createElement(Tl.OtherMessageWrapper,{ref:W},s.a.createElement(Tl.FileNodesWrapper,null,rr()(r).call(r,(function(e){return s.a.createElement(Tl.VideoWrapper,null,s.a.createElement(ei,{interpolation:Tl.VideoInterpolation({hasBlocks:t.hasBlocks(),isFirstMessage:a,isLastMessage:c}),key:e.id,file:e,onEvent:_,onMouseOver:y,onMouseLeave:v}),s.a.createElement(ti,{file:e},s.a.createElement(Tl.DownloadIcon,{onMouseOver:D(e.getSize()),onMouseLeave:z,name:"download",width:20,height:20,size:20,defaultOpacity:1})))})),s.a.createElement(Tl.ImageWrapper,{grid:i.length>1},rr()(i).call(i,(function(e){return s.a.createElement(Tl.Image,{hasBlocks:t.hasBlocks(),isFirstMessage:a,isLastMessage:c,keepRatio:1===i.length,key:e.id,file:e,onClick:O,onMouseOver:y,onMouseLeave:v})}))),rr()(l).call(l,(function(e){return s.a.createElement(Tl.File,{hasBlocks:t.hasBlocks(),isFirstMessage:a,isLastMessage:c,key:e.id,file:e,onClick:x,onMouseOver:y,onMouseLeave:v})}))))}),[t,O,a,c,_,x,y,v,D,z]),X=Object(l.useMemo)((function(){return B()(t.webPage)?null:s.a.createElement(Tl.WebPage,{webPage:t.webPage})}),[t.webPage]),$=Object(l.useMemo)((function(){var e;return 0===(null===(e=t.reactions)||void 0===e?void 0:e.length)?null:s.a.createElement(Tl.OtherMessageWrapper,null,s.a.createElement($a,{reactions:t.reactions,count:k,showReactionModal:I}))}),[t,k,I]),Z=Object(l.useMemo)((function(){return b?s.a.createElement(Tl.TimestampWrapper,null,s.a.createElement(Tl.TimestampContent,null,Object(mt.k)(t.createdAt,h))):null}),[h,t.createdAt,b]);return t.isDeletedMessage()?s.a.createElement(Tl.OtherMessageWrapper,null,s.a.createElement(Tl.DeletedBubble,{isFirstMessage:a,isLastMessage:c},s.a.createElement(Tl.DeletedMessage,{message:t}))):s.a.createElement(s.a.Fragment,null,V,Y,Z,X,$,s.a.createElement(Tl.BottomMargin,null),S&&s.a.createElement(ri.a,{target:S,placement:Xn.a.BOTTOM_RIGHT,marginY:4,marginX:8},s.a.createElement(Tl.TooltipContent,null,P)))},Fl=w.f.div.withConfig({displayName:"PersonMessagestyled__Gutter",componentId:"sc-12tgzoa-0"})(["display:flex;flex-direction:column;justify-content:flex-end;width:38px;padding-bottom:4px;padding-left:10px;"]),Pl=w.f.div.withConfig({displayName:"PersonMessagestyled__Header",componentId:"sc-12tgzoa-1"})(["display:flex;align-items:center;margin:0 20% 4px 0;color:",";",""],(function(e){return e.theme.foundationTheme["txt-black-dark"]}),J.d.RemSize11),Rl=Object(w.f)($.a).withConfig({displayName:"PersonMessagestyled__Avatar",componentId:"sc-12tgzoa-2"})(["transform:translateY(-","px);",""],(function(e){return e.verticalPosition}),(function(e){return e.shouldShowInfo&&Object(w.e)(["cursor:pointer;"])})),Ll=w.f.div.withConfig({displayName:"PersonMessagestyled__Wrapper",componentId:"sc-12tgzoa-3"})(["display:flex;background-color:",";",";",";"],Z.a.white,(function(e){return!e.isLastMessage&&Object(w.e)(["","{display:none;}"],Rl)}),(function(e){return!e.isFirstMessage&&Object(w.e)(["","{display:none;}"],Pl)})),Dl=w.f.div.withConfig({displayName:"PersonMessagestyled__Content",componentId:"sc-12tgzoa-4"})(["flex-basis:0;flex-grow:1;flex-shrink:1;"]),zl=w.f.div.withConfig({displayName:"PersonMessagestyled__Name",componentId:"sc-12tgzoa-5"})(["flex:0 1 auto;margin-left:12px;overflow:hidden;font-weight:500;text-overflow:ellipsis;white-space:nowrap;"]),Al=w.f.div.withConfig({displayName:"PersonMessagestyled__Translate",componentId:"sc-12tgzoa-6"})(["margin:0 3px 0 2px;font-weight:600;cursor:pointer;&:hover{color:",";}"],(function(e){return e.theme.foundationTheme["txt-black-darker"]})),Wl={Wrapper:Ll,Gutter:Fl,Header:Pl,Content:Dl,Name:zl,Translate:Al,Avatar:Rl};function Ul(e){var t=e.className,n=e.message,o=e.isFirstMessage,r=void 0!==o&&o,a=e.isLastMessage,i=void 0!==a&&a,c=e.dictionary,d=e.translationVisibility,p=e.isShowingTranslate,f=e.isTranslating,h=e.onClickTranslate,m=e.showImageGallery,g=Object(u.c)(),b=Object(U.a)().translate,y=Object(A.a)("message")(n),v=y.avatarUrl,w=y.name,C=Object(da.a)(),O=n.getPerson(),_=n.shouldShowManagerInfo()&&gl.a.isManager(O)&&O.shouldShowInfo(C),j=Object(l.useCallback)((function(){_&&g(x.a.uiActions.setManagerInfo({manager:O}))}),[_,O,g]),k=Object(l.useMemo)((function(){return d&&r}),[r,d]),I=Object(l.useMemo)((function(){var e;return null!==(e=n.reactions)&&void 0!==e&&e.length?22:0}),[n.reactions]),E=Object(l.useMemo)((function(){return k?p&&!f?s.a.createElement(s.a.Fragment,null," ∙",s.a.createElement(Wl.Translate,{onClick:h},b("ch.undo_translate"))):s.a.createElement(s.a.Fragment,null," ∙",s.a.createElement(Wl.Translate,{onClick:h},b("ch.show_translate")),f&&s.a.createElement(eo.b,{position:"static",size:11,strokeWidth:1})):null}),[p,f,k,h,b]);return s.a.createElement(Wl.Wrapper,{className:t,isFirstMessage:r,isLastMessage:i},s.a.createElement(Wl.Gutter,null,s.a.createElement(Wl.Avatar,{size:24,radius:10,url:v,verticalPosition:I,onClick:j,shouldShowInfo:_})),s.a.createElement(Wl.Content,null,s.a.createElement(Wl.Header,null,s.a.createElement(Wl.Name,null,w),E),s.a.createElement(Bl,{message:n,dictionary:c,isFirstMessage:r,isLastMessage:i,isShowingTranslate:p,showImageGallery:m})))}var Hl=Object(l.memo)(Ul,(function(e,t){return e.message.id===t.message.id&&e.translationVisibility===t.translationVisibility&&e.isShowingTranslate===t.isShowingTranslate&&e.isTranslating===t.isTranslating&&e.onClickTranslate===t.onClickTranslate})),Gl={Wrapper:w.f.div.withConfig({displayName:"MessageActionstyled__Wrapper",componentId:"waxqya-0"})(["display:inline-flex;justify-content:flex-end;width:100%;text-align:right;background-color:",";"],(function(e){return e.theme.foundationTheme["bg-white-normal"]})),Content:w.f.div.withConfig({displayName:"MessageActionstyled__Content",componentId:"waxqya-1"})(["width:100%;max-width:330px;text-align:right;"]),ActionButton:w.f.button.withConfig({displayName:"MessageActionstyled__ActionButton",componentId:"waxqya-2"})(["max-width:280px;padding:7px 11px;margin:0 0 6px 6px;"," font-weight:500;color:",";text-align:left;word-break:break-word;cursor:pointer;background-color:",";border:1px solid ",";border-radius:","px;transition:box-shadow 0.2s ease-out,border-color 0.2s ease-out;",""],J.d.RemSize15,(function(e){return e.theme.foundationTheme["txt-black-darkest"]}),(function(e){return e.theme.foundationTheme["bg-white-normal"]}),(function(e){return e.theme.foundationTheme["bdr-black-light"]}),Bi,(function(e){return!e.isTouchable&&Object(w.e)(["&:hover{background-color:",";color:",";box-shadow:0 4px 6px 0 ",";border:1px solid transparent;}"],e.theme.color,e.theme.textColor,Z.a.grey300)}))};var ql=function(e){var t,n=e.className,o=e.disabled,r=void 0!==o&&o,a=e.messageId,i=e.messageAction,l=e.supportBot,c=e.onClickAction,u=null!==(t=null==i?void 0:i.getType())&&void 0!==t?t:null,d=B()(i)||i.getType()!==sn.Select?l.getButtons():i.getButtons();return B()(d)?null:s.a.createElement(Gl.Wrapper,{className:n},s.a.createElement(Gl.Content,null,rr()(d).call(d,(function(e,t){return s.a.createElement(Gl.ActionButton,{key:"button-".concat(Jt()()),disabled:r,onClick:function(){c(u,e,a,t)},isTouchable:D.a.isTouchableDevice()},Object(Ya.a)(Object(Jn.a)(e.text)))}))))},Kl={Wrapper:w.f.div.withConfig({displayName:"Logstyled__Wrapper",componentId:"ctxfc7-0"})(["position:relative;margin:5px 0 20px;min-height:34px;background-color:",";padding:8px 0;text-align:center;"],Z.a.grey200),Text:w.f.span.withConfig({displayName:"Logstyled__Text",componentId:"ctxfc7-1"})([""," font-weight:600;color:",";"],J.d.RemSize13,Z.a.grey900),Time:w.f.span.withConfig({displayName:"Logstyled__Time",componentId:"ctxfc7-2"})(["margin-left:6px;"," color:",";"],J.d.RemSize11,Z.a.grey500)};var Vl=function(e){var t=e.className,n=e.message;return s.a.createElement(Kl.Wrapper,{className:t},s.a.createElement(Kl.Text,null),s.a.createElement(Kl.Time,null,mt.j(n.createdAt)))},Yl=Object(w.f)(ql).withConfig({displayName:"MessageGroupstyled__MessageAction",componentId:"rmpzs5-0"})(["padding:20px 15px 0;",""],(function(e){return!e.isLastMessage&&Object(w.e)(["margin-bottom:20px;"])})),Xl=Object(w.f)(Vl).withConfig({displayName:"MessageGroupstyled__Log",componentId:"rmpzs5-1"})(["margin:5px 0 20px;"]);function $l(e){var t=e.messageGroup,n=e.nextMessageGroup,o=e.user,r=e.userChat,a=e.showImageGallery,i=e.onClickMessageAction,c=e.createMessage,d=Object(u.c)(),p=Object(l.useCallback)((function(e,t){return s.a.createElement(Yl,{key:"messageAction-".concat(e.getKey()),messageId:e.id,messageAction:e.getAction(),supportBot:e.supportBot,onClickAction:i,isLastMessage:t})}),[i]),h=Object(l.useCallback)((function(e){return s.a.createElement(Xl,{key:e.getKey(),message:e})}),[]),m=Object(l.useMemo)((function(){var e;return xn()(e=t.messages).call(e,(function(e,t){return t.getTranslation().isTranslating()||e}),!1)}),[t.messages]),g=Object(C.a)(),b=f()(g,3),y=b[0],v=b[1],w=b[2],O=Object(l.useCallback)((function(e){y?(d(x.a.userChatActions.undoTranslatedMessage({messageId:e.id})),w()):(e.getTranslation().hasBlocks()?d(x.a.userChatActions.showTranslatedMessage({messageId:e.id})):d(x.a.userChatActions.requestTranslateMessage({userChatId:r.id,messageId:e.id,language:o.language})),v())}),[y,d,r.id,o.language,v,w]),_=Object(l.useCallback)((function(){t.messages.forEach((function(e){e.hasLanguage()&&e.isDifferentLanguage(o.language)&&O(e)}))}),[O,t.messages,o.language]),j=Object(l.useCallback)((function(e,n,r){var i={user:wa()(o,"profile")};return e.hasPerson()?s.a.createElement(Hl,{key:e.getKey(),isFirstMessage:n,isLastMessage:r,message:e,dictionary:i,isShowingTranslate:y,isTranslating:m,showImageGallery:a,onClickTranslate:_,translationVisibility:t.shouldTranslate()}):s.a.createElement(ml,{key:e.getKey(),isFirstMessage:n,isLastMessage:r,message:e,userLanguage:o.language,dictionary:i,showImageGallery:a,createMessage:c})}),[y,m,t,_,a,c,o]),k=Object(l.useMemo)((function(){return $t.c.List().withMutations((function(e){t.messages.forEach((function(o,r){var a,i=t.messages.get(r+1),l=0===r,s=r===t.messages.size-1;o.isDeletedMessage()?e.push(j(o,l,s)):o.isLog()?e.push(h(o)):(!o.supportBot||!o.supportBot.buttons||null!=i&&i.isLocal()||null!=n&&null!==(a=n.messages.get(0))&&void 0!==a&&a.isLocal())&&(o.id!==t.messages.last().id||n||!o.action||null!=i&&i.isLocal())?e.push(j(o,l,s)):(e.push(j(o,l,s)),e.push(p(o,o===t.messages.last())))}))}))}),[t.messages,n,h,j,p]);return s.a.createElement(s.a.Fragment,null,k)}var Zl=s.a.memo($l,(function(e,t){var n,o;return e.messageGroup.id===t.messageGroup.id&&(null===(n=e.nextMessageGroup)||void 0===n?void 0:n.id)===(null===(o=t.nextMessageGroup)||void 0===o?void 0:o.id)&&e.user===t.user&&e.userChat===t.userChat&&e.showImageGallery===t.showImageGallery&&e.onClickMessageAction===t.onClickMessageAction&&e.createMessage===t.createMessage})),Jl={Wrapper:w.f.div.withConfig({displayName:"UnreadDividerstyled__Wrapper",componentId:"llndqm-0"})(["display:flex;align-items:center;justify-content:center;padding:12px 0;font-weight:600;"]),Item:w.f.div.withConfig({displayName:"UnreadDividerstyled__Item",componentId:"llndqm-1"})(["padding:4px 7px;"," color:",";background-color:",";border-radius:8px;"],J.d.RemSize11,(function(e){return e.theme.foundationTheme["bgtxt-navy-normal"]}),(function(e){return e.theme.foundationTheme["bgtxt-navy-lightest"]}))};var Ql=function(){var e=Object(U.a)().translate;return s.a.createElement(Jl.Wrapper,null,s.a.createElement(Jl.Item,null,e("ch.unread_divider")))},es={Wrapper:w.f.div.withConfig({displayName:"Typingstyled__Wrapper",componentId:"sc-1cyucvc-0"})(["display:flex;align-items:center;height:30px;background-color:",";& > *{visibility:",";}"],Z.a.white,(function(e){return e.hide?"hidden":"visible"})),Avatar:Object(w.f)($.a).withConfig({displayName:"Typingstyled__Avatar",componentId:"sc-1cyucvc-1"})(["z-index:",";display:inline-block;&:not(:first-child){margin-left:-3px;}"],(function(e){return e.zIndex})),ExtraNumbers:w.f.div.withConfig({displayName:"Typingstyled__ExtraNumbers",componentId:"sc-1cyucvc-2"})(["margin-left:2px;"," font-weight:600;color:",";"],J.d.RemSize11,Z.a.grey500),Icon:w.f.img.withConfig({displayName:"Typingstyled__Icon",componentId:"sc-1cyucvc-3"})(["width:22px;height:6px;margin-left:7px;"])};var ts=function(e){var t,n=e.className,o=Object(A.a)("person"),r=Object(u.d)(d.a.uiSelectors.getTypingPersons),a=Object(l.useCallback)((function(e){var t=e.size;return t<=3?null:s.a.createElement(es.ExtraNumbers,null,"+".concat(t-3))}),[]);return s.a.createElement(es.Wrapper,{className:n,hide:!r.size},rr()(t=qt()(r).call(r,0,3)).call(t,(function(e,t,n){var r=o(e).avatarUrl;return s.a.createElement(es.Avatar,{key:e.id,size:20,zIndex:n.size-t,url:r})})),a(r),s.a.createElement(es.Icon,{src:"https://cdn.channel.io/plugin/images/typing.gif"}))},ns={GuestMessage:Object(w.f)(ml).withConfig({displayName:"MessageStreamstyled__GuestMessage",componentId:"sc-1hff8rl-0"})([""]),PersonMessage:Object(w.f)(Hl).withConfig({displayName:"MessageStreamstyled__PersonMessage",componentId:"sc-1hff8rl-1"})([""]),Log:Object(w.f)(Vl).withConfig({displayName:"MessageStreamstyled__Log",componentId:"sc-1hff8rl-2"})(["margin:5px 0 20px;"]),MessageAction:Object(w.f)(ql).withConfig({displayName:"MessageStreamstyled__MessageAction",componentId:"sc-1hff8rl-3"})(["padding:20px 15px 0;",""],(function(e){return!e.isLastMessage&&Object(w.e)(["margin-bottom:20px;"])})),Typing:Object(w.f)(ts).withConfig({displayName:"MessageStreamstyled__Typing",componentId:"sc-1hff8rl-4"})(["padding:6px 15px 6px 10px;"]),Wrapper:w.f.div.withConfig({displayName:"MessageStreamstyled__Wrapper",componentId:"sc-1hff8rl-5"})(["position:relative;flex-basis:0;flex-grow:1;flex-shrink:1;height:auto;font-weight:500;isolation:isolate;"]),Margin:w.f.div.withConfig({displayName:"MessageStreamstyled__Margin",componentId:"sc-1hff8rl-6"})(["width:100%;height:","px;"],(function(e){return e.height})),AbsoluteWrapper:w.f.div.withConfig({displayName:"MessageStreamstyled__AbsoluteWrapper",componentId:"sc-1hff8rl-7"})(["position:absolute;right:0;bottom:0;left:0;display:flex;flex-direction:column;align-items:center;justify-content:center;"]),GroupMargin:w.f.div.withConfig({displayName:"MessageStreamstyled__GroupMargin",componentId:"sc-1hff8rl-8"})(["width:100%;padding-top:8px;background-color:",";"],Z.a.white),DifferentPersonMargin:w.f.div.withConfig({displayName:"MessageStreamstyled__DifferentPersonMargin",componentId:"sc-1hff8rl-9"})(["padding-top:6px;"]),ChannelDescriptionWrapper:w.f.div.withConfig({displayName:"MessageStreamstyled__ChannelDescriptionWrapper",componentId:"sc-1hff8rl-10"})(["display:flex;width:100%;padding:20px 24px 0 24px;background-color:",";"],Z.a.white),ChannelDescriptionIconWrapper:w.f.div.withConfig({displayName:"MessageStreamstyled__ChannelDescriptionIconWrapper",componentId:"sc-1hff8rl-11"})(["display:flex;flex-shrink:0;align-items:center;justify-content:center;width:24px;height:24px;margin-right:8px;background-color:",";border-radius:10px;"],Z.a.bg_black_lighter),ChannelDescriptionIcon:Object(w.f)(Y.b).withConfig({displayName:"MessageStreamstyled__ChannelDescriptionIcon",componentId:"sc-1hff8rl-12"})(["cursor:default;"]),ChannelDescription:w.f.div.withConfig({displayName:"MessageStreamstyled__ChannelDescription",componentId:"sc-1hff8rl-13"})(["color:",";",""],Z.a.txt_black_dark,J.d.RemSize13)},os=kn.g+kn.h;function rs(e){var t,n,o,r=e.messages,a=e.userChat,i=e.user,c=e.showImageGallery,p=e.onClickMessageAction,h=e.shouldShowEmojiSelector,m=e.hideEmojiSelector,g=e.onClickEmoji,b=e.onClick,y=e.createMessage,v=Object(u.c)(),C=Object(on.a)().infiniteScrollRef,O=un(),j=O.isKeyboardOpen,k=O.isFooterVisible,I=Object(u.d)(d.a.messagesSelectors.getNext),E=Object(l.useState)(!1),M=f()(E,2),S=M[0],N=M[1],T=Object(l.useState)(!1),F=f()(T,2),P=F[0],R=F[1],z=Object(l.useState)(null),A=f()(z,2),W=A[0],U=A[1],H=Object(l.useRef)(null),G=Object(nn.a)(r),q=Object(l.useState)(0),K=f()(q,2),V=K[0],Y=K[1],X=vn(),$=X.localFiles,Z=X.handleCancelSendingFile,J=X.handleRemoveFailedFile,Q=X.handleRetryFailedFile;Object(l.useEffect)((function(){var e=en.a.now().getTime(),t=en.a.getTimezoneOffset(),n=mt.a-e%mt.a+t;setTimeout((function(){Y((function(e){return e+1}))}),n)}),[]),Object(l.useLayoutEffect)((function(){var e=null==G?void 0:G.first(),t=r.first();if(N(e!==t),!a.isEmpty()){var n=function(e,t,n){return!t||e===t||t.isLog()||t.isCreatedBy(n)?null:t}(null==G?void 0:G.last(),r.last(),i);!B()(n)&&C.current&&C.current.getScrollBottomOffset()>os&&U(n)}}),[r]),Object(l.useEffect)((function(){!B()(W)&&C.current&&C.current.getScrollBottomOffset()>os?R(!0):R(!1)}),[C,W]),Object(l.useEffect)((function(){D.a.isApplePhone()&&(j?setTimeout((function(){R(!0)}),500):R(!1))}),[j]);var ee=Object(l.useRef)(null!==(t=a.getSession())&&void 0!==t&&t.unread?null!==(n=null===(o=a.getSession())||void 0===o?void 0:o.readAt)&&void 0!==n?n:0:1/0),te=Object(l.useMemo)((function(){var e;return!!L()(a.id)||(!(null!==(e=r.last())&&void 0!==e&&e.hasPerson())||(null==G?void 0:G.last())===r.last())&&!a.isSupporting()&&$&&!$.sending}),[r,G,a,$]),ne=Object(l.useMemo)((function(){return a.isSupporting()||a.isClosed()}),[a]),oe=Object(l.useCallback)((function(e,t){return t?+t.createdAt<=ee.current&&ee.current<+e.createdAt:!!I&&ee.current<+e.createdAt}),[I]),re=function(e){var t=e.messages,n=e.user,o=e.shouldRenderUnreadDivider,r=Object(u.d)(d.a.uiSelectors.translationVisibility);return Object(l.useMemo)((function(){return $t.c.List().withMutations((function(e){xn()(t).call(t,(function(a,i,l){var s=l?t.get(l-1):null,c=a;return(!s||s.hasProfileBot()||!s.isContextMessage(i)||o(i,s))&&0!==l&&(e.push(a),c=new jn),!c.hasTranslateMessage&&r&&i.hasLanguage()&&i.isDifferentLanguage(n.language)&&c.setHasTranslateMessage(),!c.personType&&i.personType&&c.setPersonType(i.personType),!c.profileBot&&i.hasProfileBot()&&c.setProfileBot(i.profileBot),c.createdAt||c.setCreatedAt(i.createdAt),c.push(i),l===t.size-1&&e.push(c),c}),new jn)}))}),[t,n.language,o,r])}({messages:r,user:i,shouldRenderUnreadDivider:oe}),ae=Object(l.useCallback)((function(){return v(x.a.userChatActions.requestGetNextMessages({userChatId:a.id,query:{since:I}})).promise}),[v,I,a.id]),ie=Object(l.useCallback)((function(e){var t;return s.a.createElement(En,{key:Ke()(t="day-divider-".concat(e.id,"-")).call(t,V),messageGroup:e})}),[V]),le=Object(l.useCallback)((function(e){return s.a.createElement(Fo,{ref:H,key:"profileForm-".concat(e.id),userChatId:a.id,messageId:e.id,profileList:e.profileBot,user:i})}),[i,a.id]),se=Object(l.useMemo)((function(){return $t.c.List().withMutations((function(e){re.forEach((function(t,n){var o=re.get(n-1),r=re.get(n+1);(0===n&&!I||t.shouldRenderTimeDivider(o))&&e.push(ie(t)),oe(t,o)&&e.push(s.a.createElement(Ql,{key:"unread-divider-".concat(t.id)})),o&&e.push(s.a.createElement(ns.GroupMargin,{key:"group-margin-".concat(t.id)})),e.push(s.a.createElement(Zl,{key:"message-group-".concat(t.id),messageGroup:t,nextMessageGroup:r,user:i,userChat:a,showImageGallery:c,onClickMessageAction:p,createMessage:y})),t.hasProfileBot()&&e.push(le(t))}))}))}),[re,I,oe,i,a,c,p,y,ie,le]),ce=Object(l.useCallback)((function(e){e.scrollBottomOffset<=os&&(U(null),D.a.isApplePhone()&&j||R(!1))}),[j]),ue=Object(l.useMemo)((function(){return Object(w.e)(["padding-top:","px;"," ",""],kn.c,!D.a.isPhone()&&Object(w.e)(["padding-bottom:","px;",""],kn.g+kn.h,!k&&Object(w.e)(["padding-bottom:0;"])),yn.d&&_.a.isBodyScrollMode()&&Object(w.e)(["min-height:","px;"],document.documentElement.clientHeight))}),[k]),de=Object(l.useMemo)((function(){return Object(w.e)([" width:","px;"],kn.j)}),[]);return s.a.createElement(ns.Wrapper,{onClick:b},s.a.createElement(Ur,{ref:C,useBodyScroll:_.a.isBodyScrollMode(),fixedClientView:S,disableScrollBottomOnUpdate:te,onLoadMore:I?ae:void 0,onScroll:ce,showLoader:!0,hasMore:!L()(I),disableScrollBottomOnMount:!B()(H.current)||a.isEmpty(),fixedInnerWrapperInterpolation:ue,scrollBarInterpolation:de},L()(I)&&s.a.createElement(ya,null),se,s.a.createElement(ns.Typing,null),ne&&s.a.createElement(ns.Margin,{height:44}),s.a.createElement(sa,{localFiles:$,onCancel:Z,onRemove:J,onRetry:Q})),s.a.createElement(ns.AbsoluteWrapper,null,s.a.createElement(ua,{show:P,message:W})),!D.a.isPhone()&&h&&s.a.createElement(ns.AbsoluteWrapper,null,s.a.createElement(Zr,{show:!0,onClickEmoji:g,hideEmojiSelector:m})))}var as=Object(l.memo)(rs),is=n(1456),ls=n.n(is),ss=n(80),cs=new(function(){function e(){ke()(this,e),De()(this,"hasFooterIcons",!1)}return Ee()(e,[{key:"getFooterIcons",value:function(){if(!this.hasFooterIcons){this.hasFooterIcons=!0,["send-disabled.png","send-hover.png","clip-hover.png","emoji-hover.png"].forEach((function(e){var t=new Image;return t.src="https://cdn.channel.io/plugin/images/".concat(e),t}))}}}]),e}()),us=n(655);var ds=n(353),ps=Object(M.f)();var fs=function(e){var t=e.scrollToBottom,n=e.isKeyboardOpen,o=Object(l.useRef)(D.a.isApplePhone()?b()(ps,"visualViewport.height",0):0),r=Object(l.useCallback)((function(){if(D.a.isApplePhone()){var e=b()(ps,"visualViewport.height",0);if(o.current-30>e&&o.current-100<e)if(_.a.isBodyScrollMode())t();else{var n,r,a=(null!==(n=null===(r=ps.document.scrollingElement)||void 0===r?void 0:r.scrollHeight)&&void 0!==n?n:ps.innerHeight+ps.scrollY)-e;ps.scrollTo(0,a)}o.current=e}}),[t]);Object(l.useEffect)((function(){return D.a.isApplePhone()&&ps.visualViewport?(ps.visualViewport.onresize=n?r:null,function(){ps.visualViewport.onresize=null}):Wt.a}),[n,r])},hs=n(457);function ms(){return(ms=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var gs="undefined"!=typeof window&&"undefined"!=typeof document,bs=!!gs&&!!document.documentElement.currentStyle,ys=gs&&document.createElement("textarea"),vs={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},ws=["letter-spacing","line-height","font-family","font-weight","font-size","font-style","tab-size","text-rendering","text-transform","width","text-indent","padding-top","padding-right","padding-bottom","padding-left","border-top-width","border-right-width","border-bottom-width","border-left-width","box-sizing"],xs={};function Cs(e,t,n,o,r){void 0===n&&(n=!1),void 0===o&&(o=null),void 0===r&&(r=null),null===ys.parentNode&&document.body.appendChild(ys);var a=function(e,t,n){void 0===n&&(n=!1);if(n&&xs[t])return xs[t];var o=window.getComputedStyle(e);if(null===o)return null;var r=ws.reduce((function(e,t){return e[t]=o.getPropertyValue(t),e}),{}),a=r["box-sizing"];bs&&"border-box"===a&&(r.width=parseFloat(r.width)+parseFloat(o["border-right-width"])+parseFloat(o["border-left-width"])+parseFloat(o["padding-right"])+parseFloat(o["padding-left"])+"px");var i=parseFloat(r["padding-bottom"])+parseFloat(r["padding-top"]),l=parseFloat(r["border-bottom-width"])+parseFloat(r["border-top-width"]),s={sizingStyle:r,paddingSize:i,borderSize:l,boxSizing:a};n&&(xs[t]=s);return s}(e,t,n);if(null===a)return null;var i=a.paddingSize,l=a.borderSize,s=a.boxSizing,c=a.sizingStyle;Object.keys(c).forEach((function(e){ys.style[e]=c[e]})),Object.keys(vs).forEach((function(e){ys.style.setProperty(e,vs[e],"important")})),ys.value=e.value||e.placeholder||"x";var u=-1/0,d=1/0,p=ys.scrollHeight;"border-box"===s?p+=l:"content-box"===s&&(p-=i),ys.value="x";var f=ys.scrollHeight-i;return null===o&&null===r||(null!==o&&(u=f*o,"border-box"===s&&(u=u+i+l),p=Math.max(u,p)),null!==r&&(d=f*r,"border-box"===s&&(d=d+i+l),p=Math.min(d,p))),{height:p,minHeight:u,maxHeight:d,rowCount:Math.floor(p/f)}}var Os,_s=(void 0===Os&&(Os=0),function(){return++Os}),js=function(){},ks=gs&&window.requestAnimationFrame?[window.requestAnimationFrame,window.cancelAnimationFrame]:[setTimeout,clearTimeout],Is=ks[0],Es=ks[1],Ms=function(e){var t,n;function o(t){var n;return(n=e.call(this,t)||this)._resizeLock=!1,n._onRootDOMNode=function(e){n._rootDOMNode=e,n.props.inputRef&&n.props.inputRef(e)},n._onChange=function(e){n._controlled||n._resizeComponent(),n.props.onChange(e)},n._resizeComponent=function(e){if(void 0===e&&(e=js),void 0!==n._rootDOMNode){var t=Cs(n._rootDOMNode,n._uid,n.props.useCacheForDOMMeasurements,n.props.minRows,n.props.maxRows);if(null!==t){var o=t.height,r=t.minHeight,a=t.maxHeight,i=t.rowCount;n.rowCount=i,n.state.height===o&&n.state.minHeight===r&&n.state.maxHeight===a?e():n.setState({height:o,minHeight:r,maxHeight:a},e)}else e()}else e()},n.state={height:t.style&&t.style.height||0,minHeight:-1/0,maxHeight:1/0},n._uid=_s(),n._controlled="string"==typeof t.value,n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r=o.prototype;return r.render=function(){var e=this.props,t=(e.minRows,e.maxRows,e.onHeightChange,e.useCacheForDOMMeasurements,e.inputRef,function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,["minRows","maxRows","onHeightChange","useCacheForDOMMeasurements","inputRef"]));return t.style=ms({},t.style,{height:this.state.height}),Math.max(t.style.maxHeight||1/0,this.state.maxHeight)<this.state.height&&(t.style.overflow="hidden"),s.a.createElement("textarea",ms({},t,{onChange:this._onChange,ref:this._onRootDOMNode}))},r.componentDidMount=function(){var e=this;this._resizeComponent(),this._resizeListener=function(){e._resizeLock||(e._resizeLock=!0,e._resizeComponent((function(){return e._resizeLock=!1})))},window.addEventListener("resize",this._resizeListener)},r.componentWillReceiveProps=function(){var e=this;this._clearNextFrame(),this._onNextFrameActionId=Is((function(){return e._resizeComponent()}))},r.componentDidUpdate=function(e,t){this.state.height!==t.height&&this.props.onHeightChange(this.state.height,this)},r.componentWillUnmount=function(){this._clearNextFrame(),window.removeEventListener("resize",this._resizeListener),function(e){delete xs[e]}(this._uid)},r._clearNextFrame=function(){Es(this._onNextFrameActionId)},o}(s.a.Component);Ms.propTypes={value:lr.a.string,onChange:lr.a.func,onHeightChange:lr.a.func,useCacheForDOMMeasurements:lr.a.bool,minRows:lr.a.number,maxRows:lr.a.number,inputRef:lr.a.func},Ms.defaultProps={onChange:js,onHeightChange:js,useCacheForDOMMeasurements:!1};var Ss=Ms,Ns=n(1463),Ts=n.n(Ns),Bs="undefined"==typeof document||!document||!document.createElement||"multiple"in document.createElement("input");function Fs(e,t){return"application/x-moz-file"===e.type||Ts()(e,t)}function Ps(e){e.preventDefault()}function Rs(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}function Ls(e){return-1!==e.indexOf("Edge/")}var Ds={borderStyle:"solid",borderColor:"#c66",backgroundColor:"#eee"},zs={opacity:.5},As={borderStyle:"solid",borderColor:"#6c6",backgroundColor:"#eee"},Ws={width:200,height:200,borderWidth:2,borderColor:"#666",borderStyle:"dashed",borderRadius:5},Us=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Hs=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function Gs(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}var qs=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.renderChildren=function(e,t,n,r){return"function"==typeof e?e(Us({},o.state,{isDragActive:t,isDragAccept:n,isDragReject:r})):e},o.composeHandlers=o.composeHandlers.bind(o),o.onClick=o.onClick.bind(o),o.onDocumentDrop=o.onDocumentDrop.bind(o),o.onDragEnter=o.onDragEnter.bind(o),o.onDragLeave=o.onDragLeave.bind(o),o.onDragOver=o.onDragOver.bind(o),o.onDragStart=o.onDragStart.bind(o),o.onDrop=o.onDrop.bind(o),o.onFileDialogCancel=o.onFileDialogCancel.bind(o),o.onInputElementClick=o.onInputElementClick.bind(o),o.setRef=o.setRef.bind(o),o.setRefs=o.setRefs.bind(o),o.isFileDialogActive=!1,o.state={draggedFiles:[],acceptedFiles:[],rejectedFiles:[]},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Hs(t,[{key:"componentDidMount",value:function(){var e=this.props.preventDropOnDocument;this.dragTargets=[],e&&(document.addEventListener("dragover",Ps,!1),document.addEventListener("drop",this.onDocumentDrop,!1)),this.fileInputEl.addEventListener("click",this.onInputElementClick,!1),window.addEventListener("focus",this.onFileDialogCancel,!1)}},{key:"componentWillUnmount",value:function(){this.props.preventDropOnDocument&&(document.removeEventListener("dragover",Ps),document.removeEventListener("drop",this.onDocumentDrop)),null!=this.fileInputEl&&this.fileInputEl.removeEventListener("click",this.onInputElementClick,!1),window.removeEventListener("focus",this.onFileDialogCancel,!1)}},{key:"composeHandlers",value:function(e){return this.props.disabled?null:e}},{key:"onDocumentDrop",value:function(e){this.node&&this.node.contains(e.target)||(e.preventDefault(),this.dragTargets=[])}},{key:"onDragStart",value:function(e){this.props.onDragStart&&this.props.onDragStart.call(this,e)}},{key:"onDragEnter",value:function(e){var t=this;e.preventDefault(),-1===this.dragTargets.indexOf(e.target)&&this.dragTargets.push(e.target),Promise.resolve(this.props.getDataTransferItems(e)).then((function(e){t.setState({isDragActive:!0,draggedFiles:e})})),this.props.onDragEnter&&this.props.onDragEnter.call(this,e)}},{key:"onDragOver",value:function(e){e.preventDefault(),e.stopPropagation();try{e.dataTransfer.dropEffect=this.isFileDialogActive?"none":"copy"}catch(e){}return this.props.onDragOver&&this.props.onDragOver.call(this,e),!1}},{key:"onDragLeave",value:function(e){var t=this;e.preventDefault(),this.dragTargets=this.dragTargets.filter((function(n){return n!==e.target&&t.node.contains(n)})),this.dragTargets.length>0||(this.setState({isDragActive:!1,draggedFiles:[]}),this.props.onDragLeave&&this.props.onDragLeave.call(this,e))}},{key:"onDrop",value:function(e){var t=this,n=this.props,o=n.onDrop,r=n.onDropAccepted,a=n.onDropRejected,i=n.multiple,l=n.disablePreview,s=n.accept,c=n.getDataTransferItems;e.preventDefault(),this.dragTargets=[],this.isFileDialogActive=!1,this.draggedFiles=null,this.setState({isDragActive:!1,draggedFiles:[]}),Promise.resolve(c(e)).then((function(n){var c=[],u=[];n.forEach((function(e){if(!l)try{e.preview=window.URL.createObjectURL(e)}catch(e){0}Fs(e,s)&&function(e,t,n){return e.size<=t&&e.size>=n}(e,t.props.maxSize,t.props.minSize)?c.push(e):u.push(e)})),i||u.push.apply(u,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(c.splice(1))),o&&o.call(t,c,u,e),u.length>0&&a&&a.call(t,u,e),c.length>0&&r&&r.call(t,c,e)}))}},{key:"onClick",value:function(e){var t=this.props,n=t.onClick;t.disableClick||(e.stopPropagation(),n&&n.call(this,e),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return Rs(e)||Ls(e)}()?this.open():setTimeout(this.open.bind(this),0))}},{key:"onInputElementClick",value:function(e){e.stopPropagation(),this.props.inputProps&&this.props.inputProps.onClick&&this.props.inputProps.onClick()}},{key:"onFileDialogCancel",value:function(){var e=this,t=this.props.onFileDialogCancel;this.isFileDialogActive&&setTimeout((function(){null!=e.fileInputEl&&(e.fileInputEl.files.length||(e.isFileDialogActive=!1));"function"==typeof t&&t()}),300)}},{key:"setRef",value:function(e){this.node=e}},{key:"setRefs",value:function(e){this.fileInputEl=e}},{key:"open",value:function(){this.isFileDialogActive=!0,this.fileInputEl.value=null,this.fileInputEl.click()}},{key:"render",value:function(){var e=this.props,t=e.accept,n=e.acceptClassName,o=e.activeClassName,r=e.children,a=e.disabled,i=e.disabledClassName,l=e.inputProps,c=e.multiple,u=e.name,d=e.rejectClassName,p=Gs(e,["accept","acceptClassName","activeClassName","children","disabled","disabledClassName","inputProps","multiple","name","rejectClassName"]),f=p.acceptStyle,h=p.activeStyle,m=p.className,g=void 0===m?"":m,b=p.disabledStyle,y=p.rejectStyle,v=p.style,w=Gs(p,["acceptStyle","activeStyle","className","disabledStyle","rejectStyle","style"]),x=this.state,C=x.isDragActive,O=x.draggedFiles,_=O.length,j=c||_<=1,k=_>0&&function(e,t){return e.every((function(e){return Fs(e,t)}))}(O,this.props.accept),I=_>0&&(!k||!j),E=!(g||v||h||f||y||b);C&&o&&(g+=" "+o),k&&n&&(g+=" "+n),I&&d&&(g+=" "+d),a&&i&&(g+=" "+i),E&&(v=Ws,h=As,f=As,y=Ds,b=zs);var M=Us({position:"relative"},v);h&&C&&(M=Us({},M,h)),f&&k&&(M=Us({},M,f)),y&&I&&(M=Us({},M,y)),b&&a&&(M=Us({},M,b));var S={accept:t,disabled:a,type:"file",style:Us({position:"absolute",top:0,right:0,bottom:0,left:0,opacity:1e-5,pointerEvents:"none"},l.style),multiple:Bs&&c,ref:this.setRefs,onChange:this.onDrop,autoComplete:"off"};u&&u.length&&(S.name=u);w.acceptedFiles,w.preventDropOnDocument,w.disablePreview,w.disableClick,w.onDropAccepted,w.onDropRejected,w.onFileDialogCancel,w.maxSize,w.minSize,w.getDataTransferItems;var N=Gs(w,["acceptedFiles","preventDropOnDocument","disablePreview","disableClick","onDropAccepted","onDropRejected","onFileDialogCancel","maxSize","minSize","getDataTransferItems"]);return s.a.createElement("div",Us({className:g,style:M},N,{onClick:this.composeHandlers(this.onClick),onDragStart:this.composeHandlers(this.onDragStart),onDragEnter:this.composeHandlers(this.onDragEnter),onDragOver:this.composeHandlers(this.onDragOver),onDragLeave:this.composeHandlers(this.onDragLeave),onDrop:this.composeHandlers(this.onDrop),ref:this.setRef,"aria-disabled":a}),this.renderChildren(r,C,k,I),s.a.createElement("input",Us({},l,S)))}}]),t}(s.a.Component),Ks=qs;qs.propTypes={accept:lr.a.oneOfType([lr.a.string,lr.a.arrayOf(lr.a.string)]),children:lr.a.oneOfType([lr.a.node,lr.a.func]),disableClick:lr.a.bool,disabled:lr.a.bool,disablePreview:lr.a.bool,preventDropOnDocument:lr.a.bool,inputProps:lr.a.object,multiple:lr.a.bool,name:lr.a.string,maxSize:lr.a.number,minSize:lr.a.number,className:lr.a.string,activeClassName:lr.a.string,acceptClassName:lr.a.string,rejectClassName:lr.a.string,disabledClassName:lr.a.string,style:lr.a.object,activeStyle:lr.a.object,acceptStyle:lr.a.object,rejectStyle:lr.a.object,disabledStyle:lr.a.object,getDataTransferItems:lr.a.func,onClick:lr.a.func,onDrop:lr.a.func,onDropAccepted:lr.a.func,onDropRejected:lr.a.func,onDragStart:lr.a.func,onDragEnter:lr.a.func,onDragOver:lr.a.func,onDragLeave:lr.a.func,onFileDialogCancel:lr.a.func},qs.defaultProps={preventDropOnDocument:!0,disabled:!1,disablePreview:!1,disableClick:!1,inputProps:{},multiple:!0,maxSize:1/0,minSize:0,getDataTransferItems:function(e){var t=[];if(e.dataTransfer){var n=e.dataTransfer;n.files&&n.files.length?t=n.files:n.items&&n.items.length&&(t=n.items)}else e.target&&e.target.files&&(t=e.target.files);return Array.prototype.slice.call(t)}};var Vs=n(1329),Ys=function(e){var t=e.color;return e.bright?{bgColor:Object(w.e)(["background-color:rgba(0,0,0,0.1);"]),hoveredBgColor:Object(w.e)(["background-color:rgba(0,0,0,0.2);"])}:{bgColor:Object(w.e)(["background-color:",";"],Object(ii.f)(t,.2)),hoveredBgColor:Object(w.e)(["background-color:",";"],Object(ii.f)(t,.3))}},Xs=Object(w.e)(["display:flex;align-items:center;align-self:flex-end;justify-content:center;width:38px;height:38px;margin-bottom:6px;"]),$s=w.f.div.withConfig({displayName:"MessengerFooterstyled__Wrapper",componentId:"i9sssu-0"})(["position:relative;display:flex;align-items:center;min-height:","px;padding:0 6px 0 ","px;margin:0 10px;background-color:rgba(239,239,240,1);border-radius:18px;box-shadow:0 ","px 0 ",";@supports (backdrop-filter:blur()) or (-webkit-backdrop-filter:blur()){background-color:rgba(239,239,240,0.8);backdrop-filter:blur(60px);}"],kn.g,14,kn.g/3,(function(e){return e.theme.foundationTheme["bg-white-high"]})),Zs=w.f.div.withConfig({displayName:"MessengerFooterstyled__FooterBottomBackground",componentId:"i9sssu-1"})(["position:absolute;right:0;bottom:0;left:0;width:100%;height:calc(env(safe-area-inset-bottom,0) + ","px);background-color:",";transform:translateY(calc(env(safe-area-inset-bottom,0) + ","px));"],kn.h,(function(e){return e.theme.foundationTheme["bg-white-high"]}),kn.h),Js=w.f.div.withConfig({displayName:"MessengerFooterstyled__FooterBottomContent",componentId:"i9sssu-2"})(["position:absolute;right:0;bottom:-","px;left:0;display:flex;flex-direction:row;align-items:center;justify-content:center;width:100%;height:","px;padding:0 15px;margin:auto;color:",";background-color:",";"],kn.f+kn.h,kn.f+kn.h,(function(e){var t;return null===(t=e.theme.foundationTheme)||void 0===t?void 0:t["txt-black-dark"]}),(function(e){return e.theme.foundationTheme["bg-white-high"]})),Qs=w.f.div.withConfig({displayName:"MessengerFooterstyled__FooterBottomTitle",componentId:"i9sssu-3"})(["font-weight:bold;",";"],J.d.RemSize13),ec=w.f.div.withConfig({displayName:"MessengerFooterstyled__FooterBottomSubTitle",componentId:"i9sssu-4"})(["",";"],J.d.RemSize11),tc={Wrapper:$s,FooterBottomBackground:Zs,Dropzone:Object(w.f)(Ks).withConfig({displayName:"MessengerFooterstyled__Dropzone",componentId:"i9sssu-5"})([""," margin-left:1px;overflow:hidden;> ","{width:100%;height:100%;}"],Xs,Y.b),Emoji:Object(w.f)(Y.b).withConfig({displayName:"MessengerFooterstyled__Emoji",componentId:"i9sssu-6"})(["",""],Xs),TextAreaWrapper:w.f.div.withConfig({displayName:"MessengerFooterstyled__TextAreaWrapper",componentId:"i9sssu-7"})(["display:flex;flex-basis:0;flex-grow:1;flex-shrink:1;padding-bottom:","px;"],14),TextArea:Object(w.f)(Ss).withConfig({displayName:"MessengerFooterstyled__TextArea",componentId:"i9sssu-8"})(["width:100%;min-width:0;padding:0;padding-top:","px;padding-right:10px;margin:auto;overflow:hidden scroll;resize:none;background-color:transparent;border:none;scrollbar-width:none;"," &::-webkit-scrollbar{display:none;}&::placeholder{color:",";","}"],14,J.d.RemSize15,(function(e){return e.theme.foundationTheme["txt-black-dark"]}),J.d.RemSize15),SendButton:w.f.button.withConfig({displayName:"MessengerFooterstyled__SendButton",componentId:"i9sssu-9"})([""," display:flex;align-items:center;align-self:flex-end;justify-content:center;width:36px;height:36px;padding:0;margin:0 1px 7px 2px;cursor:pointer;border:none;border-radius:15px;&:hover{","}"],(function(e){var t=e.theme;return Ys(t).bgColor}),(function(e){var t=e.theme;return Ys(t).hoveredBgColor})),SendButtonIcon:Object(w.f)(X.a).withConfig({displayName:"MessengerFooterstyled__SendButtonIcon",componentId:"i9sssu-10"})([""]),FooterBottomContent:Js,FooterBottomTitle:Qs,FooterBottomSubTitle:ec,BoxWrapper:w.f.div.withConfig({displayName:"MessengerFooterstyled__BoxWrapper",componentId:"i9sssu-11"})(["position:relative;bottom:-","px;display:flex;flex-direction:column;align-items:center;justify-content:space-around;min-height:","px;padding:16px 20px 20px;"," font-weight:bold;color:",";background-color:",";border-top:1px solid ",";box-shadow:0 2px 6px 0 ",";"],kn.h,kn.g,J.d.RemSize13,Z.a.black40,(function(e){return e.theme.foundationTheme["bg-white-high"]}),Z.a.grey300,Z.a.black5),ChatBotBoxWrapper:w.f.div.withConfig({displayName:"MessengerFooterstyled__ChatBotBoxWrapper",componentId:"i9sssu-12"})(["position:relative;bottom:-","px;display:flex;align-items:center;justify-content:center;height:80px;background-color:",";box-shadow:0 0 2px 1px ",",0 -1px 4px ",";"],kn.h,(function(e){return e.theme.foundationTheme["bg-white-high"]}),Z.a.black5,Z.a.black8),ChatBotButtonWrapper:w.f.button.withConfig({displayName:"MessengerFooterstyled__ChatBotButtonWrapper",componentId:"i9sssu-13"})(["display:flex;align-items:center;justify-content:center;padding:12px 14px;margin-right:6px;"," font-weight:bold;color:",";cursor:pointer;background-color:",";border:none;border-radius:18px;box-shadow:",";"],J.d.RemSize14,Z.a.cobalt400,Z.a.white,Z.a.ev3),ChatBotButton:Object(w.f)(Y.b).withConfig({displayName:"MessengerFooterstyled__ChatBotButton",componentId:"i9sssu-14"})(["margin-right:6px;"]),BotImage:w.f.img.withConfig({displayName:"MessengerFooterstyled__BotImage",componentId:"i9sssu-15"})(["width:20px;height:20px;margin-right:8px;"]),NewChatButton:Object(w.f)(Vs.a).withConfig({displayName:"MessengerFooterstyled__NewChatButton",componentId:"i9sssu-16"})(["display:flex;align-items:center;justify-content:center;margin-top:8px;"]),HiddenInput:w.f.input.withConfig({displayName:"MessengerFooterstyled__HiddenInput",componentId:"i9sssu-17"})(["position:absolute;pointer-events:none;opacity:0;"]),EmojiPreviewWrapper:w.f.div.withConfig({displayName:"MessengerFooterstyled__EmojiPreviewWrapper",componentId:"i9sssu-18"})(["flex:1 0 auto;"]),EmojiPreview:w.f.div.withConfig({displayName:"MessengerFooterstyled__EmojiPreview",componentId:"i9sssu-19"})(["display:flex;margin:auto;cursor:pointer;& > img{padding:6px;margin:auto !important;}"])},nc=["wave","blush","heart_eyes","green_heart","+1","cry"];var oc=function(e){var t,n,o,r,a=e.message,i=e.onClickChatBotButton,p=e.toggleEmojiSelector,h=e.setMessage,m=e.onSendMessage,g=e.onUploadFile,b=Object(u.c)(),y=Object(U.a)().translate,v=Object(c.i)(),w=Object(c.g)(),C=Object(W.a)(),O=Object(on.a)().infiniteScrollRef,_=un(),j=_.textAreaRef,k=_.hiddenInputRef,I=_.isKeyboardOpen,E=_.handleFooterFocus,M=_.handleFooterBlur,S=_.handleShowFooterVisible,N=_.handleHideFooterVisible,T=Object(u.d)(d.a.supportBotSelectors.getSupportBot),F=Object(u.d)(d.a.userSelectors.getUser),P=Object(u.d)((function(e){return d.a.userChatsSelectors.getUserChat(e,v.params.userChatId)})),R=Object(l.useState)(!1),z=f()(R,2),A=z[0],H=z[1],G=Object(l.useCallback)((function(){var e=P.isBlockAfterClosed({channel:C});H(e)}),[C,P]),q=(t=G,n=hs.a,o=Object(l.useRef)(),r=Object(l.useCallback)((function(){window.clearInterval(o.current)}),[]),{start:Object(l.useCallback)((function(){o.current&&r(),o.current=window.setInterval(t,n)}),[r,t,n]),clear:r}),K=q.start,X=q.clear,$=Object(l.useRef)(!1),Z=Object(l.useMemo)((function(){return!(P.isSupporting()||P.isEmpty()&&!T.isEmpty())}),[T,P]);cs.getFooterIcons(),Object(l.useEffect)((function(){return P.isClosed()&&!A?(K(),function(){X()}):Wt.a}),[A,P,K,X]),Object(l.useEffect)((function(){var e=P.isBlockAfterClosed({channel:C});H(e)}),[C,X,P,a]);var J=Object(l.useCallback)((function(){return(!D.a.isPhone()||!$.current)&&ls()(a).call(a)}),[a]),Q=Object(l.useCallback)((function(){O.current&&O.current.scrollToBottom()}),[O]),ee=Object(l.useCallback)((function(){if(P.id){var e={personId:F.id,personType:F.type,chatId:P.id};b(x.a.uiActions.startTyping(e))}}),[b,F,P.id]),te=Object(l.useCallback)((function(){if(P.id){var e={personId:F.id,personType:F.type,chatId:P.id};b(x.a.uiActions.stopTyping(e))}}),[b,F,P.id]),ne=Object(l.useCallback)((function(e){var t,n,o;(e.persist(),e.target.value?ee():te(),h(e.target.value),P.isClosed()&&P.isBlockAfterClosed({channel:C})&&!ss.a.getItem(P.id)&&Vt()(t=["8472","34978","25178","21409"]).call(t,C.id))&&ss.a.setItem(P.id,Ke()(n=Ke()(o="userChatId: ".concat(P.id,", blockAfterClosed: ")).call(o,A,", isMessage: ")).call(n,!L()(a)))}),[h,ee,te,P,C,a,A]),oe=Object(l.useCallback)((function(){var e;J()&&(te(),m(ls()(a).call(a)),h(""),$.current=!1);var t,n,o=ss.a.getItem(P.id);(L()(o)||(us.a.captureMessage(o),window.localStorage.removeItem("Channel.".concat(P.id))),L()(o)&&P.isClosed()&&P.isBlockAfterClosed({channel:C})&&!L()(a)&&Vt()(e=["8472","34978","25178","21409"]).call(e,C.id))&&us.a.captureMessage(Ke()(t=Ke()(n="userChatId: ".concat(P.id,", blockAfterClosed: ")).call(n,A,", directSend: ")).call(t,!L()(a)))}),[C,A,P,J,a,m,h,te]),re=Object(l.useRef)(!1),ae=Object(l.useCallback)((function(){var e,t;D.a.isPhone()&&j.current&&I&&(null===(e=k.current)||void 0===e||e.focus(),null===(t=j.current)||void 0===t||t.focus());oe(),$.current&&(re.current=!0)}),[oe,k,I,j]),ie=Object(l.useCallback)((function(){b(x.a.uiActions.exitUserChat({userChatId:P.id})),w.replace("/user-chats/new")}),[b,w,P.id]),le=Object(l.useCallback)((function(e){e.keyCode!==gn.a.ENTER||e.shiftKey||D.a.isPhone()||(e.stopPropagation(),e.preventDefault(),oe(),Q())}),[oe,Q]),se=Object(l.useCallback)((function(e){j.current=e}),[j]);fs({scrollToBottom:Q,isKeyboardOpen:I});var ce=Object(l.useCallback)((function(){$.current=!0}),[]),ue=Object(l.useCallback)((function(){$.current=!1,re.current&&(oe(),re.current=!1)}),[oe]),de=Object(l.useCallback)((function(e){var t;m(":".concat(e,":")),null===(t=j.current)||void 0===t||t.focus()}),[m,j]),pe=Object(ds.a)(),fe=Object(l.useMemo)((function(){return s.a.createElement(tc.Wrapper,null,s.a.createElement(tc.TextAreaWrapper,null,s.a.createElement(tc.HiddenInput,{ref:k}),s.a.createElement(tc.TextArea,{"data-ch-testid":"messenger-footer-text-area",onMouseDown:pe,inputRef:se,placeholder:y("ch.message_input.placeholder"),value:a,maxRows:5,onChange:ne,onKeyDown:le,onFocus:E,onBlur:M,onCompositionStart:D.a.isAppleDevice()?ce:void 0,onCompositionEnd:D.a.isAppleDevice()?ue:void 0})),D.a.isPhone()||s.a.createElement(tc.Emoji,{name:"face-smile",size:Y.a.Small,defaultOpacity:.4,hoveredOpacity:.6,onClick:p}),L()(ls()(a).call(a))?s.a.createElement(tc.Dropzone,{onDrop:g},s.a.createElement(Y.b,{name:"clip",size:Y.a.Small,defaultOpacity:.4,hoveredOpacity:.6})):s.a.createElement(tc.SendButton,{"data-ch-testid":"messenger-footer-send-button",onClick:ae},s.a.createElement(tc.SendButtonIcon,{name:"send",size:Y.a.Normal,defaultOpacity:1,withTheme:!0})),(D.a.isPhone()||D.a.isAppleTablet())&&s.a.createElement(tc.FooterBottomBackground,null),I&&D.a.isPhone()&&s.a.createElement(tc.FooterBottomContent,null,rr()(nc).call(nc,(function(e){return s.a.createElement(tc.EmojiPreviewWrapper,{onClick:function(){return de(e)}},s.a.createElement(tc.EmojiPreview,null,s.a.createElement(Ba.a,{key:"emoji-".concat(e),name:e,size:36})))}))))}),[pe,ne,ue,ce,M,E,le,ae,de,se,k,I,a,g,p,y]),he=Object(l.useMemo)((function(){return s.a.createElement(tc.BoxWrapper,null,y("ch.message_input.disabled.new_chat"))}),[y]),me=Object(l.useMemo)((function(){return s.a.createElement(tc.ChatBotBoxWrapper,null,s.a.createElement(tc.ChatBotButtonWrapper,{onClick:i},s.a.createElement(tc.ChatBotButton,{name:"chat-progress",size:Y.a.Small}),y("ch.chat.marketing_to_chat")))}),[i,y]),ge=Object(l.useMemo)((function(){return s.a.createElement(tc.BoxWrapper,null,y("ch.message_input.disabled.closed_chat"),(!C.isNotInOperationAndDisabled()||!T.isEmpty())&&s.a.createElement(tc.NewChatButton,{onClick:ie}))}),[C,ie,y,T]),be=Object(l.useMemo)((function(){return P.isEmpty()?T.isEmpty()?C.isNotInOperationAndDisabled()&&L()(a)?he:fe:null:P.isSupporting()?null:P.isWaiting()?me:!P.hasState()&&C.isNotInOperationAndDisabled()&&L()(a)?he:(P.hasState()||C.isNotInOperationAndDisabled()&&L()(a))&&P.isClosed()&&A&&L()(a)?ge:fe}),[ge,me,he,fe,A,C,a,T,P]);return Object(l.useEffect)((function(){B()(be)?N():S()}),[be,N,S]),Object(l.useEffect)((function(){return te}),[]),s.a.createElement(V.a.MessengerFooterLayout,{visible:Z,isKeyboardOpen:I},be)},rc=n(1377),ac=Object(w.e)(["top:unset;height:120%;"]),ic=Object(w.e)(["position:fixed;bottom:0;width:100%;padding-bottom:40px;"]),lc=w.f.div.withConfig({displayName:"ManagerInfostyled__Header",componentId:"svohfc-0"})(["display:flex;align-items:flex-end;justify-content:space-between;width:100%;height:40px;padding:0 18px;font-weight:600;color:",";",""],(function(e){return e.theme.foundationTheme["txt-black-dark"]}),J.d.RemSize13),sc=w.f.div.withConfig({displayName:"ManagerInfostyled__Title",componentId:"svohfc-1"})(["display:flex;align-items:center;"]),cc=w.f.div.withConfig({displayName:"ManagerInfostyled__CloseIcon",componentId:"svohfc-2"})(["display:flex;align-items:center;justify-content:center;width:24px;height:24px;background-color:",";border-radius:8px;"],(function(e){var t;return null===(t=e.theme.foundationTheme)||void 0===t?void 0:t["bg-black-lighter"]})),uc=w.f.div.withConfig({displayName:"ManagerInfostyled__Body",componentId:"svohfc-3"})(["display:flex;flex-direction:column;align-items:center;padding:0 30px;margin-top:24px;"]),dc=w.f.div.withConfig({displayName:"ManagerInfostyled__Name",componentId:"svohfc-4"})(["display:flex;align-items:center;justify-content:center;margin-top:18px;font-weight:600;color:",";text-align:center;",""],(function(e){return e.theme.foundationTheme["txt-black-darkest"]}),J.d.RemSize18),pc=w.f.p.withConfig({displayName:"ManagerInfostyled__Description",componentId:"svohfc-5"})(["display:flex;align-items:center;justify-content:center;padding-bottom:10px;margin-top:4px;color:",";text-align:center;"," ",""],(function(e){return e.theme.foundationTheme["txt-black-dark"]}),J.d.RemSize13,kn.o),fc=w.f.div.withConfig({displayName:"ManagerInfostyled__ButtonsWrapper",componentId:"svohfc-6"})(["padding-top:8px;"]),hc=w.f.a.withConfig({displayName:"ManagerInfostyled__Button",componentId:"svohfc-7"})(["display:flex;align-items:center;justify-content:center;height:36px;margin:0 30px;text-decoration:none;cursor:pointer;border-radius:8px;&:hover{background-color:",";}"],(function(e){return e.theme.foundationTheme["bg-black-lighter"]})),mc=w.f.div.withConfig({displayName:"ManagerInfostyled__ButtonIcon",componentId:"svohfc-8"})(["display:flex;align-items:center;justify-content:center;"]),gc=w.f.div.withConfig({displayName:"ManagerInfostyled__ButtonContent",componentId:"svohfc-9"})(["padding:0 4px;margin-left:2px;font-weight:600;color:",";",""],(function(e){return e.theme.foundationTheme["txt-black-darker"]}),J.d.RemSize15);var bc=function(){var e=Object(u.c)(),t=Object(U.a)().translate,n=Object(da.a)(),o=Object(u.d)(d.a.uiSelectors.showManagerInfo),r=Object(u.d)(d.a.uiSelectors.managerInfo),a=Object(l.useState)(r.mobileNumberForFront),i=f()(a,2),c=i[0],p=i[1];Object(l.useEffect)((function(){r.isEmpty()||e(x.a.utilActions.requestGetPhoneNumber({number:r.mobileNumberForFront})).promise.then((function(e){p(e.payload.national)})).catch(Wt.a)}),[e,r]);var h=Object(l.useCallback)((function(){e(x.a.uiActions.hideManagerInfo())}),[e]),m=Object(l.useMemo)((function(){return r.mobileNumberForFront?s.a.createElement(hc,{href:"tel:".concat(r.mobileNumberForFront),target:"_blank"},s.a.createElement(mc,null,s.a.createElement(Y.b,{name:"mobile",size:20,defaultOpacity:.4,hoveredOpacity:.4})),s.a.createElement(gc,null,c||r.mobileNumberForFront)):null}),[r.mobileNumberForFront,c]),g=Object(l.useMemo)((function(){return r.emailForFront?s.a.createElement(hc,{href:"mailto:".concat(r.emailForFront),target:"_blank"},s.a.createElement(mc,null,s.a.createElement(Y.b,{name:"email",size:20,defaultOpacity:.4,hoveredOpacity:.4})),s.a.createElement(gc,null,r.emailForFront)):null}),[r.emailForFront]),b=Object(l.useMemo)((function(){return m||g?s.a.createElement(fc,null,m,g):null}),[m,g]),y=Object(l.useMemo)((function(){var e=r.getDescription(n);return e?s.a.createElement(pc,null,e):null}),[r,n]);return s.a.createElement(rc.a,{show:o&&!r.isEmpty(),onHide:h,wrapperInterpolation:ac,contentInterpolation:ic},s.a.createElement(lc,null,s.a.createElement(sc,null,t("ch.manager.profile")),s.a.createElement(cc,{onClick:h},s.a.createElement(Y.b,{name:"cancel",size:20}))),s.a.createElement(uc,null,s.a.createElement($.a,{url:r.avatarUrl,size:120}),s.a.createElement(dc,null,r.getName(t,n)),y),b)},yc=n(308),vc=n(1371),wc={PastedImage:w.f.img.withConfig({displayName:"Messengerstyled__PastedImage",componentId:"sc-1e1ufgm-0"})(["display:inline-block;max-width:266px;max-height:266px;"]),PastedImageWrapper:w.f.div.withConfig({displayName:"Messengerstyled__PastedImageWrapper",componentId:"sc-1e1ufgm-1"})(["display:flex;align-items:center;justify-content:center;"]),CloseButton:Object(w.f)(vc.a).withConfig({displayName:"Messengerstyled__CloseButton",componentId:"sc-1e1ufgm-2"})(["font-weight:500;color:",";background-color:",";border-radius:5px;&:hover{background-color:",";}"],Z.a.grey900,Z.a.white,Z.a.grey200),PrimaryButton:Object(w.f)(vc.a).withConfig({displayName:"Messengerstyled__PrimaryButton",componentId:"sc-1e1ufgm-3"})(["margin-left:6px;font-weight:bold;color:",";background-color:",";border-radius:5px;&:hover{background-color:",";}"],Z.a.white,Z.a.blue400,Z.a.cobalt500),ModalContent:w.f.div.withConfig({displayName:"Messengerstyled__ModalContent",componentId:"sc-1e1ufgm-4"})(["padding:16px 16px 0;"]),ModalFooter:w.f.div.withConfig({displayName:"Messengerstyled__ModalFooter",componentId:"sc-1e1ufgm-5"})(["padding:16px;text-align:right;"])};function xc(e,t){var n=ye()(e);if(we.a){var o=we()(e);t&&(o=Ce()(o).call(o,(function(t){return Ye()(e,t).enumerable}))),n.push.apply(n,o)}return n}function Cc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xc(Object(n),!0).forEach((function(t){De()(e,t,n[t])})):_e.a?Object.defineProperties(e,_e()(n)):xc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Ye()(n,t))}))}return e}var Oc=function(e){var t=e.showImageGallery,n=Object(U.a)().translate,o=Object(c.i)(),r=Object(u.c)(),a=Object(on.a)().infiniteScrollRef,i=an().inputRef,p=un().textAreaRef,h=Object(u.d)((function(e){return d.a.userChatsSelectors.getUserChat(e,o.params.userChatId)})),m=Object(u.d)(d.a.pluginSelectors.getPlugin),g=Object(u.d)(d.a.supportBotSelectors.getSupportBotWithBot),y=Object(u.d)(d.a.supportBotSelectors.getStep),v=Object(u.d)(d.a.supportBotSelectors.getButtons),w=Object(u.d)(d.a.messagesSelectors.getMessages),C=Object(u.d)(d.a.userSelectors.getUser),O=Object(u.d)(d.a.botsSelectors.getDefaultBot),_=Object(l.useState)(!1),k=f()(_,2),I=k[0],E=k[1],S=Object(l.useState)(""),N=f()(S,2),T=N[0],B=N[1],F=Object(l.useRef)($t.c.List()),P=Object(l.useRef)($t.c.List()),R=Object(l.useRef)(!1),L=Object(l.useCallback)((function(){return p.current}),[p]),z=Object(l.useCallback)((function(e){B(e),Object(hn.c)(h.id,e)}),[h.id]),A=Object(l.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.current&&a.current.scrollToBottom(e)}),[a]),W=Object(l.useCallback)((function(e,t,n){var o=n.getWelcomeMessageObject(t.language),a=pn.a.createMessageObject(e,Cc(Cc({},o),{},{$sending:!1,$welcome:!0,createdAt:en.a.now().getTime()}));r(x.a.userChatActions.requestCreateLocalMessage({message:a}))}),[r]),H=Object(l.useCallback)((function(e,t,n){var o=pn.a.createMessageObject(e.$bot,Cc(Cc({},t.message),{},{id:"supportBotMessage",$sending:!1,$welcome:!0,supportBot:new dn.a(Cc(Cc({},g),{},{buttons:n})),createdAt:en.a.now().getTime()}));r(x.a.userChatActions.requestCreateLocalMessage({message:o}))}),[r,g]);Object(l.useEffect)((function(){!h.id&&w.isEmpty()&&(g.isEmpty()?W(O,C,m):H(g,y,v))}),[]),Object(l.useEffect)((function(){var e=tn.a.messageInputCache.get(bn.a.DRAFT_MESSAGE),t=b()(e,"messages.".concat(h.id||hn.a),"");return B(t),function(){Object(hn.c)(hn.a,T)}}),[]),Object(l.useEffect)((function(){var e=L();i.current?i.current.focus():e&&!D.a.isPhone()&&e.focus()}),[]);var G=Object(nn.a)(h);Object(l.useEffect)((function(){var e=L();null!=G&&G.isSupporting()&&!h.isSupporting()&&h.isUnassigned()&&(A(),e&&!D.a.isPhone()&&e.focus())}),[L,G,A,h]);var q=Object(l.useCallback)((function(e,t){F.current.forEach((function(n){r(x.a.userChatActions.requestCreateMessage({channelId:e,userChatId:t,message:n}))})),F.current=F.current.clear()}),[r]),K=Object(l.useCallback)((function(e,t){P.current.forEach((function(n){r(x.a.localFileActions.enqueueWaitingLocalFile({channelId:e,userChatId:t,localFile:{blob:n}}))})),P.current=P.current.clear()}),[r]),Y=Object(l.useCallback)((function(e){e.stopPropagation(),E((function(e){return!e}))}),[]),X=Object(l.useCallback)((function(){E(!1);var e=L();e&&!D.a.isPhone()&&e.focus()}),[L]),$=Object(l.useCallback)((function(e){Ht()(e,"plainText")?F.current=F.current.push(e):P.current=P.current.push(e),R.current||(R.current=!0,r(x.a.userChatActions.requestCreateUserChat({pluginId:m.id})).promise.then((function(e){var t=e.payload.userChat,n=t.id,o=t.channelId;r(x.a.uiActions.enterUserChat({userChatId:n})),j.b.replaceUserChatPath(n),R.current=!1,q(o,n),K(o,n)})).catch((function(){R.current=!1}))),F.current.size>0&&r(x.a.userChatActions.requestCreateLocalMessage({message:F.current.last()}))}),[r,K,q,m.id]),Z=Object(l.useCallback)((function(e){var t=h.id,n=h.channelId;t?Ht()(e,"plainText")?(r(x.a.userChatActions.requestCreateMessage({userChatId:t,message:e})),r(x.a.userChatActions.requestCreateLocalMessage({userChatId:t,message:e}))):r(x.a.localFileActions.enqueueWaitingLocalFile({channelId:n,userChatId:t,localFile:{id:Jt()(),blob:e}})):$(e)}),[r,$,h]),J=Object(l.useCallback)((function(e){Z(pn.a.createMessageObject(C,{plainText:e}))}),[Z,C]),Q=Object(l.useCallback)((function(e){e.forEach((function(e){return e.size>mn?(yc.b.error(n("ch.toast.file_upload.exceed_max.error","1GB"),3e3),null):Z(e)}))}),[Z,n]),ee=Object(l.useCallback)((function(e,t,n,o){var a,i=en.a.now(),l=Ke()(a="".concat(i.getTime())).call(a,Object(Qt.d)()),s=w.last();if(e===sn.Select){var c=pn.a.createMessageObject(C,{requestId:l,createdAt:s.getCreatedAt()>+i?s.getCreatedAt()+1e4:+i+1e4,plainText:t.text,submit:{id:n,key:t.key}});r(x.a.userChatActions.requestCreateActionableMessage({userChatId:h.id,message:c})),r(x.a.userChatActions.requestCreateLocalMessage({userChatId:h.id,message:c}))}else if(t){h.id?r(x.a.supportBotActions.requestReplySupportBotButtons({userChatId:h.id,messageId:n,buttonIndex:o,requestId:l})):r(x.a.supportBotActions.requestCreateSupportBotUserChat({supportBotId:g.id,revisionId:g.revisionId,pluginId:m.id})).promise.then((function(e){var t=b()(e.payload,"userChat.id"),n=b()(e.payload,"userChat.frontMessageId");Object(hn.b)(t,T),r(x.a.uiActions.enterUserChat({userChatId:t})),r(x.a.supportBotActions.requestReplySupportBotButtons({userChatId:t,messageId:n,buttonIndex:o,requestId:l})),j.b.replaceUserChatPath(t)}));var u=pn.a.createMessageObject(C,{requestId:l,createdAt:s.getCreatedAt()>+i?s.getCreatedAt()+1e4:+i+1e4,$sending:!1,plainText:t.text});r(x.a.userChatActions.requestCreateLocalMessage({userChatId:h.id,message:u}))}}),[r,w,T,m.id,g.id,g.revisionId,C,h.id]),te=Object(l.useCallback)((function(e){var t,n,o=L();if(o){var r,a,i,l=qt()(T).call(T,0,o.selectionEnd),s=qt()(T).call(T,o.selectionEnd),c=Ke()(t=Ke()(n="".concat(l)).call(n,Object(fn.a)(e))).call(t,s),u=c.length-o.value.length,d=o.selectionEnd+u;B(c),X(),a=d,i=d,(r=o).setSelectionRange(a,i),r.focus()}}),[T,L,X]),ne=Object(l.useCallback)((function(){var e=L();e&&!D.a.isPhone()&&e.focus()}),[L]),oe=Object(l.useCallback)((function(e){Z(e),Da.c.hide()}),[Z]),re=Object(l.useCallback)((function(e){return function(t){t.keyCode===gn.a.ESC?(t.preventDefault(),Da.c.hide()):t.keyCode===gn.a.ENTER&&(t.preventDefault(),t.stopPropagation(),oe(e))}}),[oe]),ae=Object(l.useCallback)((function(){r(x.a.supportBotActions.requestSwitchToSupportBot({userChatId:h.id,pluginId:m.id})).promise.then((function(){A()})).catch(Wt.a)}),[r,m.id,A,h.id]),ie=Object(l.useCallback)((function(e){var t=e.target,n=yn.b?"a"===t.tagName.toLowerCase()&&t:t.closest("a")||t.closest("A");if(n){var o=n.href;o&&r(x.a.uiActions.clickedRedirect({redirectUrl:o}))}}),[r]),le=Object(l.useCallback)((function(e){var t=function(){try{var t,n=Object(M.c)(e);if("file"===(null==n?void 0:n.kind)&&Vt()(t=n.type).call(t,"image")){var o=n.getAsFile();if(o&&o.size>0){var r=(d=(n.type||"").split("/").pop(),p=en.a.now(),f=p.getFullYear(),h=zt()("".concat(p.getMonth()-1),2,"0"),m=zt()("".concat(p.getDate()),2,"0"),g=p.getHours(),b=p.getMinutes(),y=p.getSeconds(),Ke()(a=Ke()(i=Ke()(l=Ke()(s=Ke()(c=Ke()(u="".concat(f,"-")).call(u,h,"-")).call(c,m," ")).call(s,g,":")).call(l,b,":")).call(i,y,".")).call(a,d));return new window.File([o],r,{type:n.type})}}return null}catch(e){return null}var a,i,l,s,c,u,d,p,f,h,m,g,b,y}();t&&(e.preventDefault(),Da.c.show({content:s.a.createElement(s.a.Fragment,null,s.a.createElement(wc.ModalContent,null,s.a.createElement(wc.PastedImageWrapper,null,s.a.createElement(wc.PastedImage,{src:Xt.a.createObjectURL(t)}))),s.a.createElement(wc.ModalFooter,null,s.a.createElement(wc.CloseButton,{onClick:Da.c.hide},n("ch.common.cancel")),s.a.createElement(wc.PrimaryButton,{onClick:function(){return oe(t)},autoFocus:!0},n("ch.chat.send")))),onHide:ne,onKeyDown:re(t)}))}),[oe,ne,re,n]);return s.a.createElement(V.a.MessengerLayout,{onPaste:le},s.a.createElement(as,{userChat:h,messages:w,user:C,showImageGallery:t,onClickMessageAction:ee,shouldShowEmojiSelector:I,hideEmojiSelector:X,onClickEmoji:te,onClick:ie,createMessage:Z}),s.a.createElement(bc,null),s.a.createElement(oc,{message:T,onClickChatBotButton:ae,toggleEmojiSelector:Y,setMessage:z,onSendMessage:J,onUploadFile:Q}))},_c={Wrapper:w.f.div.withConfig({displayName:"UserChatstyled__Wrapper",componentId:"sc-1to4g9-0"})(["position:relative;display:flex;flex-direction:column;width:100%;height:100%;background-color:",";"],Z.a.white),Body:w.f.div.withConfig({displayName:"UserChatstyled__Body",componentId:"sc-1to4g9-1"})(["position:relative;flex-basis:0;flex-grow:1;flex-shrink:1;background-color:",";"],(function(e){return e.theme.foundationTheme["bg-white-normal"]}))};var jc=Object(Lt.a)({initializer:function(e,t,n){var o=b()(e,"match.params.userChatId"),r=b()(t,"match.params.userChatId"),a=r===j.a,i=!a&&r,l=b()(t,"userChat",new k.a),s=b()(e,"wsStatus")===E.a.RECONNECTING||b()(e,"wsStatus")===E.a.DISCONNECTED,c=b()(t,"wsStatus")===E.a.CONNECTED,u=s&&c;if(!e&&t){var d=t.isGlobalProfileRequested,p=t.countries;d||n(x.a.userActions.requestGetUser()),p.isEmpty()&&n(x.a.geoActions.requestGetCountries()),a&&n(x.a.userChatActions.enterNewUserChat()),O.b.isEmpty()&&n(x.a.emojiActions.requestGetEmojiInfo())}var f=u&&l.id;if(f||i&&o!==i){var h=f?l.id:i;return n(x.a.userChatActions.requestGetMessages({userChatId:h})),n(x.a.userChatActions.requestGetUserChat({userChatId:h})),!0}return!1},isLoading:d.a.loadingSelectors.userChat,hasError:d.a.errorSelectors.userChat,ErrorComponent:he.a,injectToProps:{errorStatus:d.a.errorSelectors.userChatErrorStatus,userChat:d.a.userChatsSelectors.getUserChat,position:function(){return"fixed"}}})((function(){var e=Object(c.h)(),t=Object(c.i)(),n=Object(u.c)(),o=Object(u.d)((function(e){return d.a.userChatsSelectors.getUserChat(e,t.params.userChatId)})),r=Object(u.d)(d.a.errorSelectors.userChatErrorStatus),a=Object(u.d)(d.a.messagesSelectors.getImageMessages),i=Object(l.useMemo)((function(){return _.a.getHideNavigationBarOnChatView()}),[]),p=Object(l.useMemo)((function(){return r.has(I.a.UNAUTHENTICATED)}),[r]),h=Object(l.useState)(0),g=f()(h,2),b=g[0],y=g[1],O=Object(l.useState)(0),k=f()(O,2),E=k[0],S=k[1],N=Object(C.a)(),T=f()(N,3),B=T[0],F=T[1],P=T[2],R=Object(l.useMemo)((function(){return Object(M.f)().document.getElementById("ch-plugin-core")||window.document.body}),[]),L=Object(l.useCallback)((function(e){var t,n=v()(a).call(a,(function(t){var n;return null===(n=t.files)||void 0===n?void 0:n.some((function(t){return t.id===e}))}));if(!(n<0)){var o=a.get(n),r=null==o?void 0:v()(t=o.files).call(t,(function(t){return t.id===e}));F(),y(n),m()(r)&&r>=0&&S(r)}}),[a,F]),D=Object(l.useCallback)((function(){n(x.a.uiActions.closeUserChat())}),[n]);return Object(l.useEffect)((function(){return o.id&&n(x.a.uiActions.enterUserChat({userChatId:o.id})),function(){n(x.a.uiActions.exitUserChat({userChatId:o.id}))}}),[]),Object(l.useEffect)((function(){o.id&&n(x.a.userChatActions.requestReadUserChat({userChatId:o.id}))}),[n,o.id]),Object(l.useEffect)((function(){var e=j.b.getTranslationVisibility();e&&n(x.a.uiActions.setTranslationVisibility({translationVisibility:"false"!==e}))}),[n]),s.a.createElement(_c.Wrapper,{"data-ch-testid":"user-chat"},i||p||s.a.createElement(fe,{onClickBackButton:D}),s.a.createElement(_c.Body,null,s.a.createElement(Oc,{key:e.pathname,showImageGallery:L})),s.a.createElement(w.a,{target:R},s.a.createElement(Rt,{messages:a,show:B,startMessageIndex:b,startFileIndex:E,onHide:P,targetElement:R})))})),kc=n(286),Ic=n(1344),Ec=n(1345),Mc=function(e){return e.visible?null:"\n    visibility: hidden;\n    opacity: 0;\n  "},Sc={Wrapper:w.f.div.withConfig({displayName:"UserChatListstyled__Wrapper",componentId:"sc-1mw48kw-0"})(["position:relative;display:flex;flex-direction:column;width:100%;height:100%;padding-top:","px;background-color:",";"],kn.c,Z.a.white),DeskTopBody:w.f.div.withConfig({displayName:"UserChatListstyled__DeskTopBody",componentId:"sc-1mw48kw-1"})(["position:relative;display:flex;flex-basis:0;flex-direction:column;flex-grow:1;flex-shrink:1;align-items:center;justify-content:center;"]),InfiniteScroll:Object(w.f)(Ur).withConfig({displayName:"UserChatListstyled__InfiniteScroll",componentId:"sc-1mw48kw-2"})(["width:100%;","::after{display:block;height:74px;pointer-events:none;content:' ';}"],Mc),NewChatButtonWrapper:w.f.div.withConfig({displayName:"UserChatListstyled__NewChatButtonWrapper",componentId:"sc-1mw48kw-3"})(["position:",";right:0;bottom:24px;left:0;display:",";justify-content:center;margin:0 24px;",""],D.a.isPhone()?"fixed":"absolute",(function(e){return e.visible?"flex":"none"}),Mc),BlurryBottom:w.f.div.withConfig({displayName:"UserChatListstyled__BlurryBottom",componentId:"sc-1mw48kw-4"})(["position:fixed;right:0;bottom:0;left:0;height:180px;pointer-events:none;background:linear-gradient(180deg,"," 0%,"," 100%);border-radius:16px;"],Z.a.white0,Z.a.white),Icon:Object(w.f)(gt.a).withConfig({displayName:"UserChatListstyled__Icon",componentId:"sc-1mw48kw-5"})(["cursor:auto;"]),EmptyText:w.f.div.withConfig({displayName:"UserChatListstyled__EmptyText",componentId:"sc-1mw48kw-6"})(["padding:0 42px;margin-top:20px;margin-bottom:80px;"," font-weight:bold;color:",";text-align:center;word-wrap:break-word;white-space:pre-line;"],J.d.RemSize14,Z.a.grey500),TitleWrapper:w.f.div.withConfig({displayName:"UserChatListstyled__TitleWrapper",componentId:"sc-1mw48kw-7"})(["display:flex;padding:13px 14px 4px;color:",";background-color:",";",""],Z.a.txt_black_darker,Z.a.white,J.d.RemSize13),Title:w.f.div.withConfig({displayName:"UserChatListstyled__Title",componentId:"sc-1mw48kw-8"})(["flex:1 0 auto;"])},Nc=0;var Tc=function(){var e=Object(c.g)(),t=Object(W.a)(),n=Object(u.c)(),o=Object(U.a)(),r=o.translate,a=o.translateWithInnerHtml,i=Object(on.a)().infiniteScrollRef,p=Object(u.d)(d.a.errorSelectors.userChatErrorStatus),h=Object(u.d)(d.a.userChatsSelectors.getNext),m=Object(u.d)(d.a.userChatsSelectors.getFilteredUserChats),g=Object(u.d)(d.a.supportBotSelectors.getSupportBot),b=Object(u.d)(d.a.userSelectors.getUser),y=Object(l.useState)(!1),v=f()(y,2),C=v[0],O=v[1],j=Object(l.useState)(!1),k=f()(j,2),E=k[0],M=k[1];Object(l.useEffect)((function(){M(!0),setTimeout((function(){O(!0),window.requestAnimationFrame((function(){M(!1),i.current&&(Nc?i.current.scrollDown(Nc,{smoothScroll:!1}):i.current.scrollToTop({smoothScroll:!1}),Nc=0)}))}),0)}),[i]);var S=Object(l.useCallback)((function(e){var t;Nc=(null===(t=i.current)||void 0===t?void 0:t.getScrollTop())||document.documentElement.scrollTop||0,n(x.a.uiActions.goUserChat({userChatId:e.id}))}),[n,i]),N=Object(l.useCallback)((function(){n(x.a.uiActions.goNewLocalUserChat())}),[n]),T=Object(l.useCallback)((function(e){n(x.a.userChatActions.requestLeaveUserChat({userChatId:e}))}),[n]),F=Object(l.useCallback)((function(){return n(x.a.userChatActions.requestGetNextUserChats({limit:kc.b,next:h})).promise}),[n,h]),P=Object(l.useCallback)((function(){e.goBack()}),[e]),R=_.a.getHideNavigationBarOnChatView(),L=p.has(I.a.UNAUTHENTICATED),D=Object(l.useMemo)((function(){return!(E||t.isNotInOperationAndDisabled()&&g.isEmpty())}),[t,E,g]),z=Object(l.useCallback)((function(e){return s.a.createElement(Ic.a,{key:e.id,userChat:e,onClick:S,onLeave:T})}),[S,T]),A=Object(l.useMemo)((function(){return s.a.createElement(Sc.TitleWrapper,null,s.a.createElement(Sc.Title,null,r("ch.lounge.card.chat_list.title")),b.unread>0&&s.a.createElement(Ec.a,null))}),[r,b.unread]),H=Object(l.useMemo)((function(){return Object(w.e)([" width:","px;"],kn.j)}),[]),G=Object(l.useCallback)((function(){return C?m.isEmpty()?s.a.createElement(s.a.Fragment,null,A,s.a.createElement(Sc.Icon,{name:"no-list-illust",defaultOpacity:1,size:60}),s.a.createElement(Sc.EmptyText,null,a("ch.chat.empty_description"))):s.a.createElement(Sc.InfiniteScroll,{ref:i,toUp:!1,showLoader:!0,hasMore:!B()(h),onLoadMore:F,useBodyScroll:_.a.isBodyScrollMode(),visible:!E,scrollBarInterpolation:H},A,rr()(m).call(m,z)):null}),[A,F,i,E,C,h,z,a,m,H]),q=Object(l.useMemo)((function(){return _.a.isBodyScrollMode()?"div":Sc.DeskTopBody}),[]);return s.a.createElement(s.a.Fragment,null,R||L||s.a.createElement(fe,{onClickBackButton:P,isUserChatList:!0}),s.a.createElement(Sc.Wrapper,{onWheel:Qe.a.stopPropagation},s.a.createElement(q,null,E&&s.a.createElement(eo.b,null),G(),s.a.createElement(Sc.BlurryBottom,null),s.a.createElement(Sc.NewChatButtonWrapper,{visible:D},s.a.createElement(Vs.a,{onClick:N})))))},Bc={Content:w.f.div.withConfig({displayName:"UserChatsstyled__Content",componentId:"j27mpg-0"})(["position:relative;width:100%;height:100%;",""],!_.a.isBodyScrollMode()&&Object(w.e)(["transform:translate(0,0);"]))};t.default=Object(c.j)((function(e){var t=e.match,n=Object(u.d)(d.a.geoSelectors.getCountries),o=Object(u.d)(d.a.userSelectors.isGlobalProfileRequested);return s.a.createElement(s.a.Fragment,null,s.a.createElement(Bc.Content,null,s.a.createElement(c.e,null,s.a.createElement(c.c,{exact:!0,path:"/user-chats",component:Tc}),s.a.createElement(c.c,{exact:!0,path:"/user-chats/:userChatId",render:function(e){var a=i()({},e);return s.a.createElement(jc,r()({key:t.params.userChatId,countries:n,isGlobalProfileRequested:o},a))}}))))}))}}]);